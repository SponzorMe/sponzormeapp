<ion-view>
  <ion-nav-title>Add Task</ion-nav-title>
  <ion-content>
    <form name="addTaskForm" novalidate ng-submit="addTaskForm.$valid && addTask.createTask( addTaskForm )">
      <ion-list type="card">  
        <ion-item class="item-divider">
          Add Task
        </ion-item>
        <!-- Title  -->
        <label class="item item-input" ng-class="{ 'has-error' : addTaskForm.title.$invalid && addTaskForm.$submitted }">
          <input 
          name="title" 
          type="text" 
          placeholder='Task' 
          ng-model="addTask.newTask.title"
          ng-minlength="5"
          ng-maxlength="30"
          required>
        </label>
        <div class="form-errors" ng-messages="addTaskForm.title.$error" ng-if="addTaskForm.$invalid && addTaskForm.$submitted">
          <div class="form-error" ng-message="required"><i class="icon ion-close-circled"></i> Es requerido</div>
          <div class="form-error" ng-message="minlength"><i class="icon ion-close-circled"></i> Muy peque√±o</div>
          <div class="form-error" ng-message="maxlength"><i class="icon ion-close-circled"></i> Muy largo</div>
        </div>
        <!-- Description  -->
        <label class="item item-input" ng-class="{ 'has-error' : addTaskForm.description.$invalid && addTaskForm.$submitted }">
          <textarea 
          name="description" 
          placeholder="Description"
          ng-model="addTask.newTask.description" 
          required
          ></textarea>
        </label>
        <div class="form-errors" ng-messages="addTaskForm.description.$error" ng-if="addTaskForm.$invalid && addTaskForm.$submitted">
          <div class="form-error" ng-message="required"><i class="icon ion-close-circled"></i> Es requerido</div>
        </div>
        <!-- Perk -->
        <label class="item item-input item-select" ng-class="{ 'has-error' : addTaskForm.perk.$invalid && addTaskForm.$submitted }">
          <div class="input-label">Perk</div>
          <select 
          name="perk" 
          ng-model="addTask.newTask.perk" 
          ng-options="perk.kind for perk in addTask.perks | filter:{id_event: addTask.eventId}" 
          required>
          </select>
        </label>
        <div class="form-errors" ng-messages="addTaskForm.perk.$error" ng-if="addTaskForm.$invalid && addTaskForm.$submitted">
          <div class="form-error" ng-message="required"><i class="icon ion-close-circled"></i> Es requerido</div>
        </div>
      </ion-list>
      <div class="padding">
        <button type="submit" class="button button-block button-positive">
          Save  
        </button>
      </div>
    </form>
  </ion-content>
</ion-view>