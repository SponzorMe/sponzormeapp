!function(){"use strict";angular.module("app",["ionic","ionic.service.core","ionic.service.deploy","ionic.service.analytics","ngCordova","google.places","firebase","angularMoment","ngMessages","ngStorage","ngSanitize","ngIOS9UIWebViewPatch","pascalprecht.translate","base64","tabSlideBox","app.widgets","app.filters","app.users","app.dashboard-organizer","app.dashboard-sponzor","app.events-organizer","app.events-sponzor","app.sponsors-organizer","app.tasks-organizer"])}(),function(){"use strict";function e(e,t,n,r,o){function s(){function e(){var e=JSON.parse(localStorage.getItem("ngStorage-userAuth"));return 0==e.type?"/organizer/home":"/sponzor/home"}return localStorage.getItem("ngStorage-token")&&localStorage.getItem("ngStorage-userAuth")?e():"/sign-in"}r.views.swipeBackEnabled(!1),r.views.maxCache(10),r.backButton.text(""),o.disableTracking("Tap"),o.disableTracking("Load"),t.otherwise(s()),e.state("tests",{url:"/tests",templateUrl:"app/users/tests.html",controller:"TestsController as test"}).state("signin",{url:"/sign-in",templateUrl:"app/users/login.html",controller:"LoginController as login"}).state("joinnow",{url:"/joinnow",templateUrl:"app/users/register.html",controller:"RegisterController as register"}).state("profile",{url:"/profile",templateUrl:"app/users/form-profile.html",controller:"FormProfileController as profile"}).state("interests",{url:"/interests",templateUrl:"app/users/form-interests.html",controller:"FormInterestsController as interests"}).state("forgot-password",{url:"/forgot-password",templateUrl:"app/users/forgot-password.html",controller:"ForgotController as forgot"}).state("organizer",{url:"/organizer","abstract":!0,templateUrl:"app/dashboard-organizer/menu.html",controller:"MenuOrganizerCtrl as menu"}).state("organizer.intro",{url:"/intro",views:{menuContent:{templateUrl:"app/dashboard-organizer/intro.html",controller:"IntroOrganizerCtrl as intro"}}}).state("organizer.home",{url:"/home",views:{menuContent:{templateUrl:"app/dashboard-organizer/home.html",controller:"HomeOrganizerController as home"}}}).state("organizer.profile",{url:"/profile",views:{menuContent:{templateUrl:"app/users/profile.html",controller:"ProfileController as profile"}}}).state("organizer.events",{url:"/events","abstract":!0,views:{menuContent:{templateUrl:"app/events-organizer/event-list-tabs.html",controller:"EventsTabsController as tabs"}}}).state("organizer.events.list",{url:"/list",views:{tabEventList:{templateUrl:"app/events-organizer/event-list.html",controller:"EventListController as eventList"}}}).state("organizer.events.detail-list",{url:"/event/:idEvent",views:{tabEventList:{templateUrl:"app/events-organizer/event-detail.html",controller:"EventDetailOrganizerController as eventDetail"}}}).state("organizer.events.past",{url:"/past",views:{tabPastEvents:{templateUrl:"app/events-organizer/past-events.html",controller:"PastEventsController as eventList"}}}).state("organizer.events.detail-past",{url:"/past-event/:idEvent",views:{tabPastEvents:{templateUrl:"app/events-organizer/event-detail.html",controller:"EventDetailOrganizerController as eventDetail"}}}).state("organizer.addevent",{url:"/addevent",views:{menuContent:{templateUrl:"app/events-organizer/add-event.html",controller:"AddEventController as addEvent"}},cache:!1}).state("organizer.editevent",{url:"/editevent/:id",views:{menuContent:{templateUrl:"app/events-organizer/edit-event.html",controller:"EditEventController as editEvent"}},cache:!1}).state("organizer.event",{url:"/event/:idEvent",views:{menuContent:{templateUrl:"app/events-organizer/event-detail.html",controller:"EventDetailOrganizerController as eventDetail"}}}).state("organizer.sponsorships",{url:"/sponsorships",views:{menuContent:{templateUrl:"app/sponsors-organizer/sponsorships-tabs.html",controller:"SponsorshipsTabsController as tabs"}}}).state("organizer.sponsorships.list",{url:"/list",views:{tabEventList:{templateUrl:"app/sponsors-organizer/sponsorships-list.html",controller:"SponsorshipsListController as list"}}}).state("organizer.sponsorships.past",{url:"/past",views:{tabPastEvents:{templateUrl:"app/sponsors-organizer/sponsorships-past-events.html",controller:"SponsorshipsPastEventsController as list"}}}).state("organizer.sponsorship",{url:"/sponsorship/:id",views:{menuContent:{templateUrl:"app/sponsors-organizer/sponsorship-detail.html",controller:"SponsorshipOrganizerDetailController as detail"}}}).state("organizer.tasks",{url:"/tasks","abstract":!0,views:{menuContent:{templateUrl:"app/tasks-organizer/task-list-tabs.html",controller:"TaskTabsController as tabs"}}}).state("organizer.tasks.list",{url:"/list",views:{tabTasksList:{templateUrl:"app/tasks-organizer/task-list.html",controller:"TaskListController as taskList"}}}).state("organizer.tasks.list-past",{url:"/past",views:{tabPastTasks:{templateUrl:"app/tasks-organizer/past-tasks.html",controller:"PastTaskController as taskList"}}}).state("organizer.invite",{url:"/invite",views:{menuContent:{templateUrl:"app/users/invite-users.html",controller:"InviteUsersController as invite"}}}).state("organizer.settings",{url:"/settings",views:{menuContent:{templateUrl:"app/users/settings.html",controller:"SettingsController as settings"}}}).state("organizer.notifications",{url:"/notifications",views:{menuContent:{templateUrl:"app/users/notifications.html",controller:"NotificationsController as list"}}}).state("sponzor",{url:"/sponzor","abstract":!0,templateUrl:"app/dashboard-sponzor/menu.html",controller:"MenuSponzorCtrl as menu"}).state("sponzor.intro",{url:"/intro",views:{menuContent:{templateUrl:"app/dashboard-sponzor/intro.html",controller:"IntroSponzorCtrl as intro"}}}).state("sponzor.home",{url:"/home",views:{menuContent:{templateUrl:"app/dashboard-sponzor/home.html",controller:"HomeSponzorController as home"}}}).state("sponzor.following",{url:"/following",views:{menuContent:{templateUrl:"app/events-sponsor/follow-events.html",controller:"FollowEventsController as list"}}}).state("sponzor.sponzoring",{url:"/sponzoring",views:{menuContent:{templateUrl:"app/events-sponsor/sponsoring-events.html",controller:"SponzoringEventsController as sponzoring"}}}).state("sponzor.profile",{url:"/profile",views:{menuContent:{templateUrl:"app/users/profile.html",controller:"ProfileController as profile"}}}).state("sponzor.event",{url:"/event/:idEvent",views:{menuContent:{templateUrl:"app/events-sponsor/event-detail.html",controller:"EventDetailSponzorController as eventDetail"}}}).state("sponzor.sponsorship",{url:"/sponsorship/:id",views:{menuContent:{templateUrl:"app/events-sponsor/sponsorship-detail.html",controller:"SponsorshipSponsorDetailController as detail"}}}).state("sponzor.invite",{url:"/invite",views:{menuContent:{templateUrl:"app/users/invite-users.html",controller:"InviteUsersController as invite"}}}).state("sponzor.settings",{url:"/settings",views:{menuContent:{templateUrl:"app/users/settings.html",controller:"SettingsController as settings"}}}).state("sponzor.notifications",{url:"/notifications",views:{menuContent:{templateUrl:"app/users/notifications.html",controller:"NotificationsController as list"}}}),n.useStaticFilesLoader({prefix:"langs/lang-",suffix:".json"}),n.useSanitizeValueStrategy("escaped"),n.preferredLanguage("en"),n.fallbackLanguage("en")}angular.module("app").config(e)}(),function(){"use strict";angular.module("app").constant("moment",moment)}(),function(){"use strict";angular.module("app").value("BackendVariables",{url:"https://api.sponzor.me/",f_url:"https://sponzorme.firebaseio.com/staging/",url_web:"https://sponzor.me/",version:"v1.1.1",channel:"dev"}).value("AMAZON",{AMAZONSECRET:"RlzqEBFUlJW/8YGkeasfmTZRLTlWMWwaBpJNBxu6",AMAZONKEY:"AKIAJDGUKWK3H7SJZKSQ",AMAZONBUCKET:"sponzormewebappimages",AMAZONBUCKETREGION:"us-west-2",AMAZONBUCKETURL:"https://s3-us-west-2.amazonaws.com/sponzormewebappimages/"})}(),function(){"use strict";angular.module("app.dashboard-organizer",[])}(),function(){"use strict";angular.module("app.dashboard-sponzor",[])}(),function(){"use strict";angular.module("app.events-sponzor",[])}(),function(){"use strict";angular.module("app.events-organizer",[])}(),function(){"use strict";angular.module("app.filters",[])}(),function(){"use strict";angular.module("app.sponsors-organizer",[])}(),function(){"use strict";angular.module("app.tasks-organizer",[])}(),function(){"use strict";angular.module("app.users",[])}(),function(){"use strict";angular.module("app.widgets",[])}(),function(){"use strict";function e(e,t,n,r,o){function s(){function t(e){return r.when(e.data.categories)}function n(e){return r.reject(e.data)}return e({method:"GET",url:i+"categories"}).then(t)["catch"](n)}function a(t){function n(e){return r.when(e.data.data.category)}function o(e){return r.reject(e.data)}var s=typeof t;if("string"!==s&&"number"!==s)throw new Error;return e({method:"GET",url:i+"categories/"+t}).then(n)["catch"](o)}var i=n.url,u={allCategories:s,getCategory:a};return u}angular.module("app").factory("categoryService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,r,o){function s(){return t.token}function a(){function t(e){var t=n(e.data.data.events);return r.when(t)}function n(e){function t(e){return e.image="event_dummy.png"==e.image?"img/banner.jpg":e.image,e.starts=moment(e.starts)._d,e.ends=moment(e.ends)._d,e}return e.map(t)}function o(e){return r.reject(e.data)}return e({method:"GET",url:d+"events"}).then(t)["catch"](o)}function i(t){function n(e){function t(e){return e.image="event_dummy.png"==e.image?"img/banner.jpg":e.image,e.user_organizer.image="organizer_sponzorme.png"==e.user_organizer.image||""==e.user_organizer.image?"img/photo.png":e.user_organizer.image,e.starts=moment(e.starts)._d,e.ends=moment(e.ends)._d,e}return r.when(t(e.data.event))}function o(e){return r.reject(e.data)}var s=typeof t;if("string"!==s&&"number"!==s)throw new Error;return e({method:"GET",url:d+"events/"+t}).then(n)["catch"](o)}function u(t){function n(e){return r.when(e.data.event)}function o(e){return r.reject(e.data)}var a=typeof t;if("object"!==a||Array.isArray(t))throw new Error;return e({method:"POST",url:d+"events",headers:{"Content-Type":"application/json",Authorization:"Basic "+s()},data:t}).then(n)["catch"](o)}function c(t){function n(e){return r.when(e.data)}function o(e){return r.reject(e.data)}var a=typeof t;if("string"!==a&&"number"!==a)throw new Error;return e({method:"DELETE",url:d+"events/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+s()}}).then(n)["catch"](o)}function l(t,n){function o(e){return r.when(e.data.event)}function a(e){return r.reject(e.data)}var i=typeof t;if("string"!==i&&"number"!==i)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PATCH",url:d+"events/"+t,headers:{"Content-Type":"application/json",Authorization:"Basic "+s()},data:n}).then(o)["catch"](a)}function p(t,n){function o(e){return r.when(e.data.event)}function a(e){return r.reject(e.data)}var i=typeof t;if("string"!==i&&"number"!==i)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PUT",url:d+"events/"+t,headers:{"Content-Type":"application/json",Authorization:"Basic "+s()},data:n}).then(o)["catch"](a)}var d=n.url,h={allEvents:a,getEvent:i,createEvent:u,deleteEvent:c,editEventPatch:l,editEventPut:p};return h}angular.module("app").factory("eventService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,r,o){function s(){function t(e){return r.when(e.data.eventTypes)}function n(e){return r.reject(e.data)}return e({method:"GET",url:i+"event_types"}).then(t)["catch"](n)}function a(t){function n(e){return r.when(e.data.data.eventTypes)}function o(e){return r.reject(e.data)}var s=typeof t;if("string"!==s&&"number"!==s)throw new Error;return e({method:"GET",url:i+"event_types/"+t}).then(n)["catch"](o)}var i=n.url,u={allEventTypes:s,getEventType:a};return u}angular.module("app").factory("eventTypeService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t){function n(n){function s(e){return t.when(e.data.data.link)}function a(e){return t.reject(e.data)}var i=typeof n;if("string"!==i)throw new Error;return e({method:"POST",url:r+"image",headers:{Authorization:"Client-ID "+o},data:{image:n,type:"base64"}}).then(s)["catch"](a)}var r="https://api.imgur.com/3/",o="bdff09d775f47b9",s={uploadImage:n};return s}angular.module("app").factory("imgurService",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t,n,r,o,s,a,i,u){function c(e){var t=E+"notifications/"+e;return n(new Firebase(t))}function l(e,t){e.date=(new Date).getTime(),e.to=t,e.fromApp="mobileApp",e.toApp="mobileApp",e.read=!1;var r=E+"notifications/"+t,o=n(new Firebase(r));o.$add(e)}function p(e,t){e.typeNotification="newSponsorship",e.type="sponsorship",l(e,t)}function d(e,t){e.typeNotification="acceptSponsorship",e.type="sponsorship",l(e,t)}function h(e,t){e.typeNotification="rejectSponsorship",e.type="sponsorship",l(e,t)}function f(e,t){e.typeNotification="newTaskOrganizer",e.type="task",l(e,t)}function m(e,t){e.typeNotification="updateTaskOrganizer",e.type="task",l(e,t)}function v(e,t){e.typeNotification="doneTaskOrganizer",e.type="task",l(e,t)}function g(e,t){e.typeNotification="newTaskSponsor",e.type="task",l(e,t)}function k(e,t){e.typeNotification="updateTaskSponsor",e.type="task",l(e,t)}function w(e,t){e.typeNotification="doneTaskSponsor",e.type="task",l(e,t)}function z(){var e={};e.date=(new Date).getTime(),e.fromApp="mobileApp",e.toApp="mobileApp";var t=E+"notifications/events",r=n(new Firebase(t));r.$add(e)}function S(){var e={};e.date=(new Date).getTime(),e.fromApp="mobileApp",e.toApp="mobileApp";var t=E+"notifications/events",r=n(new Firebase(t));r.$add(e)}function A(){T();var e=u.getUserAuth();"1"==e.type&&_()}function T(){function e(e){var n=e.val();t.lastUpdate<n.date&&u.refresh()}var t=u.getUserAuth(),n=E+"notifications/"+t.id,r=new Firebase(n);r.on("child_added",e)}function _(){function e(e){function t(e){u.updateUserAuth(e);a.$broadcast("HomeSponzorController:getEvents"),a.$broadcast("MenuSponzor:counts")}var n=e.val();o.lastUpdate<n.date&&s.home(o.userAuth.id).then(t)}var t=E+"notifications/events",n=new Firebase(t);n.on("child_added",e)}var E=r.f_url,y={activate:A,sendNewSponsorship:p,sendAcceptSponsorship:d,sendRejectSponsorship:h,sendNewTaskOrganizer:f,sendUpdateTaskOrganizer:m,sendDoneTaskOrganizer:v,sendNewTaskSponsor:g,sendUpdateTaskSponsor:k,sendDoneTaskSponsor:w,sendNewEvent:z,sendUpdateEvent:S,getNotifications:c};return y}angular.module("app").factory("notificationService",e),e.$inject=["$http","$q","$firebaseArray","BackendVariables","$localStorage","userService","$rootScope","$ionicHistory","userAuthService"]}(),function(){"use strict";function e(e,t,n,r,o){function s(){function t(e){return r.when(e.data.Perk)}function n(e){return r.reject(e.data)}return e({method:"GET",url:d+"perks"}).then(t)["catch"](n)}function a(t){function n(e){return r.when(o(e.data.data))}function o(e){var t=e.Perk;return t.event=e.Event||{},t.sponzorTasks=e.SponzorTasks||[],t.tasks=e.Tasks||[],t}function s(e){return r.reject(e.data)}var a=typeof t;if("string"!==a&&"number"!==a)throw new Error;return e({method:"GET",url:d+"perks/"+t}).then(n)["catch"](s)}function i(t){function n(e){return r.when(e.data.Perk)}function s(e){return r.reject(e.data)}var a=typeof t;if("object"!==a||Array.isArray(t))throw new Error;return e({method:"POST",url:d+"perks",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()},data:o(t)}).then(n)["catch"](s)}function u(t){function n(e){return r.when(e.data)}function o(e){return r.reject(e.data)}var s=typeof t;if("string"!==s&&"number"!==s)throw new Error;return e({method:"DELETE",url:d+"perks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()}}).then(n)["catch"](o)}function c(t,n){function s(e){return r.when(e.data.Perk)}function a(e){return r.reject(e.data)}var i=typeof t;if("string"!==i&&"number"!==i)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PATCH",url:d+"perks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()},data:o(n)}).then(s)["catch"](a)}function l(t,n){function s(e){return r.when(e.data.Perk)}function a(e){return r.reject(e.data)}var i=typeof t;if("string"!==i&&"number"!==i)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PUT",url:d+"perks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()},data:o(n)}).then(s)["catch"](a)}function p(){return t.token}var d=n.url,h={allPerks:s,getPerk:a,createPerk:i,deletePerk:u,editPerkPatch:c,editPerkPut:l};return h}angular.module("app").factory("perkService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,r,o){function s(){function t(e){return o.when(e.data.PerkTasks)}function n(e){return o.reject(e.data)}return e.get(h+"perk_tasks").then(t)["catch"](n)}function a(t){function n(e){return o.when(r(e.data.data))}function r(e){var t=e.PerkTask;return t.event=e.Event||{},t.perk=e.Perk||{},t.user=e.User||{},t}function s(e){return o.reject(e.data)}var a=typeof t;if("string"!==a&&"number"!==a)throw new Error;return e({method:"GET",url:h+"perk_tasks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(n)["catch"](s)}function i(t){function n(e){return o.when(e.data.PerkTasks)}function r(e){return o.reject(e.data)}var s=typeof t;if("string"!==s&&"number"!==s)throw new Error;return e({method:"GET",url:h+"perk_tasks_organizer/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(n)["catch"](r)}function u(t){function n(e){return o.when(e.data)}function s(e){return o.reject(e.data)}var a=typeof t;if("object"!==a||Array.isArray(t))throw new Error;return e({method:"POST",url:h+"perk_tasks",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+d()},data:r(t)}).then(n)["catch"](s)}function c(t){function n(e){return o.when(e.data)}function r(e){return o.reject(e.data)}var s=typeof t;if("string"!==s&&"number"!==s)throw new Error;return e({method:"DELETE",url:h+"perk_tasks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+d()}}).then(n)["catch"](r)}function l(t,n){function s(e){return o.when(e.data.PerkTask)}function a(e){return o.reject(e.data)}var i=typeof t;if("string"!==i&&"number"!==i)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PATCH",url:h+"perk_tasks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+d()},data:r(n)}).then(s)["catch"](a)}function p(t,n){function s(e){return o.when(e.data.PerkTask)}function a(e){return o.reject(e.data)}var i=typeof t;if("string"!==i&&"number"!==i)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PUT",url:h+"perk_tasks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+d()},data:r(n)}).then(s)["catch"](a)}function d(){return t.token}var h=n.url,f={allPerkTasks:s,getPerkTask:a,createPerkTask:u,deletePerkTask:c,editPerkTaskPatch:l,editPerkTaskPut:p,getPerkTaskByOrganizer:i};return f}angular.module("app").factory("perkTaskService",e),e.$inject=["$http","$localStorage","BackendVariables","$httpParamSerializerJQLike","$q"]}(),function(){"use strict";function e(e,t,n,r,o){function s(){function t(e){return r.when(e.data.SponzorsEvents)}function n(e){return r.reject(e.data)}return e.get(f+"sponzorships").then(t)["catch"](n)}function a(t){function n(e){return r.when(o(e.data.data))}function o(e){var t=e.SponzorEvent;return t.sponzor=e.Sponzor||{},t.perk=e.Perk||{},t.organizer=e.Organizer||{},t.event=e.Event||{},t.tasks=e.Tasks||[],t}function s(e){return r.reject(e.data)}var a=typeof t;if("string"!==a&&"number"!==a)throw new Error;return e.get(f+"sponzorships/"+t).then(n)["catch"](s)}function i(t){function n(e){return r.when(o(e.data.SponzorsEvents))}function o(e){function t(e){return e.starts=moment(e.starts)._d,e.ends=moment(e.ends)._d,e}return e.map(t)}function s(e){return r.reject(e.data)}var a=typeof t;if("string"!==a&&"number"!==a)throw new Error;return e({method:"GET",url:f+"sponzorships_organizer/"+t}).then(n)["catch"](s)}function u(t){function n(e){return r.when(o(e.data.SponzorsEvents))}function o(e){function t(e){return e.starts=moment(e.starts)._d,e.ends=moment(e.ends)._d,e}return e.map(t)}function s(e){return r.reject(e.data)}var a=typeof t;if("string"!==a&&"number"!==a)throw new Error;return e({method:"GET",url:f+"sponzorships_sponzor/"+t}).then(n)["catch"](s)}function c(t){function n(e){return r.when(e.data.Sponzorship)}function s(e){return r.reject(e.data)}var a=typeof t;if("object"!==a||Array.isArray(t))throw new Error;return e({method:"POST",url:f+"sponzorships",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()},data:o(t)}).then(n)["catch"](s)}function l(t){function n(e){return r.when(e.data)}function o(e){return r.reject(e.data)}var s=typeof t;if("string"!==s&&"number"!==s)throw new Error;return e({method:"DELETE",url:f+"sponzorships/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()}}).then(n)["catch"](o)}function p(t,n){function s(e){return r.when(e.data.Sponzorship)}function a(e){return r.reject(e.data)}var i=typeof t;if("number"!==i&&"string"!==i)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PATCH",url:f+"sponzorships/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()},data:o(n)}).then(s)["catch"](a)}function d(t,n){function s(e){return r.when(e.data.Sponzorship)}function a(e){return r.reject(e.data)}var i=typeof t;if("number"!==i&&"string"!==i)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PUT",url:f+"sponzorships/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()},data:o(n)}).then(s)["catch"](a)}function h(){return t.token}var f=n.url,m={allSponsorships:s,getSponzorship:a,sponzorshipByOrganizer:i,sponzorshipBySponzor:u,createSponzorship:c,deleteSponzorship:l,editSponzorshipPatch:p,editSponzorshipPut:d};return m}angular.module("app").factory("sponsorshipService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,r,o){function s(){return t.token}function a(){function t(e){return r.when(e.data.TasksSponzor)}function n(e){return r.reject(e.data)}return e({method:"GET",url:d+"task_sponzor",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t)["catch"](n)}function i(t){function n(e){return r.when(o(e.data.data))}function o(e){var t=e.Task;return t.organizer=e.Organizer||null,t.event=e.Event||null,t.sponzor=e.Sponzor||null,t}function a(e){return r.reject(e.data)}var i=typeof t;if("string"!==i&&"number"!==i)throw new Error;return e({method:"GET",url:d+"task_sponzor/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+s()}}).then(n)["catch"](a)}function u(t){function n(e){return r.when(o(e.data))}function o(e){return e.TaskSponzor.task=e.PerkTask,e.TaskSponzor}function a(e){return r.reject(e.data)}var i=typeof t;if("object"!==i||Array.isArray(t))throw new Error;return e({method:"POST",url:d+"task_sponzor",headers:{"Content-Type":"application/json",Authorization:"Basic "+s()},data:t}).then(n)["catch"](a)}function c(t,n){function a(e){return r.when(e.data.TaskSponzor)}function i(e){return r.reject(e.data)}var u=typeof t;if("string"!==u&&"number"!==u)throw new Error;var c=typeof n;if("object"!==c||Array.isArray(n))throw new Error;return e({method:"PUT",url:d+"task_sponzor/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+s()},data:o(n)}).then(a)["catch"](i)}function l(t,n){function a(e){return r.when(e.data.TaskSponzor)}function i(e){return r.reject(e.data)}var u=typeof t;if("string"!==u&&"number"!==u)throw new Error;var c=typeof n;if("object"!==c||Array.isArray(n))throw new Error;return e({method:"PATCH",url:d+"task_sponzor/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+s()},data:o(n)}).then(a)["catch"](i)}function p(t){function n(e){return r.when(e.data)}function o(e){return r.reject(e.data)}var a=typeof t;if("string"!==a&&"number"!==a)throw new Error;return e({method:"DELETE",url:d+"task_sponzor/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+s()}}).then(n)["catch"](o)}var d=n.url,h=(t.token,{getAllTasks:a,getTask:i,createTask:u,editPutTask:c,editPatchTask:l,deleteTask:p});return h}angular.module("app").factory("tasksSponsorService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,r,o){function s(t,n){function s(e){return r.when(a(e.data))}function a(e){var t=e.user;return 1==t.type?(t.events=e.events.map(i),t.sponzorships=t.sponzorships.map(u)):(t.events=t.events.map(i),t.sponzorships_like_organizer=t.sponzorships_like_organizer.map(u)),t}function i(e){return e.image="event_dummy.png"==e.image?"img/banner.jpg":e.image,e.starts=moment(e.starts)._d,e.ends=moment(e.ends)._d,e}function u(e){return e.sponzor&&(e.sponzor.image=""==e.sponzor.image?"img/photo.png":e.sponzor.image),e.event.starts=moment(e.event.starts)._d,e.event.ends=moment(e.event.ends)._d,e}function c(e){return r.reject(e.data)}var l=typeof t;if("string"!==l)throw new Error;var p=typeof n;if("string"!==p&&"number"!==p)throw new Error;return e({method:"POST",url:v+"auth",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:o({email:t,password:n})}).then(s)["catch"](c)}function a(t){function n(e){var t=e.data.data.user;return t.events=o(t.events),r.when(t)}function o(e){function t(e){return e.image="event_dummy.png"==e.image?"img/banner.jpg":e.image,e.starts=moment(e.starts)._d,e.ends=moment(e.ends)._d,e}return e.map(t)}function s(e){return r.reject(e.data)}var a=typeof t;if("string"!==a&&"number"!==a)throw new Error;return e({method:"GET",url:v+"users/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+m()}}).then(n)["catch"](s)}function i(t){function n(e){return r.when(o(e.data.data))}function o(e){var t=e.user;return 1==t.type?(t.events=e.events.map(s),t.sponzorships=t.sponzorships.map(a)):(t.events=t.events.map(s),t.sponzorships_like_organizer=t.sponzorships_like_organizer.map(a)),t}function s(e){return e.image="event_dummy.png"==e.image?"img/banner.jpg":e.image,e.starts=moment(e.starts)._d,e.ends=moment(e.ends)._d,e}function a(e){return e.sponzor&&(e.sponzor.image=""==e.sponzor.image?"img/photo.png":e.sponzor.image),e.event.starts=moment(e.event.starts)._d,e.event.ends=moment(e.event.ends)._d,e}function i(e){return r.reject(e.data)}var u=typeof t;if("string"!==u&&"number"!==u)throw new Error;return e({method:"GET",url:v+"home/"+t,headers:{"Content-Type":"application/json",Authorization:"Basic "+m()}}).then(n)["catch"](i)}function u(t){function n(e){return r.when(e.data.User)}function s(e){return r.reject(e.data)}var a=typeof t;if("object"!==a||Array.isArray(t))throw new Error;return e({method:"POST",url:v+"users",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+m()},data:o(t)}).then(n)["catch"](s)}function c(t){function n(e){return r.when(e.data)}function o(e){return r.reject(e.data)}var s=typeof t;if("number"!==s&&"string"!==s)throw new Error;return e({method:"DELETE",url:v+"users/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+m()}}).then(n)["catch"](o)}function l(t,n){function s(e){return r.when(e.data.User)}function a(e){return r.reject(e.data)}var i=typeof t;if("number"!==i&&"string"!==i)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PATCH",url:v+"users/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+m()},data:o(n)}).then(s)["catch"](a)}function p(t,n){function s(e){return r.when(e.data.User)}function a(e){return r.reject(e.data)}var i=typeof t;if("number"!==i&&"string"!==i)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PUT",url:v+"users/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+m()},data:o(n)}).then(s)["catch"](a)}function d(t){function n(e){return r.when(e.data)}function s(e){return r.reject(e.data)}var a=typeof t;if("string"!==a)throw new Error;return e({method:"POST",url:v+"send_reset_password",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+m()},data:o({email:t})}).then(n)["catch"](s)}function h(t){function n(e){return r.when(e.data)}function s(e){return r.reject(e.data)}var a=typeof t;if("object"!==a||Array.isArray(t))throw new Error;return e({method:"POST",url:v+"invite_friend",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+m()},data:o(t)}).then(n)["catch"](s)}function f(){return angular.isDefined(t.token)&&angular.isDefined(t.userAuth)?!0:!1}function m(){return t.token}var v=n.url,g={login:s,home:i,getUser:a,createUser:u,deleteUser:c,editUserPatch:l,editUserPut:p,forgotPassword:d,invitedUser:h,checkSession:f};return g}angular.module("app").factory("userService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,r,o){function s(){return n.userAuth}function a(e){return n.userAuth=angular.extend(n.userAuth||{},e),n.lastUpdate=(new Date).getTime(),n.userAuth}function i(){return angular.isDefined(n.token)&&angular.isDefined(n.userAuth)?!0:!1}function u(){function e(e){var t=a(e);0==t.type?(o.$broadcast("MenuOrganizer:count_events"),o.$broadcast("EventsTabsController:count_events"),o.$broadcast("HomeOrganizerController:count_events"),o.$broadcast("MenuOrganizer:count_tasks"),o.$broadcast("TaskTabsController:count_tasks"),o.$broadcast("MenuOrganizer:count_sponsors"),o.$broadcast("SponsorshipsTabsController:count_sponsors"),o.$broadcast("HomeOrganizerController:count_sponsors"),o.$broadcast("SponsorshipsListController:getSponzorships"),o.$broadcast("SponsorshipsPastEventsController:getSponzorships"),o.$broadcast("EventListController:getEvents"),o.$broadcast("PastEventsController:getEvents")):(o.$broadcast("MenuSponzor:counts"),o.$broadcast("FollowEventsController:getSponzorships"),o.$broadcast("SponzoringEventsController:getSponzorships"),o.$broadcast("HomeSponzorController:getEvents"))}r.home(s().id).then(e)}this.getUserAuth=s,this.updateUserAuth=a,this.checkSession=i,this.refresh=u}angular.module("app").service("userAuthService",e),e.$inject=["$http","$q","$localStorage","userService","$rootScope"]}(),function(){"use strict";function e(e,t,n,r,o){function s(){return t.token}function a(t){function n(e){return r.when(e.data.UserInterest)}function a(e){return r.reject(e.data)}return e({method:"POST",url:u+"user_interests",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+s()},data:o(t)}).then(n)["catch"](a)}function i(t,n){function o(e){return r.when(e.data)}function a(e){return r.reject(e.data)}var i=typeof t;if("number"!==i&&"string"!==i)throw new Error;var c=typeof n;if("object"!==c||Array.isArray(n))throw new Error;return e({method:"PUT",url:u+"user_interests/"+t,headers:{"Content-Type":"application/json",Authorization:"Basic "+s()},data:n}).then(o)["catch"](a)}var u=n.url,c={createUserInterest:a,
bulkUserInterest:i};return c}angular.module("app").factory("userInterestService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,r){function o(){return e.show({animation:"fade-in",showBackdrop:!1,maxWidth:200,showDelay:500})}function s(){e.hide()}function a(e){var n=e||{};return n.title=n.title||"<p>Ocurrió un error.</p>",n.template=n.template||'<p class="text-center">Intento de nuevo.</p>',t.alert(n)}function i(e){var n=e||{};return n.title=n.title||"¿ Estas seguro ?",n.template=n.template||"Estas seguro de eliminar.",t.confirm(n)}function u(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e.toString().replace(/^\s+|\s+$/g,""):""}function c(e){var t=typeof e;if("object"!==t||Array.isArray(e))throw new Error;e.$setPristine(),e.$setUntouched()}function l(e){return angular.extend(r.userAuth||{},e)}var p={showLoad:o,hideLoad:s,alert:a,confirm:i,trim:u,resetForm:c,updateUserAuth:l};return p}angular.module("app").factory("utilsService",e),e.$inject=["$ionicLoading","$ionicPopup","$translate","$localStorage","$ionicHistory"]}(),function(){"use strict";function e(){var e={restrict:"E",transclude:!0,scope:{edit:"=edit"},template:'<div class="spm-crop"><i ng-show="edit" class="icon ion-edit edit"></i><ng-transclude></ng-transclude></div>'};return e}angular.module("app.widgets").directive("spmCropImage",e),e.$inject=[]}(),function(){"use strict";function e(e){function t(t,n){e.hideTabs="tabs-item-hide",t.$on("$destroy",function(){e.hideTabs=""})}var n={restrict:"A",link:t};return n}angular.module("app.widgets").directive("spmHideTabs",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e,t){function n(e){var t=this;t.message=!1}var r={restrict:"E",controller:n,controllerAs:"vm",templateUrl:"app/widgets/network-message.html"};return r}angular.module("app.widgets").directive("spmNetworkMessage",e),e.$inject=["$cordovaNetwork","$rootScope"]}(),function(){"use strict";function e(){var e={restrict:"E",replace:!0,transclude:!0,require:"^spmAccordion",scope:{title:"@title",model:"@model"},controller:function(){},templateUrl:"app/widgets/spm-accordion-item.html",link:function(e,t,n,r,o){e.active=!1,r.addSection(e),e.activate=function(){r.select(e)}}};return e}angular.module("app.widgets").directive("spmAccordionItem",e),e.$inject=[]}(),function(){"use strict";function e(){var e={restrict:"E",replace:!0,transclude:!0,scope:{autoOpen:"@autoOpen",type:"@type"},templateUrl:"app/widgets/spm-accordion.html",controller:function(e){var t=this,n=t.sections=e.sections=[],r=t.autoOpen=e.autoOpen=e.autoOpen||!0;t.select=function(e){n.forEach(function(t){t.scope.active=t.scope===e?!t.scope.active:!1})},t.addSection=function(e){n.push({scope:e}),1===n.length&&r===!0&&(n[0].active=!0,n[0].scope.active=!0)}},link:function(e,t,n,r){e.autoOpen=r.autoOpen="true"===e.autoOpen?!0:!1}};return e}angular.module("app.widgets").directive("spmAccordion",e),e.$inject=[]}(),function(){"use strict";function e(e,t,n,r,o){function s(e){function t(){e.model.typeNotification&&(e.title=o.instant("NOTIFICATIONS."+e.model.typeNotification+"_title"),e.text=o.instant("NOTIFICATIONS."+e.model.typeNotification+"_text").replace("TEXT",e.model.text||""))}t()}function a(t){function n(){var e=i+"notifications/"+u.id+"/"+t.model.$id,n=new Firebase(e);n.update({read:!0}).then(function(){t.model.typeNotification&&p[t.model.typeNotification](t.model.modelId||null)})}function r(t){e.go("organizer.sponsorship",{id:t})}function o(t){e.go("sponzor.sponsorship",{id:t})}function s(){e.go("sponzor.following")}function a(t){e.go("sponzor.sponsorship",{id:t})}function c(t){e.go("organizer.sponsorship",{id:t})}function l(t){e.go("sponzor.event",{idEvent:t})}t.read=n;var p={newSponsorship:r,acceptSponsorship:o,rejectSponsorship:s,newTaskOrganizer:a,updateTaskOrganizer:a,doneTaskOrganizer:a,newTaskSponsor:c,updateTaskSponsor:c,doneTaskSponsor:c,newEvent:l,updateEvent:l}}var i=n.f_url,u=r.getUserAuth(),c={restrict:"E",replace:!0,scope:{model:"="},controller:s,link:a,templateUrl:"app/widgets/spm-notification.html"};return c}angular.module("app.widgets").directive("spmNotification",e),e.$inject=["$state","$firebaseArray","BackendVariables","userAuthService","$translate"]}(),function(){"use strict";function e(){return function(e){return console.log(e),console.log(new Date(e)),moment.duration(new Date(e),"years").humanize(!0)}}angular.module("app.filters").filter("humanize",e),e.$inject=[]}(),function(){"use strict";function e(e,t,n,r){function o(){t.$on("HomeOrganizerController:count_sponsors",s),t.$on("HomeOrganizerController:count_events",a),u.count_events=u.userAuth.events.filter(i).length,u.count_comunity=parseInt(u.userAuth.comunity_size)||0,u.count_sponsors=u.userAuth.sponzorships_like_organizer.length,u.notifications=r.getNotifications(u.userAuth.id)}function s(){u.userAuth=n.getUserAuth(),u.count_sponsors=u.userAuth.sponzorships_like_organizer.length}function a(){u.userAuth=n.getUserAuth(),u.count_events=u.userAuth.events.filter(i).length}function i(e){var t=moment(new Date).subtract(1,"days");return moment(e.ends).isAfter(t)}var u=this;u.count_events=0,u.count_sponsors=0,u.count_comunity=0,u.userAuth=n.getUserAuth(),u.notifications=[],o()}angular.module("app.dashboard-organizer").controller("HomeOrganizerController",e),e.$inject=["$localStorage","$rootScope","userAuthService","notificationService"]}(),function(){"use strict";function e(e,t,n,r){function o(){r.canDragContent(!1)}function s(){n.nextViewOptions({disableAnimate:!0,disableBack:!0}),e.go("organizer.home")}function a(){t.next()}function i(){t.previous()}function u(e){c.slideIndex=e}var c=this;c.slideIndex=0,c.startApp=s,c.nextSlide=a,c.previousSlide=i,c.slideChanged=u,o()}angular.module("app.dashboard-organizer").controller("IntroOrganizerCtrl",e),e.$inject=["$state","$ionicSlideBoxDelegate","$ionicHistory","$ionicSideMenuDelegate"]}(),function(){"use strict";function e(e,t,n,r,o,s){function a(){t.$reset(),r.clearCache().then(function(){e.go("signin")})}function i(){n.$on("MenuOrganizer:count_events",u),n.$on("MenuOrganizer:count_sponsors",c),n.$on("MenuOrganizer:count_tasks",l),h.count_events=h.userAuth.events.filter(p).length,h.count_sponsors=h.userAuth.sponzorships_like_organizer.length,h.count_tasks=d().length,h.notifications=s.getNotifications(h.userAuth.id)}function u(e){h.userAuth=o.getUserAuth(),h.count_events=h.userAuth.events.filter(p).length}function c(){h.userAuth=o.getUserAuth(),h.count_sponsors=h.userAuth.sponzorships_like_organizer.length}function l(e){h.userAuth=o.getUserAuth(),h.count_tasks=d().length}function p(e){return moment(e.ends).isAfter(new Date)}function d(){function e(e,t){return e.concat(t.perks||[])}function t(e,t){return e.concat(t.tasks||[])}function n(e){return e.user_id==h.userAuth.id&&"1"!=e.status}return h.userAuth.events.reduce(e,[]).reduce(t,[]).filter(n)}var h=this;h.userAuth=o.getUserAuth(),h.count_events=0,h.count_sponsors=0,h.count_tasks=0,h.notifications=[],h.logout=a,i()}angular.module("app.dashboard-organizer").controller("MenuOrganizerCtrl",e),e.$inject=["$state","$localStorage","$rootScope","$ionicHistory","userAuthService","notificationService"]}(),function(){"use strict";function e(e,t,n,r,o,s){function a(){l.events=l.userAuth.events.filter(c),o.$on("HomeSponzorController:getEvents",i)}function i(e){l.userAuth=s.getUserAuth(),l.events=l.userAuth.events.filter(c)}function u(){function e(e){l.userAuth=s.updateUserAuth(e),l.events=l.userAuth.events.filter(c),r.$broadcast("scroll.refreshComplete")}t.home(l.userAuth.id).then(e)}function c(e){return moment(e.starts).isAfter(new Date)}var l=this;l.userAuth=s.getUserAuth(),l.events=[],l.doRefresh=u,a()}angular.module("app.dashboard-sponzor").controller("HomeSponzorController",e),e.$inject=["$localStorage","userService","utilsService","$scope","$rootScope","userAuthService"]}(),function(){"use strict";function e(e,t,n,r){function o(){r.canDragContent(!1)}function s(){n.nextViewOptions({disableAnimate:!0,disableBack:!0}),e.go("sponzor.home")}function a(){t.next()}function i(){t.previous()}function u(e){c.slideIndex=e}var c=this;c.slideIndex=0,c.startApp=s,c.nextSlide=a,c.previousSlide=i,c.slideChanged=u,o()}angular.module("app.dashboard-sponzor").controller("IntroSponzorCtrl",e),e.$inject=["$state","$ionicSlideBoxDelegate","$ionicHistory","$ionicSideMenuDelegate"]}(),function(){"use strict";function e(e,t,n,r,o,s){function a(){n.$on("MenuSponzor:counts",i),l.count_sponsoring=l.userAuth.sponzorships.filter(c).length,l.count_following=l.userAuth.sponzorships.length-l.count_sponsoring,l.notifications=s.getNotifications(l.userAuth.id)}function i(){l.userAuth=o.getUserAuth(),l.count_sponsoring=l.userAuth.sponzorships.filter(c).length,l.count_following=l.userAuth.sponzorships.length-l.count_sponsoring}function u(){t.$reset(),e.go("signin"),r.clearCache()}function c(e){return"1"==e.status}var l=this;l.userAuth=o.getUserAuth(),l.count_following=0,l.count_sponsoring=0,l.logout=u,a()}angular.module("app.dashboard-sponzor").controller("MenuSponzorCtrl",e),e.$inject=["$state","$localStorage","$rootScope","$ionicHistory","userAuthService","notificationService"]}(),function(){"use strict";function e(e,t,n,r,o,s,a,i,u,c,l,p,d){function h(){z.event=_.findWhere(z.userAuth.events,{id:r.idEvent}),z.event.perks=z.event.perks.map(f),a.fromTemplateUrl("app/events-sponsor/sponsor-it-modal.html",{scope:e,animation:"slide-in-up"}).then(function(e){z.modalSponsorIt=e})}function f(e){return e.sponzorship=_.where(z.userAuth.sponzorships,{perk_id:e.id}),e.already=_.findWhere(e.sponzorship,{sponzor_id:z.userAuth.id}),e.tasks=_.where(e.tasks,{type:"0"}),e}function m(){z.modalSponsorIt.show()}function v(){z.modalSponsorIt.hide(),z.newSponsorIt={}}function g(e){z.newSponsorIt.perk=e,z.openModalSponsorIt()}function k(){function e(e){z.closeModalSponsorIt(),z.userAuth.sponzorships.push(e),z.event.perks=z.event.perks.map(f),d.updateUserAuth(z.userAuth),p.$broadcast("MenuSponzor:counts"),p.$broadcast("FollowEventsController:getSponzorships");var t={text:z.event.title,link:"#/organizers/sponzors",modelId:e.id};l.sendNewSponsorship(t,z.event.user_organizer.id),u.showShortBottom(c.instant("MESSAGES.succ_sponsor_it"))}function t(e){z.closeModalSponsorIt()}o.createSponzorship(w()).then(e)["catch"](t)}function w(){return{sponzor_id:z.userAuth.id,perk_id:z.newSponsorIt.perk.id,event_id:z.event.id,organizer_id:z.event.user_organizer.id,status:0,cause:z.newSponsorIt.cause}}var z=this;z.event={},z.userAuth=d.getUserAuth(),z.modalSponsorIt=null,z.newSponsorIt={},z.openModalSponsorIt=m,z.closeModalSponsorIt=v,z.createSponsorIt=g,z.submitSponsorIt=k,h()}angular.module("app.events-sponzor").controller("EventDetailSponzorController",e),e.$inject=["$scope","eventService","utilsService","$stateParams","sponsorshipService","$localStorage","$ionicModal","$ionicHistory","$cordovaToast","$translate","notificationService","$rootScope","userAuthService"]}(),function(){"use strict";function e(e,t,n,r,o,s){function a(){l.sponzorships=l.userAuth.sponzorships.filter(c),l.showEmptyState=0==l.sponzorships.length?!0:!1,o.$on("FollowEventsController:getSponzorships",i)}function i(){l.userAuth=e.userAuth,l.sponzorships=l.userAuth.sponzorships.filter(c),l.showEmptyState=0==l.sponzorships.length?!0:!1}function u(){function e(e){r.$broadcast("scroll.refreshComplete"),l.userAuth=s.updateUserAuth(e),l.sponzorships=l.userAuth.sponzorships.filter(c),l.showEmptyState=0==l.sponzorships.length?!0:!1,o.$broadcast("MenuSponzor:counts"),o.$broadcast("SponzoringEventsController:getSponzorships")}function t(e){r.$broadcast("scroll.refreshComplete")}n.home(l.userAuth.id).then(e)["catch"](t)}function c(e){return"1"!=e.status}var l=this;l.userAuth=s.getUserAuth(),l.sponzorships=[],l.showEmptyState=!1,l.doRefresh=u,a()}angular.module("app.events-sponzor").controller("FollowEventsController",e),e.$inject=["$localStorage","utilsService","userService","$scope","$rootScope","userAuthService"]}(),function(){"use strict";function e(e,t,n,r,o,s){function a(){l.sponzorships=l.userAuth.sponzorships.filter(c),l.showEmptyState=0==l.sponzorships.length?!0:!1,o.$on("SponzoringEventsController:getSponzorships",i)}function i(){l.userAuth=e.userAuth,l.sponzorships=l.userAuth.sponzorships.filter(c),l.showEmptyState=0==l.sponzorships.length?!0:!1}function u(){function e(e){r.$broadcast("scroll.refreshComplete"),l.userAuth=s.updateUserAuth(e),l.sponzorships=l.userAuth.sponzorships.filter(c),l.showEmptyState=0==l.sponzorships.length?!0:!1,o.$broadcast("MenuSponzor:counts"),o.$broadcast("FollowEventsController:getSponzorships")}function n(e){r.$broadcast("scroll.refreshComplete")}t.home(l.userAuth.id).then(e)["catch"](n)}function c(e){return"1"==e.status}var l=this;l.userAuth=s.getUserAuth(),l.events=[],l.showEmptyState=!1,l.doRefresh=u,a()}angular.module("app.events-sponzor").controller("SponzoringEventsController",e),e.$inject=["$localStorage","userService","utilsService","$scope","$rootScope","userAuthService"]}(),function(){"use strict";function e(e,t,n,r,o,s,a,i,u,c,l){function p(){T.sponsorTask={task:{}},T.sponzorship=_.findWhere(T.userAuth.sponzorships,{id:n.id}),T.sponzorship.task_sponzor=T.sponzorship.task_sponzor.filter(d),o.fromTemplateUrl("app/events-sponsor/task-modal.html",{scope:e,animation:"slide-in-up"}).then(function(e){T.modalTask=e})}function d(e){return e.task.user_id==T.userAuth.id}function h(e){T.indexSlide=e}function f(){T.modalTask.show()}function m(){T.isNewTask=!0,T.showModalTask()}function v(e){T.modalTask.hide(),e&&t.resetForm(e),T.sponsorTask={task:{}}}function g(e){T.isNewTask=!1,T.sponsorTask=angular.copy(e),T.sponsorTask.status=1==T.sponsorTask.status?!0:!1,T.showModalTask()}function k(e){function n(n){T.sponzorship.perk.tasks.push(n.task),T.sponzorship.task_sponzor.push(n),T.hideModalTask(e),l.sendNewTaskSponsor({text:n.task.title,modelId:T.sponzorship.id},n.organizer_id),t.hideLoad()}function r(){t.hideLoad()}t.showLoad(),u.createTask(w()).then(n)["catch"](r)}function w(e){return{type:1,status:T.sponsorTask.status?1:0,perk_id:T.sponzorship.perk.id,event_id:T.sponzorship.event.id,sponzorship_id:T.sponzorship.id,user_id:T.userAuth.id,organizer_id:T.sponzorship.organizer.id,sponzor_id:T.userAuth.id,title:T.sponsorTask.task.title,description:T.sponsorTask.task.description,task_id:T.sponsorTask.task.id}}function z(e){function n(n){var r=_.findWhere(T.sponzorship.perk.tasks,{id:T.sponsorTask.task.id}),o=_.findWhere(T.sponzorship.task_sponzor,{id:T.sponsorTask.id}),s=_.indexOf(T.sponzorship.perk.tasks,r),a=_.indexOf(T.sponzorship.task_sponzor,o);T.sponzorship.perk.tasks.splice(s,1),T.sponzorship.task_sponzor.splice(a,1),T.hideModalTask(e),t.hideLoad()}function r(){T.hideModalTask(e),t.hideLoad()}t.showLoad(),u.deleteTask(T.sponsorTask.id).then(n)["catch"](r)}function S(e){function n(n){var r=_.findWhere(T.sponzorship.perk.tasks,{id:T.sponsorTask.task.id}),o=_.findWhere(T.sponzorship.task_sponzor,{id:T.sponsorTask.id}),s=_.indexOf(T.sponzorship.perk.tasks,r),a=_.indexOf(T.sponzorship.task_sponzor,o);1==T.sponsorTask.status&&"1"==n.status?l.sendDoneTaskSponsor({text:T.sponsorTask.task.title,modelId:T.sponzorship.id},n.organizer_id):l.sendUpdateTaskSponsor({text:T.sponsorTask.task.title,modelId:T.sponzorship.id},n.organizer_id),T.sponzorship.perk.tasks[s]=T.sponsorTask.task,T.sponzorship.task_sponzor[a]=T.sponsorTask,T.hideModalTask(e),t.hideLoad()}function r(){T.hideModalTask(e),t.hideLoad()}t.showLoad();var o=w();o.id=T.sponsorTask.id,u.editPutTask(o.id,o).then(n)["catch"](r)}function A(e){T.isNewTask?k(e):S(e)}var T=this;T.sponzorship={},T.userAuth=c.getUserAuth(),T.modalTask=null,T.isNewTask=!0,T.showModalTask=f,T.sponsorTask={},T.hideModalTask=v,T.newTask=m,T.editTask=g,T.submitTask=A,T.deleteTask=z,T.indexSlide=0,T.slideChange=h,p()}angular.module("app.events-sponzor").controller("SponsorshipSponsorDetailController",e),e.$inject=["$scope","utilsService","$stateParams","$localStorage","$ionicModal","$ionicHistory","$cordovaToast","$translate","tasksSponsorService","userAuthService","notificationService"]}(),function(){"use strict";function e(e,t,n,r,o,s,a,i,u,c,l,p,d,h,f,m,v,g){function k(){j.newEvent.access=!0,j.newEvent.perks=[],j.newEvent.starttime="13:00:00",j.newEvent.start=moment((new Date).getTime()).add(1,"days").format("YYYY-MM-DD"),j.newEvent.endtime="15:00:00",j.newEvent.end=moment((new Date).getTime()).add(4,"days").format("YYYY-MM-DD"),u.fromTemplateUrl("app/events-organizer/perk-modal.html",{scope:e,animation:"slide-in-up"}).then(function(e){j.modalPerk=e}),g.hideTabs="",y()}function w(e){return o.show(e)}function z(){function e(e){j.newEvent.start=moment(e).format("YYYY-MM-DD")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"date",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function S(){function e(e){j.newEvent.end=moment(e).format("YYYY-MM-DD")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"date",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function A(){function e(e){j.newEvent.starttime=moment(e).format("HH:mm:ss")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"time",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function T(){function e(e){j.newEvent.endtime=moment(e).format("HH:mm:ss")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"time",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function _(){function e(e){j.imageURI=e,j.newEvent.image="data:image/jpeg;base64,"+e}var t={quality:100,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!1,encodingType:Camera.EncodingType.JPEG,targetWidth:500,targetHeight:500,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1};s.getPicture(t).then(e)}function E(e){function n(e){return j.newEvent.image=e,i.createEvent($())}function o(n){r.hideLoad(),r.resetForm(e),j.newEvent={},n.image="event_dummy.png"==n.image?"img/banner.jpg":n.image,n.starts=moment(n.starts)._d,n.ends=moment(n.ends)._d,j.userAuth.events.push(n),m.updateUserAuth(j.userAuth),l.nextViewOptions({disableAnimate:!1,disableBack:!0}),l.clearCache().then(function(){f.sendNewEvent(),g.$broadcast("MenuOrganizer:count_events"),g.$broadcast("EventsTabsController:count_events"),g.$broadcast("HomeOrganizerController:count_events"),h.go("organizer.events.list")}),c.showShortBottom(t.instant("MESSAGES.succ_event_mess"))}function s(e){r.hideLoad(),r.alert({title:t.instant("ERRORS.addeventsform_error_tit"),template:t.instant("ERRORS.addeventsform_error_mess")})}r.showLoad(),j.imageURI?p.uploadImage(j.imageURI).then(n).then(o)["catch"](s):i.createEvent($()).then(o)["catch"](s)}function y(){function e(e){j.eventTypes=e,j.eventTypes.length>0&&(j.newEvent.type=j.eventTypes[0])}a.allEventTypes().then(e)}function $(){function e(e,t){return e=moment(e,"YYYY-MM-DD").format("YYYY-MM-DD"),t=moment(e+" "+t).format("HH:mm:ss"),e+" "+t}return{title:j.newEvent.title,location:j.newEvent.location.formatted_address,location_reference:j.newEvent.location.place_id,description:j.newEvent.description,starts:e(j.newEvent.start,j.newEvent.starttime),ends:e(j.newEvent.end,j.newEvent.endtime),image:j.newEvent.image?j.newEvent.image:"http://i.imgur.com/t8YehGM.jpg",privacy:j.newEvent.access?0:1,lang:t.use(),organizer:j.userAuth.id,category:1,type:j.newEvent.type.id,perks:j.newEvent.perks}}function b(){j.modalPerk.show()}function C(e){j.modalPerk.hide(),e&&r.resetForm(e),j.newPerk={}}function P(){j.isNewPerk=!0,j.openModalPerk()}function U(e){j.isNewPerk=!1,j.newPerk=e,j.openModalPerk()}function x(){j.newEvent.perks.push({kind:j.newPerk.kind,usd:j.newPerk.usd,total_quantity:j.newPerk.total_quantity,reserved_quantity:0}),j.closeModalPerk()}function L(){var e=j.newEvent.perks.indexOf(j.newPerk);j.newEvent.perks.splice(e,1),j.closeModalPerk()}function D(){j.closeModalPerk()}function O(e){j.isNewPerk?(x(),r.resetForm(e)):(D(),r.resetForm(e))}var j=this;j.newEvent={},j.newPerk={},j.isNewPerk=!0,j.eventTypes=[],j.userAuth=m.getUserAuth(),j.modalPerk=null,j.imageURI=null,j.clickedStartDate=z,j.clickedEndDate=S,j.clickedStartTime=A,j.clickedEndTime=T,j.getPhoto=_,j.createEvent=E,j.openModalPerk=b,j.closeModalPerk=C,j.createPerk=P,j.editPerk=U,j.deletePerk=L,j.submitPerk=O,k()}angular.module("app.events-organizer").controller("AddEventController",e),e.$inject=["$scope","$translate","$localStorage","utilsService","$cordovaDatePicker","$cordovaCamera","eventTypeService","eventService","$ionicModal","$cordovaToast","$ionicHistory","imgurService","$q","$state","notificationService","userAuthService","userService","$rootScope"]}(),function(){"use strict";function e(e,t,n,r,o,s,a,i,u,c,l,p,d,h,f,m,v,g){function k(){c.fromTemplateUrl("app/events-organizer/perk-edit-modal.html",{scope:e,animation:"slide-in-up"}).then(function(e){j.modalPerk=e}),j.newEvent=_.findWhere(j.userAuth.events,{id:f.id}),j.indexEvent=_.indexOf(j.userAuth.events,j.newEvent),j.newEvent.start=moment(j.newEvent.starts).format("YYYY-MM-DD"),j.newEvent.starttime=moment(j.newEvent.starts).format("HH:mm:ss"),j.newEvent.end=moment(j.newEvent.ends).format("YYYY-MM-DD"),j.newEvent.endtime=moment(j.newEvent.ends).format("HH:mm:ss"),j.newEvent.access="1"==j.newEvent.privacy?!0:!1,g.hideTabs="",$()}function w(e){return s.show(e)}function z(){function e(e){j.newEvent.start=moment(e).format("YYYY-MM-DD")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"date",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function S(){function e(e){j.newEvent.end=moment(e).format("YYYY-MM-DD")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"date",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function A(){function e(e){j.newEvent.starttime=moment(e).format("HH:mm:ss")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"time",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function T(){function e(e){j.newEvent.endtime=moment(e).format("HH:mm:ss")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"time",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function E(){function e(e){j.imageURI=e,j.newEvent.image="data:image/jpeg;base64,"+e}var t={quality:100,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!1,encodingType:Camera.EncodingType.JPEG,targetWidth:500,targetHeight:500,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1};a.getPicture(t).then(e)}function y(e){function n(e){return j.newEvent.image=e,u.editEventPut(j.newEvent.id,b())}function r(n){function r(e){return e.image="event_dummy.png"==e.image?"img/banner.jpg":e.image,e.starts=moment(e.starts)._d,e.ends=moment(e.ends)._d,e}o.hideLoad(),o.resetForm(e),n=r(n),j.userAuth.events[j.indexEvent]=n,m.updateUserAuth(j.userAuth),j.newEvent={},p.nextViewOptions({disableAnimate:!1,disableBack:!0}),p.clearCache().then(function(){v.sendNewEvent(),g.$broadcast("MenuOrganizer:count_events"),g.$broadcast("EventsTabsController:count_events"),g.$broadcast("HomeOrganizerController:count_events"),p.goBack()}),l.showShortBottom(t.instant("MESSAGES.succ_event_mess"))}function s(e){o.hideLoad(),o.alert({title:t.instant("ERRORS.addeventsform_error_tit"),template:t.instant("ERRORS.addeventsform_error_mess")})}o.showLoad(),j.imageURI?d.uploadImage(j.imageURI).then(n).then(r)["catch"](s):u.editEventPut(j.newEvent.id,b()).then(r)["catch"](s)}function $(){function e(e){j.eventTypes=e;for(var t=j.newEvent.type.id?j.newEvent.type.id:j.newEvent.type,n=0;n<j.eventTypes.length;n++)if(j.eventTypes[n].id==t){j.newEvent.type=j.eventTypes[n];break}}i.allEventTypes().then(e)}function b(){function e(e,t){return e=moment(e,"YYYY-MM-DD").format("YYYY-MM-DD"),t=moment(e+" "+t).format("HH:mm:ss"),e+" "+t}return{title:j.newEvent.title,location:j.newEvent.location,location_reference:"referencia",description:j.newEvent.description,starts:e(j.newEvent.start,j.newEvent.starttime),ends:e(j.newEvent.end,j.newEvent.endtime),image:j.newEvent.image?j.newEvent.image:"http://i.imgur.com/t8YehGM.jpg",privacy:j.newEvent.access?0:1,lang:t.use(),organizer:j.userAuth.id,category:1,type:j.newEvent.type.id,perks:j.newEvent.perks}}function C(){j.modalPerk.show()}function P(e){j.modalPerk.hide(),e&&o.resetForm(e),j.newPerk={}}function U(){j.isNewPerk=!0,j.openModalPerk()}function x(e){j.isNewPerk=!1,j.newPerk=e,j.newPerk.total_quantity=parseInt(j.newPerk.total_quantity),j.newPerk.usd=parseInt(j.newPerk.usd),j.openModalPerk()}function L(){j.newEvent.perks.push({id:j.newPerk.id?j.newPerk.id:-1,kind:j.newPerk.kind,usd:j.newPerk.usd,total_quantity:j.newPerk.total_quantity,reserved_quantity:0}),j.closeModalPerk()}function D(){j.closeModalPerk()}function O(e){j.isNewPerk?(L(),o.resetForm(e)):(D(),o.resetForm(e))}var j=this;j.indexEvent=-1,j.newEvent={},j.newPerk={},j.isNewPerk=!0,j.eventTypes=[],j.userAuth=m.getUserAuth(),j.modalPerk=null,j.imageURI=null,j.clickedStartDate=z,j.clickedEndDate=S,j.clickedStartTime=A,j.clickedEndTime=T,j.getPhoto=E,j.updateEvent=y,j.openModalPerk=C,j.closeModalPerk=P,j.createPerk=U,j.editPerk=x,j.submitPerk=O,k()}angular.module("app.events-organizer").controller("EditEventController",e),e.$inject=["$scope","$translate","$localStorage","userService","utilsService","$cordovaDatePicker","$cordovaCamera","eventTypeService","eventService","$ionicModal","$cordovaToast","$ionicHistory","imgurService","$q","$stateParams","userAuthService","notificationService","$rootScope"]}(),function(){"use strict";function e(e,t,n,r,o,s,a,i,u,c,l,p,d,h,f,m,v,g,k,w,z){function S(){Y.event=_.findWhere(Y.userAuth.events,{id:r.idEvent}),Y.event.perks=Y.event.perks.map(A),p.canDragContent(!1),Y.optionsActionSheet=[U,P,x],i.fromTemplateUrl("app/events-organizer/task-modal.html",{scope:e,animation:"slide-in-up"}).then(function(e){Y.modalTask=e})}function A(e){return e.sponzorship=_.where(Y.userAuth.sponzorships_like_organizer,{perk_id:e.id}),e.tasks=_.where(e.tasks,{user_id:Y.userAuth.id}),e}function T(){function e(e){n.hideLoad(),C(),d.clearCache(),d.goBack()}function o(e){n.hideLoad(),C(),n.alert({title:"Error",template:e.message})}n.showLoad(),t.deleteEvent(r.idEvent).then(e)["catch"](o)}function E(t){Y.sponsorshipSelected=t,G=a.show({title:f.instant("EVENTDETAIL.options_title"),templateUrl:"app/events-organizer/options-sponsorship.html",scope:e})}function y(){G.close()}function $(e){function t(e){n.hideLoad(),Y.sponsorshipSelected.status=e.status;var t={text:Y.event.title,link:"#/sponzors/sponzoring",modelId:e.id};1==e.status?w.sendAcceptSponsorship(t,e.sponzor_id):2==e.status&&w.sendRejectSponsorship(t,e.sponzor_id),y()}function r(e){n.hideLoad(),y()}n.showLoad();var o=angular.copy(Y.sponsorshipSelected);o.status=e,s.editSponzorshipPut(o.id,o).then(t)["catch"](r)}function b(){q=u.show({buttons:[{text:'<i class="icon ion-edit"></i> '+f.instant("EVENTDETAIL.edit_event")},{text:'<i class="icon ion-share"></i> <b> '+f.instant("EVENTDETAIL.share")+" </br>"},{text:'<i class="icon ion-calendar"></i> '+f.instant("EVENTDETAIL.add_calendar")}],destructiveText:'<i class="icon ion-trash-a"></i> '+f.instant("EVENTDETAIL.delete_event"),titleText:f.instant("EVENTDETAIL.options"),cancelText:'<i class="icon ion-close"></i> '+f.instant("EVENTDETAIL.cancel"),buttonClicked:function(e){return Y.optionsActionSheet[e](),!0},destructiveButtonClicked:T})}function C(){q()}function P(){function e(){h.showShortBottom(f.instant("MESSAGES.succ_add_to_calendar"))}var t=Y.event.title,n=Y.event.description,r=Y.event.image,o=V+"#/event/"+Y.event.id;c.share(t,n,r,o).then(e)}function U(){o.go("organizer.editevent",{id:Y.event.id})}function x(){function e(){h.showShortBottom(f.instant("MESSAGES.succ_add_to_calendar"))}l.createEvent({title:Y.event.title,location:Y.event.location,notes:Y.event.description,startDate:Y.event.starts,endDate:Y.event.ends}).then(e)}function L(){Y.modalTask.show()}function D(e,t){Y.isNewTask=!0,Y.indexPerk=t,Y.task.perk_id=e.id,Y.task.event_id=Y.event.id,Y.showModalTask()}function O(e){Y.modalTask.hide(),e&&n.resetForm(e),Y.task={},Y.indexPerk=-1,Y.indexTask=-1}function j(e,t,n){Y.isNewTask=!1,Y.indexPerk=t,Y.indexTask=n,Y.task=angular.copy(e),Y.task.status=1==Y.task.status?!0:!1,Y.showModalTask()}function M(e){function t(t){Y.event.perks[Y.indexPerk].tasks.push(t.PerkTask),Y.userAuth.sponzorships_like_organizer=g.userAuth.sponzorships_like_organizer=t.sponzorships_like_organizer,k.updateUserAuth(Y.userAuth),I(t.PerkTask.title),z.$broadcast("MenuOrganizer:count_tasks"),n.resetForm(e),Y.hideModalTask(),n.hideLoad()}function r(t){n.resetForm(e),Y.hideModalTask(),n.hideLoad()}n.showLoad(),v.createPerkTask(N()).then(t)["catch"](r)}function I(e){for(var t=0;t<Y.event.perks[Y.indexPerk].sponzorship.length;t++){var n=Y.event.perks[Y.indexPerk].sponzorship[t];w.sendNewTaskOrganizer({text:e,modelId:n.id},n.sponzor_id)}}function B(e,t){for(var n=0;n<Y.event.perks[Y.indexPerk].sponzorship.length;n++){var r=Y.event.perks[Y.indexPerk].sponzorship[n];t?w.sendDoneTaskOrganizer({text:e,modelId:r.id},r.sponzor_id):w.sendUpdateTaskOrganizer({text:e,modelId:r.id},r.sponzor_id)}}function N(){return{user_id:Y.userAuth.id,event_id:Y.task.event_id,perk_id:Y.task.perk_id,title:Y.task.title,description:Y.task.description,type:0,status:0}}function F(e){function t(t){Y.userAuth.sponzorships_like_organizer=g.userAuth.sponzorships_like_organizer=t.sponzorships_like_organizer,Y.event.perks[Y.indexPerk].tasks.splice(Y.indexTask,1),k.updateUserAuth(Y.userAuth),e&&n.resetForm(e),Y.hideModalTask(),n.hideLoad(),z.$broadcast("MenuOrganizer:count_tasks"),z.$broadcast("TaskTabsController:count_tasks")}function r(t){Y.hideModalTask(),e&&n.resetForm(e),n.alert({template:t.message}),n.hideLoad()}n.showLoad(),v.deletePerkTask(Y.task.id).then(t)["catch"](r)}function R(e){function t(t){B(t.title,0==Y.event.perks[Y.indexPerk].tasks[Y.indexTask].status&&1==t.status),Y.event.perks[Y.indexPerk].tasks[Y.indexTask]=t,n.resetForm(e),z.$broadcast("MenuOrganizer:count_tasks"),z.$broadcast("TaskTabsController:count_tasks"),Y.hideModalTask(),n.hideLoad()}function r(t){n.resetForm(e),Y.hideModalTask(),n.hideLoad()}n.showLoad(),Y.task.status=Y.task.status?1:0,v.editPerkTaskPatch(Y.task.id,Y.task).then(t)["catch"](r)}function H(e){Y.isNewTask?M(e):R(e)}var Y=this,G=null,q=null;Y.optionsActionSheet=[];var V=m.url_web;Y.event={},Y.deleteEvent=T,Y.userAuth=k.getUserAuth(),Y.indexPerk=-1,Y.indexTask=-1,Y.modalTask=null,Y.isNewTask=!0,Y.task={},Y.showModalTask=L,Y.newTask=D,Y.hideModalTask=O,Y.editTask=j,Y.submitTask=H,Y.deleteTask=F,Y.sponsorshipSelected={},Y.openOptionsSponsorship=E,Y.closeOptionsSponsorship=y,Y.updateSponsorship=$,Y.showActionSheet=b,Y.hideActionSheet=C,S()}angular.module("app.events-organizer").controller("EventDetailOrganizerController",e),e.$inject=["$scope","eventService","utilsService","$stateParams","$state","sponsorshipService","$ionicPopup","$ionicModal","$ionicActionSheet","$cordovaSocialSharing","$cordovaCalendar","$ionicSideMenuDelegate","$ionicHistory","$cordovaToast","$translate","BackendVariables","perkTaskService","$localStorage","userAuthService","notificationService","$rootScope"];
}(),function(){"use strict";function e(e,t){function n(){t.$on("EventsTabsController:count_events",o),s.count_events=s.userAuth.events.filter(r).length,s.count_past_events=s.userAuth.events.length-s.count_events}function r(e){var t=moment(new Date).subtract(1,"days");return moment(e.ends).isAfter(t)}function o(){s.userAuth=e.getUserAuth(),s.count_events=s.userAuth.events.filter(r).length,s.count_past_events=s.userAuth.events.length-s.count_events}var s=this;s.userAuth=e.getUserAuth(),s.count_events=0,s.count_past_events=0,n()}angular.module("app.sponsors-organizer").controller("EventsTabsController",e),e.$inject=["userAuthService","$rootScope"]}(),function(){"use strict";function e(e,t,n,r,o,s){function a(){o.$on("EventListController:getEvents",i),l.events=l.userAuth.events.filter(c),l.showEmptyState=0==l.events.length?!0:!1}function i(){l.userAuth=s.getUserAuth(),l.events=l.userAuth.events.filter(c),l.showEmptyState=0==l.events.length?!0:!1}function u(){function e(e){r.$broadcast("scroll.refreshComplete"),l.userAuth=s.updateUserAuth(e),l.events=l.userAuth.events.filter(c),l.showEmptyState=0==l.events.length?!0:!1,o.$broadcast("MenuOrganizer:count_events"),o.$broadcast("EventsTabsController:count_events"),o.$broadcast("HomeOrganizerController:count_events")}function n(e){r.$broadcast("scroll.refreshComplete")}t.home(l.userAuth.id).then(e)["catch"](n)}function c(e){var t=moment(new Date).subtract(1,"days");return moment(e.ends).isAfter(t)}var l=this;l.userAuth=s.getUserAuth(),l.events=[],l.showEmptyState=!1,l.doRefresh=u,a()}angular.module("app.events-organizer").controller("EventListController",e),e.$inject=["$localStorage","userService","utilsService","$scope","$rootScope","userAuthService"]}(),function(){"use strict";function e(e,t,n,r,o,s){function a(){o.$on("PastEventsController:getEvents",i),l.events=l.userAuth.events.filter(c),l.showEmptyState=0==l.events.length?!0:!1}function i(){l.userAuth=s.getUserAuth(),l.events=l.userAuth.events.filter(c),l.showEmptyState=0==l.events.length?!0:!1}function u(){function e(e){r.$broadcast("scroll.refreshComplete"),l.userAuth=s.updateUserAuth(e),l.events=l.userAuth.events.filter(c),o.$broadcast("MenuOrganizer:count_events"),o.$broadcast("EventsTabsController:count_events"),o.$broadcast("HomeOrganizerController:count_events")}function n(e){r.$broadcast("scroll.refreshComplete")}t.home(l.userAuth.id).then(e)["catch"](n)}function c(e){var t=moment(new Date).subtract(1,"days");return moment(e.ends).isBefore(t)}var l=this;l.userAuth=s.getUserAuth(),l.events=[],l.showEmptyState=!1,l.doRefresh=u,a()}angular.module("app.events-organizer").controller("PastEventsController",e),e.$inject=["$localStorage","userService","utilsService","$scope","$rootScope","userAuthService"]}(),function(){"use strict";function e(e,t,n,r,o,s,a){function i(){d.sponzorship=_.findWhere(d.userAuth.sponzorships_like_organizer,{id:r.id}),d.sponzorship.task_sponzor=d.sponzorship.task_sponzor.filter(u)}function u(e){return e.task.user_id!=d.userAuth.id}function c(){function e(e){e&&p(1)}n.confirm({title:"Are you sure?",template:'<p class="text-center">In accept the sponsor</p>'}).then(e)}function l(){function e(e){e&&p(2)}n.confirm({title:"Are you sure?",template:'<p class="text-center">In reject the sponsor</p>'}).then(e)}function p(e){function r(e){n.hideLoad();var t={text:d.sponzorship.event.title,link:"#/sponzors/sponzoring",modelId:d.sponzorship.id};d.sponzorship.status=e.status,1==d.sponzorship.status?a.sendAcceptSponsorship(t,d.sponzorship.sponzor_id):2==d.sponzorship.status&&a.sendRejectSponsorship(t,d.sponzorship.sponzor_id)}function o(e){n.hideLoad()}n.showLoad();var s=angular.copy(d.sponzorship);s.status=e,t.editSponzorshipPut(s.id,s).then(r)["catch"](o)}var d=this;d.sponzorship={},d.userAuth=s.getUserAuth(),d.showEmptyState=!1,d.sponsorAccept=c,d.sponsorReject=l,i()}angular.module("app.sponsors-organizer").controller("SponsorshipOrganizerDetailController",e),e.$inject=["$localStorage","sponsorshipService","utilsService","$stateParams","$ionicHistory","userAuthService","notificationService"]}(),function(){"use strict";function e(e,t,n,r,o,s,a,i,u){function c(){v.sponsorships=v.userAuth.sponzorships_like_organizer.filter(l),v.showEmptyState=0==v.sponsorships.length?!0:!1,a.$on("SponsorshipsListController:getSponzorships",p)}function l(e){var t=moment(new Date).subtract(1,"days");return moment(e.event.ends).isAfter(t)}function p(){v.userAuth=u.getUserAuth(),v.sponsorships=v.userAuth.sponzorships_like_organizer.filter(l),v.showEmptyState=0==v.sponsorships.length?!0:!1}function d(e){function t(t){t&&f(e,1)}r.confirm({title:"Are you sure?",template:'<p class="text-center">In the accept the sponsor</p>'}).then(t)}function h(e){function t(t){t&&f(e,2)}r.confirm({title:"Are you sure?",template:'<p class="text-center">In the reject the sponsor</p>'}).then(t)}function f(e,n){function o(t){r.hideLoad(),e.status=t.status;var n={text:e.event.title,link:"#/sponzors/sponzoring",modelId:t.id};1==e.status?i.sendAcceptSponsorship(n,t.sponzor_id):2==e.status&&i.sendRejectSponsorship(n,t.sponzor_id)}function s(e){r.hideLoad()}r.showLoad();var a=angular.copy(e);a.status=n,t.editSponzorshipPut(a.id,a).then(o)["catch"](s)}function m(){function e(e){s.$broadcast("scroll.refreshComplete"),v.userAuth=u.updateUserAuth(e),v.sponsorships=v.userAuth.sponzorships_like_organizer.filter(l),v.showEmptyState=0==v.sponsorships.length?!0:!1,a.$broadcast("MenuOrganizer:count_sponsors"),a.$broadcast("SponsorshipsTabsController:count_sponsors"),a.$broadcast("HomeOrganizerController:count_sponsors")}function t(e){v.showEmptyState=!0}n.home(v.userAuth.id).then(e)["catch"](t)}var v=this;v.sponsorships=[],v.userAuth=u.getUserAuth(),v.showEmptyState=!1,v.sponsorAccept=d,v.sponsorReject=h,v.doRefresh=m,c()}angular.module("app.sponsors-organizer").controller("SponsorshipsListController",e),e.$inject=["$localStorage","sponsorshipService","userService","utilsService","$ionicScrollDelegate","$scope","$rootScope","notificationService","userAuthService"]}(),function(){"use strict";function e(e,t,n,r,o,s,a,i,u){function c(){v.sponsorships=v.userAuth.sponzorships_like_organizer.filter(l),v.showEmptyState=0==v.sponsorships.length?!0:!1,a.$on("SponsorshipsPastEventsController:getSponzorships",p)}function l(e){var t=moment(new Date).subtract(1,"days");return moment(e.event.ends).isBefore(t)}function p(){v.userAuth=u.getUserAuth(),v.sponsorships=v.userAuth.sponzorships_like_organizer.filter(l),v.showEmptyState=0==v.sponsorships.length?!0:!1}function d(e){function t(t){t&&f(e,1)}r.confirm({title:"Are you sure?",template:'<p class="text-center">In the accept the sponsor</p>'}).then(t)}function h(e){function t(t){t&&f(e,2)}r.confirm({title:"Are you sure?",template:'<p class="text-center">In the reject the sponsor</p>'}).then(t)}function f(e,n){function o(t){r.hideLoad(),e.status=t.status;var n={text:e.event.title,link:"#/sponzors/sponzoring",modelId:t.id};1==e.status?i.sendAcceptSponsorship(n,t.sponzor_id):2==e.status&&i.sendRejectSponsorship(n,t.sponzor_id)}function s(e){r.hideLoad()}r.showLoad();var a=angular.copy(e);a.status=n,t.editSponzorshipPut(a.id,a).then(o)["catch"](s)}function m(){function e(e){s.$broadcast("scroll.refreshComplete"),v.userAuth=u.updateUserAuth(e),v.sponsorships=v.userAuth.sponzorships_like_organizer,v.showEmptyState=0==v.sponsorships.length?!0:!1,a.$broadcast("MenuOrganizer:count_sponsors"),a.$broadcast("SponsorshipsTabsController:count_sponsors"),a.$broadcast("HomeOrganizerController:count_sponsors")}function t(e){v.showEmptyState=!0}n.home(v.userAuth.id).then(e)["catch"](t)}var v=this;v.sponsorships=[],v.userAuth=u.getUserAuth(),v.showEmptyState=!1,v.sponsorAccept=d,v.sponsorReject=h,v.doRefresh=m,c()}angular.module("app.sponsors-organizer").controller("SponsorshipsPastEventsController",e),e.$inject=["$localStorage","sponsorshipService","userService","utilsService","$ionicScrollDelegate","$scope","$rootScope","notificationService","userAuthService"]}(),function(){"use strict";function e(e,t){function n(){t.$on("SponsorshipsTabsController:count_sponsors",o),s.count_events=s.userAuth.sponzorships_like_organizer.filter(r).length,s.count_past_events=s.userAuth.sponzorships_like_organizer.length-s.count_events}function r(e){var t=moment(new Date).subtract(1,"days");return moment(e.event.ends).isAfter(t)}function o(){s.userAuth=e.getUserAuth(),s.count_sponsors=s.userAuth.sponzorships_like_organizer.length,s.count_past_events=s.userAuth.sponzorships_like_organizer.length-s.count_events}var s=this;s.userAuth=e.getUserAuth(),s.count_events=0,s.count_past_events=0,n()}angular.module("app.sponsors-organizer").controller("SponsorshipsTabsController",e),e.$inject=["userAuthService","$rootScope"]}(),function(){"use strict";function e(e,t,n,r,o,s,a,i,u){function c(){$.events=$.userAuth.events.filter(h).map(p).sort(l),$.showEmptyState=0==$.events.length?!0:!1,a.fromTemplateUrl("app/tasks-organizer/task-modal.html",{scope:o,animation:"slide-in-up"}).then(function(e){$.modalTask=e})}function l(e,t){return t.ends>e.ends}function p(e){return e.perks=e.perks.map(d),e}function d(e){return e.sponzorship=_.where($.userAuth.sponzorships_like_organizer,{perk_id:e.id}),e}function h(e){var t=e.perks.reduce(function(e,t){return e.concat(t.tasks)},[]),n=moment(new Date).subtract(1,"days");return moment(e.ends).isBefore(n)&&t.length>0}function f(){function e(e){o.$broadcast("scroll.refreshComplete"),$.userAuth=i.updateUserAuth(e),$.events=$.userAuth.events.filter(h).map(p).sort(l),$.showEmptyState=0==$.events.length?!0:!1,s.$broadcast("MenuOrganizer:count_tasks"),s.$broadcast("TaskTabsController:count_tasks")}function t(e){console.log(e)}n.home($.userAuth.id).then(e)["catch"](t)}function m(e){for(var t=0;t<$.events[$.indexEvent].perks[$.indexPerk].sponzorship.length;t++){var n=$.events[$.indexEvent].perks[$.indexPerk].sponzorship[t];u.sendNewTaskOrganizer({text:e,modelId:n.id},n.sponzor_id)}}function v(e,t){for(var n=0;n<$.events[$.indexEvent].perks[$.indexPerk].sponzorship.length;n++){var r=$.events[$.indexEvent].perks[$.indexPerk].sponzorship[n];t?u.sendDoneTaskOrganizer({text:e,modelId:r.id},r.sponzor_id):u.sendUpdateTaskOrganizer({text:e,modelId:r.id},r.sponzor_id)}}function g(){$.modalTask.show()}function k(e,t,n){$.isNewTask=!0,$.indexEvent=t,$.indexPerk=n,$.task.perk_id=e.id,$.task.event_id=e.id_event,$.showModalTask()}function w(e){$.modalTask.hide(),e&&r.resetForm(e),$.task={}}function z(e,t,n,r){$.isNewTask=!1,$.indexEvent=t,$.indexPerk=n,$.indexTask=r,$.task=angular.copy(e),$.task.status=1==$.task.status?!0:!1,$.showModalTask()}function S(n){function o(t){$.userAuth.sponzorships_like_organizer=e.userAuth.sponzorships_like_organizer=t.sponzorships_like_organizer,$.events[$.indexEvent].perks[$.indexPerk].tasks.push(t.PerkTask),r.resetForm(n),$.hideModalTask(),r.hideLoad(),m(t.PerkTask.title),s.$broadcast("MenuOrganizer:count_tasks")}function a(e){r.resetForm(n),$.hideModalTask(),r.hideLoad()}r.showLoad(),t.createPerkTask(A()).then(o)["catch"](a)}function A(){return{user_id:$.userAuth.id,event_id:$.task.event_id,perk_id:$.task.perk_id,title:$.task.title,description:$.task.description,type:0,status:$.task.status?1:0}}function T(n){function o(t){$.userAuth.sponzorships_like_organizer=e.userAuth.sponzorships_like_organizer=t.sponzorships_like_organizer,n&&r.resetForm(n),$.events[$.indexEvent].perks[$.indexPerk].tasks.splice($.indexTask,1),$.hideModalTask(),r.hideLoad(),s.$broadcast("MenuOrganizer:count_tasks"),s.$broadcast("TaskTabsController:count_tasks")}function a(e){$.hideModalTask(),n&&r.resetForm(n),r.alert({template:e.message}),r.hideLoad()}r.showLoad(),t.deletePerkTask($.task.id).then(o)["catch"](a)}function E(e){function n(t){r.resetForm(e),v(t.title,0==$.events[$.indexEvent].perks[$.indexPerk].tasks[$.indexTask].status&&1==t.status),$.events[$.indexEvent].perks[$.indexPerk].tasks[$.indexTask]=t,$.hideModalTask(),r.hideLoad(),s.$broadcast("MenuOrganizer:count_tasks"),s.$broadcast("TaskTabsController:count_tasks")}function o(t){r.resetForm(e),$.hideModalTask(),r.hideLoad()}r.showLoad(),$.task.status=$.task.status?1:0,t.editPerkTaskPatch($.task.id,$.task).then(n)["catch"](o)}function y(e){$.isNewTask?S(e):E(e)}var $=this;$.userAuth=i.getUserAuth(),$.events=[],$.showEmptyState=!1,$.doRefresh=f,$.indexEvent=-1,$.indexPerk=-1,$.indexTask=-1,$.modalTask=null,$.isNewTask=!0,$.task={},$.showModalTask=g,$.newTask=k,$.hideModalTask=w,$.editTask=z,$.submitTask=y,$.deleteTask=T,c()}angular.module("app.tasks-organizer").controller("PastTaskController",e),e.$inject=["$localStorage","perkTaskService","userService","utilsService","$scope","$rootScope","$ionicModal","userAuthService","notificationService"]}(),function(){"use strict";function e(e,t){function n(){e.$on("TaskTabsController:count_tasks",s),i.count_tasks=a(i.userAuth.events.filter(r)).length,i.count_past_tasks=a(i.userAuth.events.filter(o)).length}function r(e){var t=e.perks.reduce(function(e,t){return e.concat(t.tasks)},[]),n=moment(new Date).subtract(1,"days");return moment(e.ends).isAfter(n)&&t.length>0}function o(e){var t=e.perks.reduce(function(e,t){return e.concat(t.tasks)},[]),n=moment(new Date).subtract(1,"days");return moment(e.ends).isBefore(n)&&t.length>0}function s(){i.userAuth=t.getUserAuth(),i.count_tasks=a(i.userAuth.events.filter(r)).length,i.count_past_tasks=a(i.userAuth.events.filter(o)).length}function a(e){function t(e){return e.user_id==i.userAuth.id&&"1"!=e.status}return e.reduce(function(e,t){return e.concat(t.perks)},[]).reduce(function(e,t){return e.concat(t.tasks)},[]).filter(t)}var i=this;i.userAuth=t.getUserAuth(),i.count_tasks=0,i.count_past_tasks=0,n()}angular.module("app.tasks-organizer").controller("TaskTabsController",e),e.$inject=["$rootScope","userAuthService"]}(),function(){"use strict";function e(e,t,n,r,o,s,a,i,u){function c(){$.events=$.userAuth.events.filter(h).map(p),$.showEmptyState=0==$.events.length?!0:!1,a.fromTemplateUrl("app/tasks-organizer/task-modal.html",{scope:o,animation:"slide-in-up"}).then(function(e){$.modalTask=e})}function l(e,t){return t.starts>e.starts}function p(e){return e.perks=e.perks.map(d),e}function d(e){return e.sponzorship=_.where($.userAuth.sponzorships_like_organizer,{perk_id:e.id}),e}function h(e){var t=e.perks.reduce(function(e,t){return e.concat(t.tasks)},[]),n=moment(new Date).subtract(1,"days");return moment(e.ends).isAfter(n)&&t.length>0}function f(){function e(e){o.$broadcast("scroll.refreshComplete"),$.userAuth=i.updateUserAuth(e),$.events=$.userAuth.events.filter(h).map(p).sort(l),$.showEmptyState=0==$.events.length?!0:!1,s.$broadcast("MenuOrganizer:count_tasks"),s.$broadcast("TaskTabsController:count_tasks")}function t(e){console.log(e)}n.home($.userAuth.id).then(e)["catch"](t)}function m(e){for(var t=0;t<$.events[$.indexEvent].perks[$.indexPerk].sponzorship.length;t++){var n=$.events[$.indexEvent].perks[$.indexPerk].sponzorship[t];u.sendNewTaskOrganizer({text:e,modelId:n.id},n.sponzor_id)}}function v(e,t){for(var n=0;n<$.events[$.indexEvent].perks[$.indexPerk].sponzorship.length;n++){var r=$.events[$.indexEvent].perks[$.indexPerk].sponzorship[n];t?u.sendDoneTaskOrganizer({text:e,modelId:r.id},r.sponzor_id):u.sendUpdateTaskOrganizer({text:e,modelId:r.id},r.sponzor_id)}}function g(){$.modalTask.show()}function k(e,t,n){$.isNewTask=!0,$.indexEvent=t,$.indexPerk=n,$.task.perk_id=e.id,$.task.event_id=e.id_event,$.showModalTask()}function w(e){$.modalTask.hide(),e&&r.resetForm(e),$.task={}}function z(e,t,n,r){$.isNewTask=!1,$.indexEvent=t,$.indexPerk=n,$.indexTask=r,$.task=angular.copy(e),$.task.status=1==$.task.status?!0:!1,$.showModalTask()}function S(n){function o(t){$.userAuth.sponzorships_like_organizer=e.userAuth.sponzorships_like_organizer=t.sponzorships_like_organizer,$.events[$.indexEvent].perks[$.indexPerk].tasks.push(t.PerkTask),r.resetForm(n),$.hideModalTask(),r.hideLoad(),m(t.PerkTask.title),s.$broadcast("MenuOrganizer:count_tasks"),s.$broadcast("TaskTabsController:count_tasks")}function a(e){r.resetForm(n),$.hideModalTask(),r.hideLoad()}r.showLoad(),t.createPerkTask(A()).then(o)["catch"](a)}function A(){return{user_id:$.userAuth.id,event_id:$.task.event_id,perk_id:$.task.perk_id,title:$.task.title,description:$.task.description,type:0,status:$.task.status?1:0}}function T(n){function o(t){$.userAuth.sponzorships_like_organizer=e.userAuth.sponzorships_like_organizer=t.sponzorships_like_organizer,n&&r.resetForm(n),$.events[$.indexEvent].perks[$.indexPerk].tasks.splice($.indexTask,1),$.hideModalTask(),r.hideLoad(),s.$broadcast("MenuOrganizer:count_tasks"),s.$broadcast("TaskTabsController:count_tasks")}function a(e){$.hideModalTask(),n&&r.resetForm(n),r.alert({template:e.message}),r.hideLoad()}r.showLoad(),t.deletePerkTask($.task.id).then(o)["catch"](a)}function E(e){function n(t){r.resetForm(e),v(t.title,0==$.events[$.indexEvent].perks[$.indexPerk].tasks[$.indexTask].status&&1==t.status),$.events[$.indexEvent].perks[$.indexPerk].tasks[$.indexTask]=t,$.hideModalTask(),r.hideLoad(),s.$broadcast("MenuOrganizer:count_tasks")}function o(t){r.resetForm(e),$.hideModalTask(),r.hideLoad()}r.showLoad(),$.task.status=$.task.status?1:0,t.editPerkTaskPatch($.task.id,$.task).then(n)["catch"](o)}function y(e){$.isNewTask?S(e):E(e)}var $=this;$.userAuth=i.getUserAuth(),$.events=[],$.showEmptyState=!1,$.doRefresh=f,$.indexEvent=-1,$.indexPerk=-1,$.indexTask=-1,$.modalTask=null,$.isNewTask=!0,$.task={},$.showModalTask=g,$.newTask=k,$.hideModalTask=w,$.editTask=z,$.submitTask=y,$.deleteTask=T,c()}angular.module("app.tasks-organizer").controller("TaskListController",e),e.$inject=["$localStorage","perkTaskService","userService","utilsService","$scope","$rootScope","$ionicModal","userAuthService","notificationService"]}(),function(){"use strict";function e(e,t,n,r,o){function s(){function e(){r.hideLoad(),o.clearCache(),n.go("signin"),a.user={}}function s(e){r.hideLoad()}r.showLoad(),t.forgotPassword(a.user.email).then(e)["catch"](s)}var a=this;a.user={},a.resetPassword=s}angular.module("app.users").controller("ForgotController",e),e.$inject=["$translate","userService","$state","utilsService","$ionicHistory"]}(),function(){function e(e,t,n,r,o,s,a,i){function u(){p()}function c(){function e(e){n.hideLoad(),d()}function t(e){n.hideLoad()}n.showLoad(),s.bulkUserInterest(h.userAuth.id,{interests:l()}).then(e)["catch"](t)}function l(){function e(e){return e.interests}function t(e){return e.interests}function n(e,t){return e.concat(t)}function r(e){return e.check}function o(e){return{user_id:h.userAuth.id,interest_id:e.id_interest}}return h.categories.filter(e).map(t).reduce(n,[]).filter(r).map(o)}function p(){function e(e){n.hideLoad(),h.categories=e}function t(e){n.hideLoad()}n.showLoad(),o.allCategories().then(e)["catch"](t)}function d(){0==h.userAuth.type?t.go("organizer.intro"):t.go("sponzor.intro")}var h=this;h.userAuth=i.getUserAuth(),h.categories=[],h.updateInterests=c,u()}angular.module("app.users").controller("FormInterestsController",e),e.$inject=["userService","$state","utilsService","$localStorage","categoryService","userInterestService","$q","userAuthService"]}(),function(){"use strict";function e(e,t,n,r,o,s){function a(){l.userAuth.lang="en",l.userAuth.gender=1,l.userAuth.age="0"==l.userAuth.age?null:parseInt(l.userAuth.age)}function i(e){function o(t){r.hideLoad(),r.resetForm(e),t.age=parseInt(t.age),t.comunity_size=parseInt(t.comunity_size),l.userAuth=s.updateUserAuth(t),l.userAuth={},n.go("interests")}function a(e){r.hideLoad(),console.log(e)}r.showLoad(),t.editUserPatch(l.userAuth.id,u()).then(o)["catch"](a)}function u(){return{name:l.userAuth.name,age:parseInt(l.userAuth.age),location:l.userAuth.location.formatted_address,location_reference:l.userAuth.location.place_id,lang:l.userAuth.lang,sex:parseInt(l.userAuth.sex)}}function c(){e.use(l.userAuth.lang)}var l=this;l.userAuth=s.getUserAuth(),l.updateProfile=i,l.changeLang=c,a()}angular.module("app.users").controller("FormProfileController",e),e.$inject=["$translate","userService","$state","utilsService","$localStorage","userAuthService"]}(),function(){"use strict";function e(e,t,n,r){function o(n){function r(){t.hideLoad(),t.resetForm(n),a.friend={},t.alert({title:"Nice!",template:"Your Invitation was Sent."})}function o(){t.hideLoad()}t.showLoad(),e.invitedUser(s()).then(r)["catch"](o)}function s(){return{user_id:a.userAuth.id,email:a.friend.email,message:"Try this ;)"}}var a=this;a.friend={},a.userAuth=r.getUserAuth(),a.inviteFriend=o}angular.module("app.users").controller("InviteUsersController",e),e.$inject=["userService","utilsService","$localStorage","userAuthService"]}(),function(){"use strict";function e(e,t,n,r,o,s,a,i,u,c){function l(){t.checkSession()&&(g.userResponse=n.userAuth,h())}function p(r){function a(e){o.hideLoad(),o.resetForm(r),g.userResponse=e,n.token=s.encode(g.user.email+":"+g.user.password);var e=Ionic.User.current();e.id||(e.id=g.userResponse.id,e.set("email",g.user.email),e.set("type",g.user.type)),e.save(),g.user={},i.register(),v(),u.activate(),h()}function c(t){o.hideLoad(),"Invalid credentials"===o.trim(t.message)&&o.alert({title:e.instant("ERRORS.signin_title_credentials"),template:e.instant("ERRORS.signin_incorrect_credentials")}),g.user.password=""}o.showLoad(),t.login(g.user.email,g.user.password).then(a)["catch"](c)}function d(){function e(e){console.log(e)}g.userResponse.demo=1,v(),t.editUserPatch(g.userResponse.id,g.userResponse).then(f)["catch"](e)}function h(){0==g.userResponse.demo?d():m()}function f(){0==g.userResponse.type?r.go("organizer.intro"):r.go("sponzor.intro")}function m(){0==g.userResponse.type?r.go("organizer.home"):r.go("sponzor.home")}function v(){c.updateUserAuth(g.userResponse)}var g=this;g.user={},g.userResponse={},g.signIn=p,l()}angular.module("app.users").controller("LoginController",e),e.$inject=["$translate","userService","$localStorage","$state","utilsService","$base64","$ionicUser","$ionicAnalytics","notificationService","userAuthService"]}(),function(){"use strict";function e(e,t,n,r){function o(){s.notifications=r.getNotifications(s.userAuth.id)}var s=this;s.userAuth=t.getUserAuth(),s.notifications=[],s.time=24,o()}angular.module("app.users").controller("NotificationsController",e),e.$inject=["$translate","userAuthService","$state","notificationService"]}(),function(){"use strict";function e(e,t,n,r,o,s,a,i){function u(){p.userAuth.age=parseInt(p.userAuth.age),p.userAuth.comunity_size=p.userAuth.comunity_size||0,p.userAuth.comunity_size=parseInt(p.userAuth.comunity_size)}function c(){function e(e){p.imageURI=e,p.userAuth.image="data:image/jpeg;base64,"+e}function t(e){}var r=r||null,o=o||null,s={quality:100,destinationType:r?r.DestinationType.DATA_URL:null,sourceType:r?r.PictureSourceType.PHOTOLIBRARY:null,allowEdit:!0,encodingType:r?r.EncodingType.JPEG:null,targetWidth:500,targetHeight:500,popoverOptions:o,saveToPhotoAlbum:!1};n.getPicture(s).then(e)["catch"](t)}function l(n){function r(t){return p.userAuth.image=t,e.editUserPatch(p.userAuth.id,p.userAuth)}function o(e){t.hideLoad(),t.resetForm(n),e.age=parseInt(e.age),e.comunity_size=parseInt(e.comunity_size),p.userAuth=i.updateUserAuth(e),a.showShortBottom("Su perfil se ha actulizado")}function u(e){t.hideLoad()}t.showLoad(),p.imageURI?s.uploadImage(p.imageURI).then(r).then(o)["catch"](u):e.editUserPatch(p.userAuth.id,p.userAuth).then(o)["catch"](u)}var p=this;p.userAuth=i.getUserAuth(),p.imageURI=null,p.getPhoto=c,p.updateProfile=l,u()}angular.module("app.users").controller("ProfileController",e),e.$inject=["userService","utilsService","$cordovaCamera","$localStorage","$q","imgurService","$cordovaToast","userAuthService"]}(),function(){"use strict";function e(e,t,n,r,o,s,a,i){function u(){d.newUser.type=0}function c(u){function c(n){r.hideLoad(),r.resetForm(u),r.alert({title:e.instant("MESSAGES.succ_user_tit"),template:e.instant("MESSAGES.succ_user_mess")}),o.token=s.encode(d.newUser.email+":"+d.newUser.password),d.newUser={},d.newUser.type=0,i.getUserAuth(n),a.activate(),t.go("profile")}function h(t){r.hideLoad(),"Invalid credentials"===r.trim(t.message)?r.alert({title:e.instant("ERRORS.signin_title_credentials"),template:e.instant("ERRORS.signin_incorrect_credentials")}):"Not inserted"===r.trim(t.message)?r.alert({title:e.instant("ERRORS.signin_notinserted_credentials_title"),template:e.instant("ERRORS.signin_notinserted_credentials_message")}):t.error&&"The email has already been taken."===r.trim(t.error.email)&&r.alert({title:e.instant("ERRORS.signin_taken_credentials_title"),template:e.instant("ERRORS.signin_taken_credentials_message")})}r.showLoad(),n.createUser(l()).then(p).then(c)["catch"](h)}function l(){return{email:d.newUser.email,password:d.newUser.password,password_confirmation:d.newUser.password,name:d.newUser.name,lang:"en",type:d.newUser.type}}function p(){return n.login(d.newUser.email,d.newUser.password)}var d=this;d.newUser={},d.registerNewUser=c,u()}angular.module("app.users").controller("RegisterController",e),e.$inject=["$translate","$state","userService","utilsService","$localStorage","$base64","notificationService","userAuthService"]}(),function(){function e(e,t,n,r){function o(){r.setChannel("production")}function s(){e.use(u.lang)}function a(){function n(n){function r(e){e&&u.doUpdate()}t.hideLoad(),n?t.confirm({title:e.instant("MESSAGES.update_title"),template:'<p class="text-center">'+e.instant("MESSAGES.update_text")+"</p>"}).then(r):t.alert({title:e.instant("MESSAGES.update_title"),template:'<p class="text-center">'+e.instant("MESSAGES.update_text_nothing")+"</p>"})}function o(){t.hideLoad()}t.showLoad(),r.check().then(n)["catch"](o)}function i(){function o(){t.hideLoad(),n.showShortBottom(e.instant("MESSAGES.update_success"))}function s(){t.hideLoad(),t.alert()}t.showLoad(),r.update().then(o)["catch"](s)}var u=this;u.lang=e.use(),u.save=s,u.checkForUpdates=a,u.doUpdate=i,o()}angular.module("app.users").controller("SettingsController",e),e.$inject=["$translate","utilsService","$cordovaToast","$ionicDeploy"]}(),function(){"use strict";function e(e,t,n,r,o,s,a,i,u){function c(e){console.log(e)}function l(){n.login("organizer@sponzor.me","sponzorme").then(c)["catch"](c)}var p=this;p.userAuth=e.userAuth||{},l()}angular.module("app.users").controller("TestsController",e),e.$inject=["$localStorage","userInterestService","userService","sponsorshipService","perkTaskService","perkService","eventTypeService","categoryService","eventService"]}(),function(){"use strict";function e(e,t,n,r,o,s,a,i,u,c,l,p){function d(){c.checkSession()&&(l.activate(),c.refresh())}function h(){i.register(),i.setGlobalProperties({app_version_number:p.version,channel:p.channel,day_of_week:(new Date).getDay()})}function f(){function e(e){var n=e.value.split("-")[0],o={es:"¿Quieres cambiar el lenguaje a Español?",en:" Do you want changue the language to English?",pt:"¿Você quer mudar a língua para Português?"};r.confirm({title:"Language",template:'<p class="text-center">'+o[n]+"</p>"}).then(function(e){e?t.use(n):t.use("en"),u.chooseLang=!0}).then(v)}function o(e){t.use("en")}m()?v():n.getPreferredLanguage().then(e)["catch"](o)}function m(){return angular.isDefined(u.chooseLang)?!0:!1}function v(){function e(e){e&&s.confirm({title:t.instant("MESSAGES.update_title"),template:'<p class="text-center">'+t.instant("MESSAGES.update_text")+"</p>"}).then(function(e){e&&g()})}o.setChannel(p.channel),o.check().then(e)}function g(){function e(){s.hideLoad(),a.showShortBottom(t.instant("MESSAGES.update_success"))}function n(){s.hideLoad(),s.alert()}s.showLoad(),o.update().then(e)["catch"](n)}e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault(),d(),v(),f(),h()})}angular.module("app").run(e)}();