!function(){"use strict";angular.module("app",["ionic","ionic.service.core","ionic.service.deploy","ionic.service.analytics","ngCordova","ngMessages","ngStorage","ngSanitize","ngIOS9UIWebViewPatch","pascalprecht.translate","base64","tabSlideBox","app.widgets","app.users","app.dashboard-organizer","app.dashboard-sponzor","app.events-organizer","app.events-sponzor","app.sponsors-organizer","app.tasks-organizer","app.tasks-sponsor"])}(),function(){"use strict";function e(e,t,n,r,o){function a(){function e(){var e=JSON.parse(localStorage.getItem("ngStorage-userAuth"));return 0==e.type?"/organizer/home":"/sponzor/home"}return localStorage.getItem("ngStorage-token")&&localStorage.getItem("ngStorage-userAuth")?e():"/sign-in"}r.views.swipeBackEnabled(!1),r.views.maxCache(10),o.disableTracking("Tap"),o.disableTracking("Load"),t.otherwise(a()),e.state("signin",{url:"/sign-in",templateUrl:"app/users/login.html",controller:"LoginController as login"}).state("joinnow",{url:"/joinnow",templateUrl:"app/users/register.html",controller:"RegisterController as register"}).state("profile",{url:"/profile",templateUrl:"app/users/form-profile.html",controller:"FormProfileController as profile"}).state("interests",{url:"/interests",templateUrl:"app/users/form-interests.html",controller:"FormInterestsController as interests"}).state("forgot-password",{url:"/forgot-password",templateUrl:"app/users/forgot-password.html",controller:"ForgotController as forgot"}).state("organizer",{url:"/organizer","abstract":!0,templateUrl:"app/dashboard-organizer/menu.html",controller:"MenuOrganizerCtrl as menu"}).state("organizer.intro",{url:"/intro",views:{menuContent:{templateUrl:"app/dashboard-organizer/intro.html",controller:"IntroOrganizerCtrl as intro"}}}).state("organizer.home",{url:"/home",views:{menuContent:{templateUrl:"app/dashboard-organizer/home.html",controller:"HomeOrganizerController as home"}}}).state("organizer.profile",{url:"/profile",views:{menuContent:{templateUrl:"app/users/profile.html",controller:"ProfileController as profile"}}}).state("organizer.events",{url:"/events","abstract":!0,views:{menuContent:{templateUrl:"app/events-organizer/event-list-tabs.html"}}}).state("organizer.events.list",{url:"/list",views:{tabEventList:{templateUrl:"app/events-organizer/event-list.html",controller:"EventListController as eventList"}}}).state("organizer.events.detail-list",{url:"/event/:idEvent",views:{tabEventList:{templateUrl:"app/events-organizer/event-detail.html",controller:"EventDetailOrganizerController as eventDetail"}}}).state("organizer.events.past",{url:"/past",views:{tabPastEvents:{templateUrl:"app/events-organizer/past-events.html",controller:"PastEventsController as eventList"}}}).state("organizer.events.detail-past",{url:"/past-event/:idEvent",views:{tabPastEvents:{templateUrl:"app/events-organizer/event-detail.html",controller:"EventDetailOrganizerController as eventDetail"}}}).state("organizer.addevent",{url:"/addevent",views:{menuContent:{templateUrl:"app/events-organizer/add-event.html",controller:"AddEventController as addEvent"}}}).state("organizer.editevent",{url:"/editevent/:id",views:{menuContent:{templateUrl:"app/events-organizer/edit-event.html",controller:"EditEventController as editEvent"}}}).state("organizer.event",{url:"/event/:idEvent",views:{menuContent:{templateUrl:"app/events-organizer/event-detail.html",controller:"EventDetailOrganizerController as eventDetail"}}}).state("organizer.sponsors",{url:"/sponsors",views:{menuContent:{templateUrl:"app/sponsors-organizer/sponzor-list.html",controller:"SponzorListController as sponzorList"}}}).state("organizer.sponzor",{url:"/sponzor/:id",views:{menuContent:{templateUrl:"app/sponsors-organizer/sponzor-detail.html",controller:"SponsorshipDetailController as sponzorDetail"}}}).state("organizer.tasks",{url:"/tasks",views:{menuContent:{templateUrl:"app/tasks-organizer/task-list.html",controller:"TaskListController as taskList"}}}).state("organizer.addTask",{url:"/addTask",views:{menuContent:{templateUrl:"app/tasks-organizer/add-task.html",controller:"AddTaskController as addTask"}}}).state("organizer.editTask",{url:"/editTask/:id",views:{menuContent:{templateUrl:"app/tasks-organizer/edit-task.html",controller:"EditTaskController as editTask"}}}).state("organizer.invite",{url:"/invite",views:{menuContent:{templateUrl:"app/users/invite-users.html",controller:"InviteUsersController as invite"}}}).state("organizer.settings",{url:"/settings",views:{menuContent:{templateUrl:"app/users/settings.html",controller:"SettingsController as settings"}}}).state("sponzor",{url:"/sponzor","abstract":!0,templateUrl:"app/dashboard-sponzor/menu.html",controller:"MenuSponzorCtrl as menu"}).state("sponzor.intro",{url:"/intro",views:{menuContent:{templateUrl:"app/dashboard-sponzor/intro.html",controller:"IntroSponzorCtrl as intro"}}}).state("sponzor.home",{url:"/home",views:{menuContent:{templateUrl:"app/dashboard-sponzor/home.html",controller:"HomeSponzorController as home"}}}).state("sponzor.following",{url:"/following",views:{menuContent:{templateUrl:"app/events-sponsor/follow-events.html",controller:"FollowEventsController as follow"}}}).state("sponzor.sponzoring",{url:"/sponzoring",views:{menuContent:{templateUrl:"app/events-sponsor/sponsoring-events.html",controller:"SponzoringEventsController as sponzoring"}}}).state("sponzor.addTask",{url:"/addTask/:idEvent/:idPerk/:idOrganizer/:idSponsorship",views:{menuContent:{templateUrl:"app/tasks-sponsor/add-task.html",controller:"AddTaskSponsorController as addTask"}}}).state("sponzor.editTask",{url:"/editTask/:id",views:{menuContent:{templateUrl:"app/tasks-sponsor/edit-task.html",controller:"EditTaskSponsorController as editTask"}}}).state("sponzor.profile",{url:"/profile",views:{menuContent:{templateUrl:"app/users/profile.html",controller:"ProfileController as profile"}}}).state("sponzor.event",{url:"/event/:idEvent",views:{menuContent:{templateUrl:"app/events-sponsor/event-detail.html",controller:"EventDetailSponzorController as eventDetail"}}}).state("sponzor.event-tasks",{url:"/event-tasks/:idEvent",views:{menuContent:{templateUrl:"app/events-sponsor/event-detail-tasks.html",controller:"EventDetailTasksSponzorController as eventDetail"}}}).state("sponzor.invite",{url:"/invite",views:{menuContent:{templateUrl:"app/users/invite-users.html",controller:"InviteUsersController as invite"}}}).state("sponzor.settings",{url:"/settings",views:{menuContent:{templateUrl:"app/users/settings.html",controller:"SettingsController as settings"}}}),n.useStaticFilesLoader({prefix:"langs/lang-",suffix:".json"}),n.useSanitizeValueStrategy("escaped"),n.preferredLanguage("en"),n.fallbackLanguage("en")}angular.module("app").config(e)}(),function(){"use strict";angular.module("app").constant("moment",moment)}(),function(){"use strict";function e(e,t,n,r,o,a,i,s,u){function c(){s.register(),s.setGlobalProperties({app_version_number:"1.0.6",type:"develop",day_of_week:(new Date).getDay()})}function l(){function e(e){e&&a.confirm({title:t.instant("MESSAGES.update_title"),template:'<p class="text-center">'+t.instant("MESSAGES.update_text")+"</p>"}).then(function(e){e&&d()})}o.setChannel("production"),o.check().then(e)}function d(){function e(){a.hideLoad(),i.showShortBottom(t.instant("MESSAGES.update_success"))}function n(){a.hideLoad(),a.alert()}a.showLoad(),o.update().then(e)["catch"](n)}e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault(),l(),c()})}angular.module("app").run(e)}(),function(){"use strict";angular.module("app").value("BackendVariables",{url:"https://api.sponzor.me/",url_web:"https://sponzor.me/"}).value("AMAZON",{AMAZONSECRET:"RlzqEBFUlJW/8YGkeasfmTZRLTlWMWwaBpJNBxu6",AMAZONKEY:"AKIAJDGUKWK3H7SJZKSQ",AMAZONBUCKET:"sponzormewebappimages",AMAZONBUCKETREGION:"us-west-2",AMAZONBUCKETURL:"https://s3-us-west-2.amazonaws.com/sponzormewebappimages/"})}(),function(){"use strict";function e(e,t,n,r,o){function a(){function t(e){return r.when(e.data.categories)}function n(e){return r.reject(e.data)}return e({method:"GET",url:s+"categories"}).then(t)["catch"](n)}function i(t){function n(e){return r.when(e.data.data.category)}function o(e){return r.reject(e.data)}var a=typeof t;if("string"!==a&&"number"!==a)throw new Error;return e({method:"GET",url:s+"categories/"+t}).then(n)["catch"](o)}var s=n.url,u={allCategories:a,getCategory:i};return u}angular.module("app").factory("categoryService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){return t.token}function i(){function t(e){var t=n(e.data.events);return r.when(t)}function n(e){function t(e){return e.image="event_dummy.png"==e.image?"img/banner.jpg":e.image,e.starts=moment(e.starts)._d,e.ends=moment(e.ends)._d,e}return e.map(t)}function o(e){return r.reject(e.data)}return e({method:"GET",url:p+"events"}).then(t)["catch"](o)}function s(t){function n(e){function t(e){var t=e.event;return t.image="event_dummy.png"==t.image?"img/banner.jpg":t.image,t.category=0===e.category.length?t.category:e.category[0],t.type=0===e.type.length?t.type:e.type[0],t.organizer=0===e.organizer.length?t.organizer:e.organizer[0],t.organizer.image="organizer_sponzorme.png"==t.organizer.image?"img/photo.png":t.organizer.image,t.sponzorships=e.sponzorships,t.starts=moment(t.starts)._d,t.ends=moment(t.ends)._d,t}return r.when(t(e.data.data))}function o(e){return r.reject(e.data)}var a=typeof t;if("string"!==a&&"number"!==a)throw new Error;return e({method:"GET",url:p+"events/"+t}).then(n)["catch"](o)}function u(t){function n(e){return r.when(e.data.event)}function i(e){return r.reject(e.data)}var s=typeof t;if("object"!==s||Array.isArray(t))throw new Error;return e({method:"POST",url:p+"events",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+a()},data:o(t)}).then(n)["catch"](i)}function c(t){function n(e){return r.when(e.data)}function o(e){return r.reject(e.data)}var i=typeof t;if("string"!==i&&"number"!==i)throw new Error;return e({method:"DELETE",url:p+"events/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+a()}}).then(n)["catch"](o)}function l(t,n){function i(e){return r.when(e.data.event)}function s(e){return r.reject(e.data)}var u=typeof t;if("string"!==u&&"number"!==u)throw new Error;var c=typeof n;if("object"!==c||Array.isArray(n))throw new Error;return e({method:"PATCH",url:p+"events/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+a()},data:o(n)}).then(i)["catch"](s)}function d(t,n){function i(e){return r.when(e.data.event)}function s(e){return r.reject(e.data)}var u=typeof t;if("string"!==u&&"number"!==u)throw new Error;var c=typeof n;if("object"!==c||Array.isArray(n))throw new Error;return e({method:"PUT",url:p+"events/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+a()},data:o(n)}).then(i)["catch"](s)}var p=n.url,h={allEvents:i,getEvent:s,createEvent:u,deleteEvent:c,editEventPatch:l,editEventPut:d};return h}angular.module("app").factory("eventService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){function t(e){return r.when(e.data.eventTypes)}function n(e){return r.reject(e.data)}return e({method:"GET",url:s+"event_types"}).then(t)["catch"](n)}function i(t){function n(e){return r.when(e.data.data.eventTypes)}function o(e){return r.reject(e.data)}var a=typeof t;if("string"!==a&&"number"!==a)throw new Error;return e({method:"GET",url:s+"event_types/"+t}).then(n)["catch"](o)}var s=n.url,u={allEventTypes:a,getEventType:i};return u}angular.module("app").factory("eventTypeService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t){function n(n){function a(e){return t.when(e.data.data.link)}function i(e){return t.reject(e.data)}var s=typeof n;if("string"!==s)throw new Error;return e({method:"POST",url:r+"image",headers:{Authorization:"Client-ID "+o},data:{image:n,type:"base64"}}).then(a)["catch"](i)}var r="https://api.imgur.com/3/",o="bdff09d775f47b9",a={uploadImage:n};return a}angular.module("app").factory("imgurService",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){function t(e){return r.when(e.data.Perk)}function n(e){return r.reject(e.data)}return e({method:"GET",url:p+"perks"}).then(t)["catch"](n)}function i(t){function n(e){return r.when(o(e.data.data))}function o(e){var t=e.Perk;return t.event=e.Event||{},t.sponzorTasks=e.SponzorTasks||[],t.tasks=e.Tasks||[],t}function a(e){return r.reject(e.data)}var i=typeof t;if("string"!==i&&"number"!==i)throw new Error;return e({method:"GET",url:p+"perks/"+t}).then(n)["catch"](a)}function s(t){function n(e){return r.when(e.data.Perk)}function a(e){return r.reject(e.data)}var i=typeof t;if("object"!==i||Array.isArray(t))throw new Error;return e({method:"POST",url:p+"perks",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+d()},data:o(t)}).then(n)["catch"](a)}function u(t){function n(e){return r.when(e.data)}function o(e){return r.reject(e.data)}var a=typeof t;if("string"!==a&&"number"!==a)throw new Error;return e({method:"DELETE",url:p+"perks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+d()}}).then(n)["catch"](o)}function c(t,n){function a(e){return r.when(e.data.Perk)}function i(e){return r.reject(e.data)}var s=typeof t;if("string"!==s&&"number"!==s)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PATCH",url:p+"perks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+d()},data:o(n)}).then(a)["catch"](i)}function l(t,n){function a(e){return r.when(e.data.Perk)}function i(e){return r.reject(e.data)}var s=typeof t;if("string"!==s&&"number"!==s)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PUT",url:p+"perks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+d()},data:o(n)}).then(a)["catch"](i)}function d(){return t.token}var p=n.url,h={allPerks:a,getPerk:i,createPerk:s,deletePerk:u,editPerkPatch:c,editPerkPut:l};return h}angular.module("app").factory("perkService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){function t(e){return o.when(e.data.PerkTasks)}function n(e){return o.reject(e.data)}return e.get(h+"perk_tasks").then(t)["catch"](n)}function i(t){function n(e){return o.when(r(e.data.data))}function r(e){var t=e.PerkTask;return t.event=e.Event||{},t.perk=e.Perk||{},t.user=e.User||{},t}function a(e){return o.reject(e.data)}var i=typeof t;if("string"!==i&&"number"!==i)throw new Error;return e({method:"GET",url:h+"perk_tasks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(n)["catch"](a)}function s(t){function n(e){return o.when(e.data.PerkTasks)}function r(e){return o.reject(e.data)}var a=typeof t;if("string"!==a&&"number"!==a)throw new Error;return e({method:"GET",url:h+"perk_tasks_organizer/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(n)["catch"](r)}function u(t){function n(e){return o.when(e.data.PerkTask)}function a(e){return o.reject(e.data)}var i=typeof t;if("object"!==i||Array.isArray(t))throw new Error;return e({method:"POST",url:h+"perk_tasks",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()},data:r(t)}).then(n)["catch"](a)}function c(t){function n(e){return o.when(e.data)}function r(e){return o.reject(e.data)}var a=typeof t;if("string"!==a&&"number"!==a)throw new Error;return e({method:"DELETE",url:h+"perk_tasks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()}}).then(n)["catch"](r)}function l(t,n){function a(e){return o.when(e.data.PerkTask)}function i(e){return o.reject(e.data)}var s=typeof t;if("string"!==s&&"number"!==s)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PATCH",url:h+"perk_tasks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()},data:r(n)}).then(a)["catch"](i)}function d(t,n){function a(e){return o.when(e.data.PerkTask)}function i(e){return o.reject(e.data)}var s=typeof t;if("string"!==s&&"number"!==s)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PUT",url:h+"perk_tasks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()},data:r(n)}).then(a)["catch"](i)}function p(){return t.token}var h=n.url,f={allPerkTasks:a,getPerkTask:i,createPerkTask:u,deletePerkTask:c,editPerkTaskPatch:l,editPerkTaskPut:d,getPerkTaskByOrganizer:s};return f}angular.module("app").factory("perkTaskService",e),e.$inject=["$http","$localStorage","BackendVariables","$httpParamSerializerJQLike","$q"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){function t(e){return r.when(e.data.SponzorsEvents)}function n(e){return r.reject(e.data)}return e.get(f+"sponzorships").then(t)["catch"](n)}function i(t){function n(e){return r.when(o(e.data.data))}function o(e){var t=e.SponzorEvent;return t.sponzor=e.Sponzor||{},t.perk=e.Perk||{},t.organizer=e.Organizer||{},t.event=e.Event||{},t.tasks=e.Tasks||[],t}function a(e){return r.reject(e.data)}var i=typeof t;if("string"!==i&&"number"!==i)throw new Error;return e.get(f+"sponzorships/"+t).then(n)["catch"](a)}function s(t){function n(e){return r.when(o(e.data.SponzorsEvents))}function o(e){function t(e){return e.starts=moment(e.starts)._d,e.ends=moment(e.ends)._d,e}return e.map(t)}function a(e){return r.reject(e.data)}var i=typeof t;if("string"!==i&&"number"!==i)throw new Error;return e({method:"GET",url:f+"sponzorships_organizer/"+t}).then(n)["catch"](a)}function u(t){function n(e){return r.when(o(e.data.SponzorsEvents))}function o(e){function t(e){return e.starts=moment(e.starts)._d,e.ends=moment(e.ends)._d,e}return e.map(t)}function a(e){return r.reject(e.data)}var i=typeof t;if("string"!==i&&"number"!==i)throw new Error;return e({method:"GET",url:f+"sponzorships_sponzor/"+t}).then(n)["catch"](a)}function c(t){function n(e){return r.when(e.data.Sponzorship)}function a(e){return r.reject(e.data)}var i=typeof t;if("object"!==i||Array.isArray(t))throw new Error;return e({method:"POST",url:f+"sponzorships",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()},data:o(t)}).then(n)["catch"](a)}function l(t){function n(e){return r.when(e.data)}function o(e){return r.reject(e.data)}var a=typeof t;if("string"!==a&&"number"!==a)throw new Error;return e({method:"DELETE",url:f+"sponzorships/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()}}).then(n)["catch"](o)}function d(t,n){function a(e){return r.when(e.data.Sponzorship)}function i(e){return r.reject(e.data)}var s=typeof t;if("number"!==s&&"string"!==s)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PATCH",url:f+"sponzorships/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()},data:o(n)}).then(a)["catch"](i)}function p(t,n){function a(e){return r.when(e.data.Sponzorship)}function i(e){return r.reject(e.data)}var s=typeof t;if("number"!==s&&"string"!==s)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PUT",url:f+"sponzorships/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()},data:o(n)}).then(a)["catch"](i)}function h(){return t.token}var f=n.url,m={allSponsorships:a,getSponzorship:i,sponzorshipByOrganizer:s,sponzorshipBySponzor:u,createSponzorship:c,deleteSponzorship:l,editSponzorshipPatch:d,editSponzorshipPut:p};return m}angular.module("app").factory("sponsorshipService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){return t.token}function i(){function t(e){return r.when(e.data.TasksSponzor)}function n(e){return r.reject(e.data)}return e({method:"GET",url:p+"task_sponzor",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t)["catch"](n)}function s(t){function n(e){return r.when(o(e.data.data))}function o(e){var t=e.Task;return t.organizer=e.Organizer||null,t.event=e.Event||null,t.sponzor=e.Sponzor||null,t}function i(e){return r.reject(e.data)}var s=typeof t;if("string"!==s&&"number"!==s)throw new Error;return e({method:"GET",url:p+"task_sponzor/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+a()}}).then(n)["catch"](i)}function u(t){function n(e){return r.when(e.data.TaskSponzor)}function i(e){return r.reject(e.data)}var s=typeof t;if("object"!==s||Array.isArray(t))throw new Error;return e({method:"POST",url:p+"task_sponzor",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+a()},data:o(t)}).then(n)["catch"](i)}function c(t,n){function i(e){return r.when(e.data.TaskSponzor)}function s(e){return r.reject(e.data)}var u=typeof t;if("string"!==u&&"number"!==u)throw new Error;var c=typeof n;if("object"!==c||Array.isArray(n))throw new Error;return e({method:"PUT",url:p+"task_sponzor/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+a()},data:o(n)}).then(i)["catch"](s)}function l(t,n){function i(e){return r.when(e.data.TaskSponzor)}function s(e){return r.reject(e.data)}var u=typeof t;if("string"!==u&&"number"!==u)throw new Error;var c=typeof n;if("object"!==c||Array.isArray(n))throw new Error;return e({method:"PATCH",url:p+"task_sponzor/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+a()},data:o(n)}).then(i)["catch"](s)}function d(t){function n(e){return r.when(e.data)}function o(e){return r.reject(e.data)}var i=typeof t;if("string"!==i&&"number"!==i)throw new Error;return e({method:"DELETE",url:p+"task_sponzor/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+a()}}).then(n)["catch"](o)}var p=n.url,h=(t.token,{getAllTasks:i,getTask:s,createTask:u,editPutTask:c,editPatchTask:l,deleteTask:d});return h}angular.module("app").factory("tasksSponsorService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,r,o){function a(t,n){function a(e){return r.when(e.data.user)}function i(e){return r.reject(e.data)}var s=typeof t;if("string"!==s)throw new Error;var u=typeof n;if("string"!==u&&"number"!==u)throw new Error;return e({method:"POST",url:m+"auth",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:o({email:t,password:n})}).then(a)["catch"](i)}function i(t){function n(e){var t=e.data.data.user;return t.events=o(t.events),r.when(t)}function o(e){function t(e){return e.image="event_dummy.png"==e.image?"img/banner.jpg":e.image,e.starts=moment(e.starts)._d,e.ends=moment(e.ends)._d,e}return e.map(t)}function a(e){return r.reject(e.data)}var i=typeof t;if("string"!==i&&"number"!==i)throw new Error;return e({method:"GET",url:m+"users/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+f()}}).then(n)["catch"](a)}function s(t){function n(e){return r.when(e.data.User)}function a(e){return r.reject(e.data)}var i=typeof t;if("object"!==i||Array.isArray(t))throw new Error;return e({method:"POST",url:m+"users",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+f()},data:o(t)}).then(n)["catch"](a)}function u(t){function n(e){return r.when(e.data)}function o(e){return r.reject(e.data)}var a=typeof t;if("number"!==a&&"string"!==a)throw new Error;return e({method:"DELETE",url:m+"users/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+f()}}).then(n)["catch"](o)}function c(t,n){function a(e){return r.when(e.data.User)}function i(e){return r.reject(e.data)}var s=typeof t;if("number"!==s&&"string"!==s)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PATCH",url:m+"users/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+f()},data:o(n)}).then(a)["catch"](i)}function l(t,n){function a(e){return r.when(e.data.User)}function i(e){return r.reject(e.data)}var s=typeof t;if("number"!==s&&"string"!==s)throw new Error;var u=typeof n;if("object"!==u||Array.isArray(n))throw new Error;return e({method:"PUT",url:m+"users/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+f()},data:o(n)}).then(a)["catch"](i)}function d(t){function n(e){return r.when(e.data)}function a(e){return r.reject(e.data)}var i=typeof t;if("string"!==i)throw new Error;return e({method:"POST",url:m+"send_reset_password",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+f()},data:o({email:t})}).then(n)["catch"](a)}function p(t){function n(e){return r.when(e.data)}function a(e){return r.reject(e.data)}var i=typeof t;if("object"!==i||Array.isArray(t))throw new Error;return e({method:"POST",url:m+"invite_friend",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+f()},data:o(t)}).then(n)["catch"](a)}function h(){return angular.isDefined(t.token)&&angular.isDefined(t.userAuth)?!0:!1}function f(){return t.token}var m=n.url,v={login:a,getUser:i,createUser:s,deleteUser:u,editUserPatch:c,editUserPut:l,forgotPassword:d,invitedUser:p,checkSession:h};return v}angular.module("app").factory("userService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){return t.token}function i(t){function n(e){return r.when(e.data.UserInterest)}function i(e){return r.reject(e.data)}return e({method:"POST",url:s+"user_interests",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+a()},data:o(t)}).then(n)["catch"](i)}var s=n.url,u={createUserInterest:i};return u}angular.module("app").factory("userInterestService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,r){function o(){return e.show({animation:"fade-in",showBackdrop:!1,maxWidth:200,showDelay:500})}function a(){e.hide()}function i(e){var n=e||{};return n.title=n.title||"<p>Ocurrió un error.</p>",n.template=n.template||'<p class="text-center">Intento de nuevo.</p>',t.alert(n)}function s(e){var n=e||{};return n.title=n.title||"¿ Estas seguro ?",n.template=n.template||"Estas seguro de eliminar.",t.confirm(n)}function u(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e?e.toString().replace(/^\s+|\s+$/g,""):""}function c(e){var t=typeof e;if("object"!==t||Array.isArray(e))throw new Error;e.$setPristine(),e.$setUntouched()}function l(e){return angular.extend(r.userAuth||{},e)}var d={showLoad:o,hideLoad:a,alert:i,confirm:s,trim:u,resetForm:c,updateUserAuth:l};return d}angular.module("app").factory("utilsService",e),e.$inject=["$ionicLoading","$ionicPopup","$translate","$localStorage","$ionicHistory"]}(),function(){"use strict";angular.module("app.dashboard-organizer",[])}(),function(){"use strict";angular.module("app.dashboard-sponzor",[])}(),function(){"use strict";angular.module("app.events-organizer",[])}(),function(){"use strict";angular.module("app.sponsors-organizer",[])}(),function(){"use strict";angular.module("app.tasks-organizer",[])}(),function(){"use strict";angular.module("app.users",[])}(),function(){"use strict";angular.module("app.tasks-sponsor",[])}(),function(){"use strict";angular.module("app.widgets",[])}(),function(){"use strict";angular.module("app.events-sponzor",[])}(),function(){"use strict";function e(){var e={restrict:"E",transclude:!0,scope:{edit:"=edit"},template:'<div class="spm-crop"><i ng-show="edit" class="icon ion-edit edit"></i><ng-transclude></ng-transclude></div>'};return e}angular.module("app.widgets").directive("spmCropImage",e),e.$inject=[]}(),function(){"use strict";function e(e){function t(t,n){e.hideTabs="tabs-item-hide",t.$on("$destroy",function(){e.hideTabs=""})}var n={restrict:"A",link:t};return n}angular.module("app.widgets").directive("spmHideTabs",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e,t){function n(e){var t=this;t.message=!1}var r={restrict:"E",controller:n,controllerAs:"vm",templateUrl:"app/widgets/network-message.html"};return r}angular.module("app.widgets").directive("spmNetworkMessage",e),e.$inject=["$cordovaNetwork","$rootScope"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){i()}function i(){function e(e){n.hideLoad(),s(e[0]),u(e[1])}function a(e){n.hideLoad()}n.showLoad();var i=[t.getUser(c.userAuth.id),r.sponzorshipByOrganizer(c.userAuth.id)];o.all(i).then(e)["catch"](a)}function s(e){function t(e){return moment(e.ends).isAfter(new Date)}c.count_events=e.events.filter(t).length,c.count_comunity=e.comunity_size||0}function u(e){c.count_sponsors=e.length}var c=this;c.count_events=0,c.count_sponsors=0,c.count_comunity=0,c.userAuth=e.userAuth,a()}angular.module("app.dashboard-organizer").controller("HomeOrganizerController",e),e.$inject=["$localStorage","userService","utilsService","sponsorshipService","$q"]}(),function(){"use strict";function e(e,t,n,r){function o(){r.canDragContent(!1)}function a(){n.nextViewOptions({disableAnimate:!0,disableBack:!0}),e.go("organizer.home")}function i(){t.next()}function s(){t.previous()}function u(e){c.slideIndex=e}var c=this;c.slideIndex=0,c.startApp=a,c.nextSlide=i,c.previousSlide=s,c.slideChanged=u,o()}angular.module("app.dashboard-organizer").controller("IntroOrganizerCtrl",e),e.$inject=["$state","$ionicSlideBoxDelegate","$ionicHistory","$ionicSideMenuDelegate"]}(),function(){"use strict";function e(e,t,n,r,o,a,i){function s(){t.$reset(),e.go("signin"),i.clearCache()}function u(){n.$on("Menu:count_events",c),n.$on("Menu:count_sponsors",l),n.$on("Menu:count_tasks",d),p(),f(),m()}function c(e,t){g.count_events=t}function l(e,t){g.count_sponsors=t}function d(e,t){g.count_tasks=t}function p(){function e(e){g.count_events=e.events.filter(h).length}r.getUser(g.userAuth.id).then(e)}function h(e){return moment(e.ends).isAfter(new Date)}function f(){function e(e){g.count_sponsors=e.length}o.sponzorshipByOrganizer(g.userAuth.id).then(e)}function m(){function e(e){g.count_tasks=e.filter(v).length}a.getPerkTaskByOrganizer(g.userAuth.id).then(e)}function v(e){return"1"!=e.status}var g=this;g.userAuth=t.userAuth,g.count_events=0,g.count_sponsors=0,g.count_tasks=0,g.logout=s,u()}angular.module("app.dashboard-organizer").controller("MenuOrganizerCtrl",e),e.$inject=["$state","$localStorage","$rootScope","userService","sponsorshipService","perkTaskService","$ionicHistory"]}(),function(){"use strict";function e(e,t,n,r){function o(){a()}function a(){function e(e){n.hideLoad(),u.events=e.filter(s)}function r(e){n.hideLoad()}n.showLoad(),t.allEvents().then(e)["catch"](r)}function i(){function e(e){u.events=e.filter(s),r.$broadcast("scroll.refreshComplete")}t.allEvents().then(e)}function s(e){return moment(e.ends).isAfter(new Date)}var u=this;u.userAuth=e.userAuth,u.events=[],u.doRefresh=i,o()}angular.module("app.dashboard-sponzor").controller("HomeSponzorController",e),e.$inject=["$localStorage","eventService","utilsService","$scope"]}(),function(){"use strict";function e(e,t,n,r){function o(){r.canDragContent(!1)}function a(){n.nextViewOptions({disableAnimate:!0,disableBack:!0}),e.go("sponzor.home")}function i(){t.next()}function s(){t.previous()}function u(e){c.slideIndex=e}var c=this;c.slideIndex=0,
c.startApp=a,c.nextSlide=i,c.previousSlide=s,c.slideChanged=u,o()}angular.module("app.dashboard-sponzor").controller("IntroSponzorCtrl",e),e.$inject=["$state","$ionicSlideBoxDelegate","$ionicHistory","$ionicSideMenuDelegate"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){r.$on("Menu:count_following",i),r.$on("Menu:count_sponsoring",s),c()}function i(e,t){p.count_following=t}function s(e,t){p.count_sponsoring=t}function u(){t.$reset(),e.go("signin"),o.clearCache()}function c(){function e(e){p.count_following=e.filter(l).length,p.count_sponsoring=e.filter(d).length}n.sponzorshipBySponzor(p.userAuth.id).then(e)}function l(e){return"1"!=e.status}function d(e){return"1"==e.status}var p=this;p.userAuth=t.userAuth,p.count_following=0,p.count_sponsoring=0,p.logout=u,a()}angular.module("app.dashboard-sponzor").controller("MenuSponzorCtrl",e),e.$inject=["$state","$localStorage","sponsorshipService","$rootScope","$ionicHistory"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s,u,c,l,d,p,h,f,m){function v(){O.sponsors=[],O.newEvent.access=!0,l.fromTemplateUrl("app/events-organizer/sponsor-modal.html",{scope:e,animation:"slide-in-up"}).then(function(e){O.modalSponsor=e}),z()}function g(e){return a.show(e)}function w(){function e(e){O.newEvent.start=moment(e).format("YYYY-MM-DD")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();g({date:new Date,mode:"date",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function S(){function e(e){O.newEvent.end=moment(e).format("YYYY-MM-DD")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();g({date:new Date,mode:"date",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function k(){function e(e){O.newEvent.starttime=moment(e).format("HH:mm:ss")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();g({date:new Date,mode:"time",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function y(){function e(e){O.newEvent.endtime=moment(e).format("HH:mm:ss")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();g({date:new Date,mode:"time",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function E(){function e(e){O.imageURI=e,O.newEvent.image="data:image/jpeg;base64,"+e}var t=t||null,n=n||null,r={quality:100,destinationType:t?t.DestinationType.DATA_URL:null,sourceType:t?t.PictureSourceType.PHOTOLIBRARY:null,allowEdit:!1,encodingType:t?t.EncodingType.JPEG:null,targetWidth:500,targetHeight:500,popoverOptions:n,saveToPhotoAlbum:!1};i.getPicture(r).then(e)}function T(e){function n(e){return O.newEvent.image=e,u.createEvent(A())}function r(n){o.hideLoad(),o.resetForm(e),$(n.id),O.newEvent={},p.nextViewOptions({disableAnimate:!1,disableBack:!0}),p.clearCache(),m.go("organizer.events.list"),d.showShortBottom(t.instant("MESSAGES.succ_event_mess"))}function a(e){o.hideLoad(),o.alert({title:t.instant("ERRORS.addeventsform_error_tit"),template:t.instant("ERRORS.addeventsform_error_mess")})}o.showLoad(),O.imageURI?h.uploadImage(O.imageURI).then(n).then(r)["catch"](a):u.createEvent(A()).then(r)["catch"](a)}function z(){function e(e){O.eventTypes=e,O.eventTypes.length>0&&(O.newEvent.type=O.eventTypes[0])}s.allEventTypes().then(e)}function A(){function e(e,t){return e=moment(e,"YYYY-MM-DD").format("YYYY-MM-DD"),t=moment(e+" "+t).format("HH:mm:ss"),e+" "+t}return{title:O.newEvent.title,location:O.newEvent.location,location_reference:"referencia",description:O.newEvent.description,starts:e(O.newEvent.start,O.newEvent.starttime),ends:e(O.newEvent.end,O.newEvent.endtime),image:O.newEvent.image?O.newEvent.image:"http://i.imgur.com/t8YehGM.jpg",privacy:O.newEvent.access?0:1,lang:t.use(),organizer:O.userAuth.id,category:1,type:O.newEvent.type.id}}function $(e){for(var t=O.sponsors.length,n=0;t>n;n++){var r=O.sponsors[n];r.id_event=e,r.reserved_quantity=0,_(r)}}function _(e){function t(e){console.log(e)}return c.createPerk(e).then(t)}function C(){O.modalSponsor.show()}function b(e){O.modalSponsor.hide(),e&&o.resetForm(e),O.newSponsor={}}function L(){O.isNewSponsor=!0,O.openModalSponsor()}function P(e){O.isNewSponsor=!1,O.newSponsor=e,O.openModalSponsor()}function D(){O.sponsors.push(O.newSponsor),O.closeModalSponsor()}function B(){var e=O.sponsors.indexOf(O.newSponsor);O.sponsors.splice(e,1),O.closeModalSponsor()}function j(){O.closeModalSponsor()}function U(e){O.isNewSponsor?(D(),o.resetForm(e)):(j(),o.resetForm(e))}var O=this;O.newEvent={},O.newSponsor={},O.isNewSponsor=!0,O.eventTypes=[],O.sponsors=[],O.userAuth=n.userAuth,O.modalSponsor=null,O.imageURI=null,O.clickedStartDate=w,O.clickedEndDate=S,O.clickedStartTime=k,O.clickedEndTime=y,O.getPhoto=E,O.createEvent=T,O.openModalSponsor=C,O.closeModalSponsor=b,O.createSponsor=L,O.editSponsor=P,O.deleteSponsor=B,O.submitSponsor=U,v()}angular.module("app.events-organizer").controller("AddEventController",e),e.$inject=["$scope","$translate","$localStorage","userService","utilsService","$cordovaDatePicker","$cordovaCamera","eventTypeService","eventService","perkService","$ionicModal","$cordovaToast","$ionicHistory","imgurService","$q","$state"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s,u,c,l,d,p,h,f,m){function v(){M.sponsors=[],l.fromTemplateUrl("app/events-organizer/sponsor-edit-modal.html",{scope:e,animation:"slide-in-up"}).then(function(e){M.modalSponsor=e}),g()}function g(){function e(e){o.hideLoad(),M.newEvent=e,M.newEvent.start=moment(e.starts).format("YYYY-MM-DD"),M.newEvent.starttime=moment(e.starts).format("HH:mm:ss"),M.newEvent.end=moment(e.ends).format("YYYY-MM-DD"),M.newEvent.endtime=moment(e.ends).format("HH:mm:ss"),M.newEvent.access="1"==M.newEvent.privacy?!0:!1,M.sponsors=M.newEvent.perks,A()}function t(e){o.hideLoad()}o.showLoad(),u.getEvent(m.id).then(e)["catch"](t)}function w(e){return a.show(e)}function S(){function e(e){M.newEvent.start=moment(e).format("YYYY-MM-DD")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"date",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function k(){function e(e){M.newEvent.end=moment(e).format("YYYY-MM-DD")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"date",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function y(){function e(e){M.newEvent.starttime=moment(e).format("HH:mm:ss")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"time",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function E(){function e(e){M.newEvent.endtime=moment(e).format("HH:mm:ss")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"time",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function T(){function e(e){M.imageURI=e,M.newEvent.image="data:image/jpeg;base64,"+e}var t=t||null,n=n||null,r={quality:100,destinationType:t?t.DestinationType.DATA_URL:null,sourceType:t?t.PictureSourceType.PHOTOLIBRARY:null,allowEdit:!1,encodingType:t?t.EncodingType.JPEG:null,targetWidth:500,targetHeight:500,popoverOptions:n,saveToPhotoAlbum:!1};i.getPicture(r).then(e)}function z(e){function n(e){return u.editEventPatch(M.newEvent.id,$())}function r(n){o.hideLoad(),o.resetForm(e),M.newEvent={},p.nextViewOptions({disableAnimate:!1,disableBack:!0}),p.clearCache(),p.goBack(),d.showShortBottom(t.instant("MESSAGES.succ_event_mess"))}function a(e){return _(e.id)}function i(e){o.hideLoad(),o.alert({title:t.instant("ERRORS.addeventsform_error_tit"),template:t.instant("ERRORS.addeventsform_error_mess")})}o.showLoad(),M.imageURI?h.uploadImage(M.imageURI).then(n).then(a).then(r)["catch"](i):u.editEventPatch(M.newEvent.id,$()).then(a).then(r)["catch"](i)}function A(){function e(e){M.eventTypes=e;for(var t=0;t<M.eventTypes.length;t++)if(M.eventTypes[t].id==M.newEvent.type.id){M.newEvent.type=M.eventTypes[t];break}}s.allEventTypes().then(e)}function $(){function e(e,t){return e=moment(e,"YYYY-MM-DD").format("YYYY-MM-DD"),t=moment(e+" "+t).format("HH:mm:ss"),e+" "+t}return{title:M.newEvent.title,location:M.newEvent.location,location_reference:"referencia",description:M.newEvent.description,starts:e(M.newEvent.start,M.newEvent.starttime),ends:e(M.newEvent.end,M.newEvent.endtime),image:M.newEvent.image?M.newEvent.image:"http://i.imgur.com/t8YehGM.jpg",privacy:M.newEvent.access?0:1,lang:t.use(),organizer:M.userAuth.id,category:1,type:M.newEvent.type.id}}function _(e){for(var t=[],n=M.sponsors.length,r=0;n>r;r++){var o=M.sponsors[r];o.id?t.push(c.editPerkPatch(o.id,o)):(o.id_event=e,o.reserved_quantity=0,t.push(c.createPerk(o)))}return f.all(t)}function C(){M.modalSponsor.show()}function b(e){M.modalSponsor.hide(),e&&o.resetForm(e),M.newSponsor={}}function L(){M.isNewSponsor=!0,M.openModalSponsor()}function P(e){M.isNewSponsor=!1,M.newSponsor=e,M.newSponsor.total_quantity=parseInt(M.newSponsor.total_quantity),M.newSponsor.usd=parseInt(M.newSponsor.usd),M.openModalSponsor()}function D(){M.sponsors.push(M.newSponsor),M.closeModalSponsor()}function B(){function e(e){if(e){var t=M.sponsors.indexOf(M.newSponsor);M.newSponsor.id?j(t,M.newSponsor.id):(M.sponsors.splice(t,1),M.closeModalSponsor())}else M.closeModalSponsor()}o.confirm({template:"Esta seguro de eliminar este tipo de patronicio."}).then(e)}function j(e,t){function n(t){M.sponsors.splice(e,1),M.closeModalSponsor()}function r(e){M.closeModalSponsor()}c.deletePerk(t).then(n)["catch"](r)}function U(){M.closeModalSponsor()}function O(e){M.isNewSponsor?(D(),o.resetForm(e)):(U(),o.resetForm(e))}var M=this;M.newEvent={},M.newSponsor={},M.isNewSponsor=!0,M.eventTypes=[],M.sponsors=[],M.userAuth=n.userAuth,M.modalSponsor=null,M.imageURI=null,M.clickedStartDate=S,M.clickedEndDate=k,M.clickedStartTime=y,M.clickedEndTime=E,M.getPhoto=T,M.updateEvent=z,M.openModalSponsor=C,M.closeModalSponsor=b,M.createSponsor=L,M.editSponsor=P,M.deleteSponsor=B,M.submitSponsor=O,v()}angular.module("app.events-organizer").controller("EditEventController",e),e.$inject=["$scope","$translate","$localStorage","userService","utilsService","$cordovaDatePicker","$cordovaCamera","eventTypeService","eventService","perkService","$ionicModal","$cordovaToast","$ionicHistory","imgurService","$q","$stateParams"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s,u,c,l,d,p,h,f,m,v,g){function w(){S(),d.canDragContent(!1),F.optionsActionSheet=[L,b,P],s.fromTemplateUrl("app/events-organizer/task-modal.html",{scope:e,animation:"slide-in-up"}).then(function(e){F.modalTask=e})}function S(){function e(e){n.hideLoad(),F.event=e,F.perks=k(F.event)}function o(e){n.hideLoad()}n.showLoad(),t.getEvent(r.idEvent).then(e)["catch"](o)}function k(e){for(var t=e.perks,n=0;n<t.length;n++)t[n].sponsorships=_.where(e.sponzorships,{perk_id:t[n].id}),t[n].tasks=_.where(e.perk_tasks.filter(y),{perk_id:t[n].id});return t}function y(e){return"0"==e.type}function E(){function e(e){n.hideLoad(),C(),p.clearCache(),p.goBack()}function o(e){n.hideLoad(),C(),n.alert({title:"Error",template:e.message})}n.showLoad(),t.deleteEvent(r.idEvent).then(e)["catch"](o)}function T(t){F.sponsorshipSelected=t,H=i.show({title:"Options",templateUrl:"app/events-organizer/options-sponsorship.html",scope:e})}function z(){H.close()}function A(e){function t(e){n.hideLoad(),z(),F.sponsorshipSelected.status=e.status}function r(e){n.hideLoad(),z()}n.showLoad();var o=angular.copy(F.sponsorshipSelected);o.status=e,a.editSponzorshipPut(o.id,o).then(t)["catch"](r)}function $(){Y=u.show({buttons:[{text:'<i class="icon ion-edit"></i> Edit event'},{text:'<i class="icon ion-share"></i> <b>Share</b> This'},{text:'<i class="icon ion-calendar"></i> Add to calendar'}],destructiveText:'<i class="icon ion-trash-a"></i> Delete event',titleText:"Options",cancelText:'<i class="icon ion-close"></i> Cancel',buttonClicked:function(e){return F.optionsActionSheet[e](),!0},destructiveButtonClicked:E})}function C(){Y()}function b(){function e(){h.showShortBottom(f.instant("MESSAGES.succ_add_to_calendar"))}var t=F.event.title,n=F.event.description,r=F.event.image,o=N+"#/event/"+F.event.id;c.share(t,n,r,o).then(e)}function L(){o.go("organizer.editevent",{id:F.event.id})}function P(){function e(){h.showShortBottom(f.instant("MESSAGES.succ_add_to_calendar"))}l.createEvent({title:F.event.title,location:F.event.location,notes:F.event.description,startDate:F.event.starts,endDate:F.event.ends}).then(e)}function D(){F.modalTask.show()}function B(e){F.isNewTask=!0,F.task.perk_id=e.id,F.task.event_id=F.event.id,F.showModalTask()}function j(e){F.modalTask.hide(),e&&n.resetForm(e),F.task={}}function U(e){F.isNewTask=!1,F.task=e,F.showModalTask()}function O(e){function t(t){S(),n.resetForm(e),F.hideModalTask()}function r(t){n.resetForm(e),F.hideModalTask()}v.createPerkTask(M()).then(t)["catch"](r)}function M(){return{user_id:F.userAuth.id,event_id:F.task.event_id,perk_id:F.task.perk_id,title:F.task.title,description:F.task.description,type:0,status:0}}function I(e){function t(t){S(),e&&n.resetForm(e),F.hideModalTask()}function r(t){F.hideModalTask(),e&&n.resetForm(e),n.alert({template:t.message})}v.deletePerkTask(F.task.id).then(t)["catch"](r)}function R(e){function t(t){S(),n.resetForm(e),F.hideModalTask()}function r(t){n.resetForm(e),F.hideModalTask()}v.editPerkTaskPatch(F.task.id,F.task).then(t)["catch"](r)}function x(e){F.isNewTask?O(e):R(e)}var F=this,H=null,Y=null;F.optionsActionSheet=[];var N=m.url_web;F.event={},F.deleteEvent=E,F.perks=[],F.userAuth=g.userAuth,F.modalTask=null,F.isNewTask=!0,F.task={},F.showModalTask=D,F.newTask=B,F.hideModalTask=j,F.editTask=U,F.submitTask=x,F.deleteTask=I,F.sponsorshipSelected={},F.openOptionsSponsorship=T,F.closeOptionsSponsorship=z,F.updateSponsorship=A,F.showActionSheet=$,F.hideActionSheet=C,w()}angular.module("app.events-organizer").controller("EventDetailOrganizerController",e),e.$inject=["$scope","eventService","utilsService","$stateParams","$state","sponsorshipService","$ionicPopup","$ionicModal","$ionicActionSheet","$cordovaSocialSharing","$cordovaCalendar","$ionicSideMenuDelegate","$ionicHistory","$cordovaToast","$translate","BackendVariables","perkTaskService","$localStorage"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){i()}function i(){function e(e){n.hideLoad(),c.showEmptyState=!1,c.events=e.events.filter(u),c.showEmptyState=0==c.events.length?!0:!1,o.$broadcast("Menu:count_events",c.events.length)}function r(e){n.hideLoad(),c.showEmptyState=!0}n.showLoad(),t.getUser(c.userAuth.id).then(e)["catch"](r)}function s(){function e(e){r.$broadcast("scroll.refreshComplete"),c.events=e.events.filter(u),c.showEmptyState=0==c.events.length?!0:!1,o.$broadcast("Menu:count_events",c.events.length)}function n(e){r.$broadcast("scroll.refreshComplete")}t.getUser(c.userAuth.id).then(e)["catch"](n)}function u(e){var t=moment(new Date).subtract(1,"days");return moment(e.ends).isAfter(t)}var c=this;c.userAuth=e.userAuth,c.events=[],c.showEmptyState=!1,c.doRefresh=s,a()}angular.module("app.events-organizer").controller("EventListController",e),e.$inject=["$localStorage","userService","utilsService","$scope","$rootScope"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){i()}function i(){function e(e){n.hideLoad(),c.events=e.events.filter(u),c.showEmptyState=0==c.events.length?!0:!1,o.$broadcast("Menu:count_events",e.events.length-c.events.length)}function r(e){n.hideLoad(),c.showEmptyState=!0}n.showLoad(),t.getUser(c.userAuth.id).then(e)["catch"](r)}function s(){function e(e){r.$broadcast("scroll.refreshComplete"),c.events=e.events.filter(u),o.$broadcast("Menu:count_events",e.events.length-c.events.length)}function n(e){r.$broadcast("scroll.refreshComplete")}t.getUser(c.userAuth.id).then(e)["catch"](n)}function u(e){var t=moment(new Date).subtract(1,"days");return moment(e.ends).isBefore(t)}var c=this;c.userAuth=e.userAuth,c.events=[],c.showEmptyState=!1,c.doRefresh=s,a()}angular.module("app.events-organizer").controller("PastEventsController",e),e.$inject=["$localStorage","userService","utilsService","$scope","$rootScope"]}(),function(){"use strict";function e(e,t,n,r,o,a){function i(){s()}function s(){function e(e){n.hideLoad(),p.sponsorship=e}function r(e){n.hideLoad()}n.showLoad(),t.getSponzorship(o.id).then(e)["catch"](r)}function u(){function e(e){e&&d(1)}l("Are you sure?","In accept the sponsor").then(e)}function c(){function e(e){e&&d(2)}l("Are you sure?","In reject the sponsor").then(e)}function l(e,t){return r.confirm({title:e,template:t})}function d(e){function r(e){n.hideLoad(),p.sponsorship.status=e.status,a.clearCache()}function o(e){n.hideLoad()}n.showLoad();var i=angular.copy(p.sponsorship);i.status=e,t.editSponzorshipPut(i.id,i).then(r)["catch"](o)}var p=this;p.sponsorship={},p.userAuth=e.userAuth,p.showEmptyState=!1,p.sponsorAccept=u,p.sponsorReject=c,i()}angular.module("app.sponsors-organizer").controller("SponsorshipDetailController",e),e.$inject=["$localStorage","sponsorshipService","utilsService","$ionicPopup","$stateParams","$ionicHistory"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s,u){function c(){r.fromTemplateUrl("app/sponsors-organizer/events-popover.html",{scope:i}).then(function(e){y=e}),l()}function l(){function e(e){n.hideLoad(),k.showEmptyState=!0,k.sponsors=e,k.events=d(k.sponsors)}function r(e){n.hideLoad(),k.showEmptyState=!0}n.showLoad(),t.sponzorshipByOrganizer(k.userAuth.id).then(e)["catch"](r)}function d(e){function t(e,t,n){for(var r,o=0;o<n.length;o++)if(n[o].event_id==e.event_id){r=o;break}return r==t}function n(e){return{title:e.title,id:e.event_id}}return e.filter(t).map(n)}function p(e){y.show(e)}function h(){y.hide()}function f(e){k.search={},e&&(k.search.event_id=e),a.scrollTop(),h()}function m(e){function t(t){t&&w(e,1)}g("Are you sure?","In the accept the sponsor").then(t)}function v(e){function t(t){t&&w(e,2)}g("Are you sure?","In the reject the sponsor").then(t)}function g(e,t){return o.confirm({title:e,template:t})}function w(e,r){function o(t){n.hideLoad(),e.status=t.status,u.clearCache()}function a(e){n.hideLoad()}n.showLoad();var i=angular.copy(e);i.status=r,t.editSponzorshipPut(i.id,i).then(o)["catch"](a)}function S(){function e(e){i.$broadcast("scroll.refreshComplete"),k.search={},k.sponsors=e,k.events=d(k.sponsors),s.$broadcast("Menu:count_sponsors",k.sponsors.length)}function n(e){k.showEmptyState=!0}t.sponzorshipByOrganizer(k.userAuth.id).then(e)["catch"](n)}var k=this,y=null;k.search={},k.sponsors=[],k.events=[],k.results=[],k.userAuth=e.userAuth,k.showEmptyState=!1,k.filterByEvent=f,k.showFilter=p,k.sponsorAccept=m,k.sponsorReject=v,k.doRefresh=S,c()}angular.module("app.sponsors-organizer").controller("SponzorListController",e),e.$inject=["$localStorage","sponsorshipService","utilsService","$ionicPopover","$ionicPopup","$ionicScrollDelegate","$scope","$rootScope","$ionicHistory"]}(),function(){"use strict";function e(e,t,n,r,o,a){function i(){c(),l()}function s(e){function n(t){o.hideLoad(),o.resetForm(e),d.newTask={},a.nextViewOptions({disableAnimate:!1,disableBack:!0}),a.clearCache(),a.goBack()}function r(e){o.hideLoad()}o.showLoad(),t.createPerkTask(u()).then(n)["catch"](r)}function u(){return{user_id:d.userAuth.id,event_id:d.newTask.event.id,perk_id:d.newTask.perk.id,title:d.newTask.title,description:d.newTask.description,type:0,status:0}}function c(){function e(e){o.hideLoad(),d.events=e.events}function t(e){o.hideLoad()}o.showLoad(),r.getUser(d.userAuth.id).then(e)["catch"](t)}function l(){function e(e){o.hideLoad(),d.perks=e}function t(e){o.hideLoad()}o.showLoad(),n.allPerks().then(e)["catch"](t)}var d=this;d.newTask={},d.userAuth=e.userAuth,d.events=[],d.perks=[],d.createTask=s,i()}angular.module("app.tasks-organizer").controller("AddTaskController",e),e.$inject=["$localStorage","perkTaskService","perkService","userService","utilsService","$ionicHistory"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){i(r.id)}function i(e){function r(e){n.hideLoad(),l.newTask=e,l.newTask.status="1"==e.status?!0:!1}function o(e){n.hideLoad()}n.showLoad(),t.getPerkTask(e).then(r)["catch"](o)}function s(e){function a(t){n.hideLoad(),n.resetForm(e),l.newTask={},o.nextViewOptions({disableAnimate:!1,disableBack:!0}),o.clearCache(),o.goBack()}function i(e){n.hideLoad()}n.showLoad(),t.editPerkTaskPatch(r.id,c()).then(a)["catch"](i)}function u(){function e(e){l.newTask={},n.hideLoad(),o.nextViewOptions({disableAnimate:!1,disableBack:!0}),o.clearCache(),o.goBack()}function a(e){n.hideLoad(),n.alert({template:e.message})}n.showLoad(),t.deletePerkTask(r.id).then(e)["catch"](a)}function c(){return{user_id:l.userAuth.id,event_id:l.newTask.event.id,perk_id:l.newTask.perk.id,title:l.newTask.title,description:l.newTask.description,type:0,status:l.newTask.status?"1":"0"}}var l=this;l.newTask={},l.userAuth=e.userAuth,l.editTask=s,l.deleteTask=u,a()}angular.module("app.tasks-organizer").controller("EditTaskController",e),e.$inject=["$localStorage","perkTaskService","utilsService","$stateParams","$ionicHistory"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){i()}function i(){function e(e){n.hideLoad(),l.tasks=u(e);var t=e.filter(c).length;l.showEmptyState=0==l.tasks.length?!0:!1,o.$broadcast("Menu:count_tasks",t)}function r(e){n.hideLoad()}n.showLoad(),t.getPerkTaskByOrganizer(l.userAuth.id).then(e)["catch"](r)}function s(){function e(e){r.$broadcast("scroll.refreshComplete"),l.tasks=u(e);var t=e.filter(c).length;o.$broadcast("Menu:count_tasks",t)}function n(e){console.log(e)}t.getPerkTaskByOrganizer(l.userAuth.id).then(e)["catch"](n)}function u(e){function t(e,t){return{title:t,tasks:e}}var n=_.groupBy(e,"eventTitle");return _.map(n,t)}function c(e){return"1"!=e.status}var l=this;l.userAuth=e.userAuth,l.tasks=[],l.showEmptyState=!1,l.doRefresh=s,a()}angular.module("app.tasks-organizer").controller("TaskListController",e),e.$inject=["$localStorage","perkTaskService","utilsService","$scope","$rootScope"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){function e(){r.hideLoad(),o.clearCache(),n.go("signin"),i.user={}}function a(e){r.hideLoad()}r.showLoad(),t.forgotPassword(i.user.email).then(e)["catch"](a)}var i=this;i.user={},i.resetPassword=a}angular.module("app.users").controller("ForgotController",e),e.$inject=["$translate","userService","$state","utilsService","$ionicHistory"]}(),function(){function e(e,t,n,r,o,a,i){function s(){d()}function u(){function e(e){n.hideLoad(),m()}function t(e){n.hideLoad(),console.log(e)}n.showLoad();for(var r=l(),o=[],a=0;a<r.length;a++)o.push(c(r[a]));i.all(o).then(e)["catch"](t)}function c(e){return a.createUserInterest({interest_id:e.id_interest,user_id:v.userAuth.id})}function l(e){function t(e){return e.interests}function n(e){return e.interests}function r(e,t){return e.concat(t)}function o(e){return e.check}return v.categories.filter(t).map(n).reduce(r,[]).filter(o)}function d(){function e(e){n.hideLoad(),v.categories=e}function t(e){n.hideLoad(),console.log(e)}n.showLoad(),o.allCategories().then(e)["catch"](t)}function p(e){function t(t){n.hideLoad(),e.interests=t.interests,g.push(e.id)}function r(e){n.hideLoad(),console.log(e)}h(e),-1==g.indexOf(e.id)&&(n.showLoad(),o.getCategory(e.id).then(t)["catch"](r))}function h(e){f(e)?v.categorySelected=null:v.categorySelected=e}function f(e){return v.categorySelected==e}function m(){0==v.userAuth.type?t.go("organizer.intro"):t.go("sponzor.intro")}var v=this,g=[];v.userAuth=r.userAuth,v.categories=[],v.categorySelected=null,v.updateInterests=u,v.getCategory=p,v.isCategorySelected=f,s()}angular.module("app.users").controller("FormInterestsController",e),e.$inject=["userService","$state","utilsService","$localStorage","categoryService","userInterestService","$q"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){c.userAuth.lang="en",c.userAuth.gender=1,c.userAuth.age="0"==c.userAuth.age?null:parseInt(c.userAuth.age)}function i(e){function a(t){r.hideLoad(),r.resetForm(e),t.age=parseInt(t.age),o.userAuth=r.updateUserAuth(t),c.userAuth={},n.go("interests")}function i(e){r.hideLoad(),console.log(e)}r.showLoad(),t.editUserPatch(c.userAuth.id,s()).then(a)["catch"](i)}function s(){return{name:c.userAuth.name,age:parseInt(c.userAuth.age),location:c.userAuth.location,lang:c.userAuth.lang,sex:parseInt(c.userAuth.sex)}}function u(){e.use(c.userAuth.lang)}var c=this;c.userAuth=o.userAuth||{},c.updateProfile=i,c.changeLang=u,a()}angular.module("app.users").controller("FormProfileController",e),e.$inject=["$translate","userService","$state","utilsService","$localStorage"]}(),function(){"use strict";function e(e,t,n){function r(n){function r(){t.hideLoad(),t.resetForm(n),a.friend={},t.alert({title:"Nice!",template:"Your Invitation was Sent."})}function i(){t.hideLoad()}t.showLoad(),e.invitedUser(o()).then(r)["catch"](i)}function o(){return{user_id:a.userAuth.id,email:a.friend.email,message:"Try this ;)"}}var a=this;a.friend={},a.userAuth=n.userAuth,a.inviteFriend=r}angular.module("app.users").controller("InviteUsersController",e),e.$inject=["userService","utilsService","$localStorage"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s){function u(){t.checkSession()&&(m.userResponse=n.userAuth,d())}function c(r){function i(e){o.hideLoad(),o.resetForm(r),m.userResponse=e,n.token=a.encode(m.user.email+":"+m.user.password),f(),d();var e=Ionic.User.current();e.id||(e.id=m.userResponse.id,e.set("email",m.user.email),e.set("type",m.user.type)),e.save(),m.user={},s.register()}function u(t){o.hideLoad(),"Invalid credentials"===o.trim(t.message)&&o.alert({title:e.instant("ERRORS.signin_title_credentials"),template:e.instant("ERRORS.signin_incorrect_credentials")}),m.user.password=""}o.showLoad(),t.login(m.user.email,m.user.password).then(i)["catch"](u)}function l(){function e(e){console.log(e)}m.userResponse.demo=1,f(),t.editUserPatch(m.userResponse.id,m.userResponse).then(p)["catch"](e)}function d(){0==m.userResponse.demo?l():h()}function p(){0==m.userResponse.type?r.go("organizer.intro"):r.go("sponzor.intro")}function h(){0==m.userResponse.type?r.go("organizer.home"):r.go("sponzor.home")}function f(){n.userAuth=o.updateUserAuth(m.userResponse)}var m=this;m.user={},m.userResponse={},m.signIn=c,u()}angular.module("app.users").controller("LoginController",e),e.$inject=["$translate","userService","$localStorage","$state","utilsService","$base64","$ionicUser","$ionicAnalytics"]}(),function(){"use strict";function e(e,t,n,r,o,a,i){function s(){l.userAuth.age=parseInt(l.userAuth.age),l.userAuth.comunity_size=l.userAuth.comunity_size||0,l.userAuth.comunity_size=parseInt(l.userAuth.comunity_size)}function u(){function e(e){l.imageURI=e,l.userAuth.image="data:image/jpeg;base64,"+e}function t(e){}var r=r||null,o=o||null,a={quality:100,destinationType:r?r.DestinationType.DATA_URL:null,sourceType:r?r.PictureSourceType.PHOTOLIBRARY:null,allowEdit:!0,encodingType:r?r.EncodingType.JPEG:null,targetWidth:500,targetHeight:500,popoverOptions:o,saveToPhotoAlbum:!1};n.getPicture(a).then(e)["catch"](t)}function c(n){function o(t){return l.userAuth.image=t,e.editUserPatch(l.userAuth.id,l.userAuth)}function s(e){t.hideLoad(),t.resetForm(n),l.userAuth=e,l.userAuth.age=parseInt(l.userAuth.age),r.userAuth=t.updateUserAuth(l.userAuth),i.showShortBottom("Su perfil se ha actulizado")}function u(e){t.hideLoad()}t.showLoad(),l.imageURI?a.uploadImage(l.imageURI).then(o).then(s)["catch"](u):e.editUserPatch(l.userAuth.id,l.userAuth).then(s)["catch"](u)}var l=this;l.userAuth=r.userAuth,l.imageURI=null,l.getPhoto=u,l.updateProfile=c,s()}angular.module("app.users").controller("ProfileController",e),e.$inject=["userService","utilsService","$cordovaCamera","$localStorage","$q","imgurService","$cordovaToast"]}(),function(){"use strict";function e(e,t,n,r,o,a){function i(){l.newUser.type=0}function s(i){function s(n){r.hideLoad(),r.resetForm(i),r.alert({title:e.instant("MESSAGES.succ_user_tit"),template:e.instant("MESSAGES.succ_user_mess")}),o.token=a.encode(l.newUser.email+":"+l.newUser.password),l.newUser={},l.newUser.type=0,o.userAuth=n,t.go("profile")}function d(t){r.hideLoad(),"Invalid credentials"===r.trim(t.message)?r.alert({title:e.instant("ERRORS.signin_title_credentials"),template:e.instant("ERRORS.signin_incorrect_credentials")}):"Not inserted"===r.trim(t.message)?r.alert({title:e.instant("ERRORS.signin_notinserted_credentials_title"),template:e.instant("ERRORS.signin_notinserted_credentials_message")}):t.error&&"The email has already been taken."===r.trim(t.error.email)&&r.alert({title:e.instant("ERRORS.signin_taken_credentials_title"),template:e.instant("ERRORS.signin_taken_credentials_message")})}r.showLoad(),n.createUser(u()).then(c).then(s)["catch"](d)}function u(){return{email:l.newUser.email,password:l.newUser.password,password_confirmation:l.newUser.password,name:l.newUser.name,lang:"en",type:l.newUser.type}}function c(){return n.login(l.newUser.email,l.newUser.password)}var l=this;l.newUser={},l.registerNewUser=s,i()}angular.module("app.users").controller("RegisterController",e),e.$inject=["$translate","$state","userService","utilsService","$localStorage","$base64"]}(),function(){function e(e,t,n,r){function o(){r.setChannel("production")}function a(){e.use(u.lang)}function i(){function n(n){function r(e){e&&u.doUpdate()}t.hideLoad(),n?t.confirm({title:e.instant("MESSAGES.update_title"),template:'<p class="text-center">'+e.instant("MESSAGES.update_text")+"</p>"}).then(r):t.alert({title:e.instant("MESSAGES.update_title"),template:'<p class="text-center">'+e.instant("MESSAGES.update_text_nothing")+"</p>"})}function o(){t.hideLoad()}t.showLoad(),r.check().then(n)["catch"](o)}function s(){function o(){t.hideLoad(),n.showShortBottom(e.instant("MESSAGES.update_success"))}function a(){t.hideLoad(),t.alert()}t.showLoad(),r.update().then(o)["catch"](a)}var u=this;u.lang=e.use(),u.save=a,u.checkForUpdates=i,u.doUpdate=s,o()}angular.module("app.users").controller("SettingsController",e),e.$inject=["$translate","utilsService","$cordovaToast","$ionicDeploy"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s,u){function c(){h.idEvent=i.idEvent,h.idPerk=i.idPerk,h.idOrganizer=i.idOrganizer,h.idSponsorship=i.idSponsorship}function l(e){function n(e){return u.createTask(p(e))}function r(t){o.hideLoad(),o.resetForm(e),h.newTask={},s.nextViewOptions({disableAnimate:!1,disableBack:!0}),s.clearCache().then(function(){s.goBack()})}function a(e){o.hideLoad(),console.log(e)}o.showLoad(),t.createPerkTask(d()).then(n).then(r)["catch"](a)}function d(){return{user_id:h.userAuth.id,event_id:h.idEvent,perk_id:h.idPerk,title:h.newTask.title,description:h.newTask.description,type:1,status:0}}function p(e){return{task_id:e.id,perk_id:h.idPerk,sponzor_id:h.userAuth.id,organizer_id:h.idOrganizer,event_id:h.idEvent,sponzorship_id:h.idSponsorship}}var h=this;h.newTask={},h.userAuth=e.userAuth,h.createTask=l,h.idEvent=null,h.idPerk=null,h.idOrganizer=null,h.idSponsorship=null,c()}angular.module("app.tasks-sponsor").controller("AddTaskSponsorController",e),e.$inject=["$localStorage","perkTaskService","perkService","userService","utilsService","$state","$stateParams","$ionicHistory","tasksSponsorService"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s,u,c){function l(){d()}function d(){function e(e){o.hideLoad(),m(e[0]),v(e[1]),g(e[2])}function a(e){o.hideLoad(),console.log(e)}o.showLoad();var s=[r.getUser(w.userAuth.id),n.allPerks(),t.getPerkTask(i.id)];
u.all(s).then(e)["catch"](a)}function p(e){function n(t){o.hideLoad(),o.resetForm(e),w.newTask={},s.nextViewOptions({disableAnimate:!1,disableBack:!0}),s.clearCache().then(function(){s.goBack()})}function r(e){o.hideLoad(),console.log(e)}o.showLoad(),t.editPerkTaskPatch(i.id,f()).then(n)["catch"](r)}function h(){function e(e){w.newTask={},s.nextViewOptions({disableAnimate:!1,disableBack:!0}),a.go("organizer.tasks")}function n(e){o.hideLoad(),o.alert({template:e.data.message})}o.showLoad(),t.deletePerkTask(i.id).then(e)["catch"](n)}function f(){return{user_id:w.userAuth.id,event_id:w.newTask.event.id,perk_id:w.newTask.perk.id,title:w.newTask.title,description:w.newTask.description,type:0,status:w.newTask.status?"1":"0"}}function m(e){w.events=e.events}function v(e){w.perks=e}function g(e){w.newTask=e,w.newTask.status="1"==e.status?!0:!1;for(var t=0;t<w.events.length;t++)if(w.events[t].id==w.newTask.event_id){w.newTask.event=w.events[t];break}for(var t=0;t<w.perks.length;t++)if(w.perks[t].id==w.newTask.perk.id){w.newTask.perk=w.perks[t];break}}var w=this;w.newTask={},w.userAuth=e.userAuth,w.events=[],w.perks=[],w.editTask=p,w.deleteTask=h,l()}angular.module("app.tasks-sponsor").controller("EditTaskSponsorController",e),e.$inject=["$localStorage","perkTaskService","perkService","userService","utilsService","$state","$stateParams","$ionicHistory","$q","tasksSponsorService"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s,u,c){function l(){d(),i.fromTemplateUrl("app/events-sponsor/sponsor-it-modal.html",{scope:e,animation:"slide-in-up"}).then(function(e){S.modalSponsorIt=e})}function d(){function e(e){n.hideLoad(),S.event=e,S.idSponsorShip=p(S.event.sponzorships).id,S.perks_sponsorships=m(angular.copy(S.event)),S.tasks_organizer=f(angular.copy(S.event)),S.tasks_sponsor=h(angular.copy(S.event))}function o(e){n.hideLoad()}n.showLoad(),t.getEvent(r.idEvent).then(e)["catch"](o)}function p(e){return e=e.filter(function(e){return e.sponzor_id==S.userAuth.id}),e.length>0?e[0]:null}function h(e){for(var t=v(e),n=0;n<t.length;n++)t[n].tasks=_.where(e.perk_tasks.filter(g),{perk_id:t[n].id});return t}function f(e){for(var t=e.perks,n=0;n<t.length;n++)t[n].tasks=_.where(e.perk_tasks.filter(w),{perk_id:t[n].id});return t}function m(e){for(var t=e.perks,n=0;n<t.length;n++)t[n].sponsorships=_.where(e.sponzorships,{perk_id:t[n].id});return t}function v(e){for(var t=[],n=0;n<e.sponzorships.length;n++)e.sponzorships[n].sponzor_id==S.userAuth.id&&t.push(e.sponzorships[n].perk_id);return e.perks.filter(function(e){return-1!==t.indexOf(e.id)})}function g(e){return"1"==e.type&&S.userAuth.id==e.user_id}function w(e){return"0"==e.type}var S=this;S.event={},S.userAuth=a.userAuth,S.tasks_organizer=[],S.tasks_sponsor=[],S.perks_sponsorships=[],S.idSponsorShip=null,l()}angular.module("app.events-sponzor").controller("EventDetailTasksSponzorController",e),e.$inject=["$scope","eventService","utilsService","$stateParams","sponsorshipService","$localStorage","$ionicModal","$ionicHistory","$cordovaToast","$translate"]}(),function(){"use strict";function e(e,t,n,r,o,a,i,s,u,c){function l(){d(),i.fromTemplateUrl("app/events-sponsor/sponsor-it-modal.html",{scope:e,animation:"slide-in-up"}).then(function(e){S.modalSponsorIt=e})}function d(){function e(e){n.hideLoad(),S.event=e,S.perks=p(S.event)}function o(e){n.hideLoad()}n.showLoad(),t.getEvent(r.idEvent).then(e)["catch"](o)}function p(e){for(var t=e.perks,n=0;n<t.length;n++)t[n].sponsorships=_.where(e.sponzorships,{perk_id:t[n].id}),t[n].tasks=_.where(e.perk_tasks.filter(h),{perk_id:t[n].id});return t}function h(e){return"0"==e.type}function f(){S.modalSponsorIt.show()}function m(){S.modalSponsorIt.hide(),S.newSponsorIt={}}function v(e){S.newSponsorIt.perk=e,S.openModalSponsorIt()}function g(){function e(e){S.closeModalSponsorIt(),s.clearCache(),u.showShortBottom(c.instant("MESSAGES.succ_sponsor_it"))}function t(e){S.closeModalSponsorIt()}o.createSponzorship(w()).then(e)["catch"](t)}function w(){return{sponzor_id:S.userAuth.id,perk_id:S.newSponsorIt.perk.id,event_id:S.event.id,organizer_id:S.event.organizer.id,status:0,cause:S.newSponsorIt.cause}}var S=this;S.event={},S.userAuth=a.userAuth,S.perks=[],S.modalSponsorIt=null,S.newSponsorIt={},S.openModalSponsorIt=f,S.closeModalSponsorIt=m,S.createSponsorIt=v,S.submitSponsorIt=g,l()}angular.module("app.events-sponzor").controller("EventDetailSponzorController",e),e.$inject=["$scope","eventService","utilsService","$stateParams","sponsorshipService","$localStorage","$ionicModal","$ionicHistory","$cordovaToast","$translate"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){i()}function i(){function e(e){t.hideLoad(),c.events=e.filter(u),c.showEmptyState=0==c.events.length?!0:!1}function r(e){t.hideLoad(),c.showEmptyState=!0}t.showLoad(),n.sponzorshipBySponzor(c.userAuth.id).then(e)["catch"](r)}function s(){function e(e){r.$broadcast("scroll.refreshComplete"),c.events=e.filter(u),o.$broadcast("Menu:count_following",c.events.length)}function t(e){r.$broadcast("scroll.refreshComplete")}n.sponzorshipBySponzor(c.userAuth.id).then(e)["catch"](t)}function u(e){return"1"!=e.status}var c=this;c.userAuth=e.userAuth,c.events=[],c.showEmptyState=!1,c.doRefresh=s,a()}angular.module("app.events-sponzor").controller("FollowEventsController",e),e.$inject=["$localStorage","utilsService","sponsorshipService","$scope","$rootScope"]}(),function(){"use strict";function e(e,t,n,r,o){function a(){i()}function i(){function e(e){t.hideLoad(),c.events=e.filter(u),c.showEmptyState=0==c.events.length?!0:!1}function r(e){t.hideLoad(),c.showEmptyState=!0}t.showLoad(),n.sponzorshipBySponzor(c.userAuth.id).then(e)["catch"](r)}function s(){function e(e){r.$broadcast("scroll.refreshComplete"),c.events=e.filter(u),o.$broadcast("Menu:count_sponsoring",c.events.length)}function t(e){r.$broadcast("scroll.refreshComplete")}n.sponzorshipBySponzor(c.userAuth.id).then(e)["catch"](t)}function u(e){return"1"==e.status}var c=this;c.userAuth=e.userAuth,c.events=[],c.showEmptyState=!1,c.doRefresh=s,a()}angular.module("app.events-sponzor").controller("SponzoringEventsController",e),e.$inject=["$localStorage","utilsService","sponsorshipService","$scope","$rootScope"]}();