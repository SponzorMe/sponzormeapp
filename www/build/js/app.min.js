!function(){"use strict";angular.module("app",["ionic","ionic.service.core","ngCordova","ngMessages","ngStorage","ngIOS9UIWebViewPatch","pascalprecht.translate","base64","tabSlideBox","app.widgets","app.users","app.dashboard-organizer","app.dashboard-sponzor","app.events-organizer","app.events-sponzor","app.sponsors-organizer","app.tasks-organizer"])}(),function(){"use strict";function e(e,t,n,o){function r(){function e(){var e=JSON.parse(localStorage.getItem("ngStorage-userAuth"));return 0==e.type?"/organizer/home":"/sponzor/home"}return localStorage.getItem("ngStorage-token")&&localStorage.getItem("ngStorage-userAuth")?e():"/sign-in"}o.views.swipeBackEnabled(!1),t.otherwise(r()),e.state("signin",{url:"/sign-in",templateUrl:"app/users/login.html",controller:"LoginController as login"}).state("joinnow",{url:"/joinnow",templateUrl:"app/users/register.html",controller:"RegisterController as register"}).state("profile",{url:"/profile",templateUrl:"app/users/form-profile.html",controller:"FormProfileController as profile",cache:!1}).state("interests",{url:"/interests",templateUrl:"app/users/form-interests.html",controller:"FormInterestsController as interests",cache:!1}).state("forgot-password",{url:"/forgot-password",templateUrl:"app/users/forgot-password.html",controller:"ForgotController as forgot"}).state("organizer",{url:"/organizer","abstract":!0,templateUrl:"app/dashboard-organizer/menu.html",controller:"MenuOrganizerCtrl as menu"}).state("organizer.intro",{url:"/intro",views:{menuContent:{templateUrl:"app/dashboard-organizer/intro.html",controller:"IntroOrganizerCtrl as intro"}}}).state("organizer.home",{url:"/home",views:{menuContent:{templateUrl:"app/dashboard-organizer/home.html",controller:"HomeOrganizerController as home"}}}).state("organizer.profile",{url:"/profile",views:{menuContent:{templateUrl:"app/users/profile.html",controller:"ProfileController as profile"}},cache:!1}).state("organizer.events",{url:"/events","abstract":!0,views:{menuContent:{templateUrl:"app/events-organizer/event-list-tabs.html"}}}).state("organizer.events.list",{url:"/list",views:{tabEventList:{templateUrl:"app/events-organizer/event-list.html",controller:"EventListController as eventList"}},cache:!1}).state("organizer.events.detail-list",{url:"/event/:idEvent",views:{tabEventList:{templateUrl:"app/events-organizer/event-detail.html",controller:"EventDetailOrganizerController as eventDetail"}},cache:!1}).state("organizer.events.past",{url:"/past",views:{tabPastEvents:{templateUrl:"app/events-organizer/past-events.html",controller:"PastEventsController as eventList"}},cache:!1}).state("organizer.events.detail-past",{url:"/past-event/:idEvent",views:{tabPastEvents:{templateUrl:"app/events-organizer/event-detail.html",controller:"EventDetailOrganizerController as eventDetail"}},cache:!1}).state("organizer.addevent",{url:"/addevent",views:{menuContent:{templateUrl:"app/events-organizer/add-event.html",controller:"AddEventController as addEvent"}}}).state("organizer.editevent",{url:"/editevent/:id",views:{menuContent:{templateUrl:"app/events-organizer/edit-event.html",controller:"EditEventController as editEvent"}},cache:!1}).state("organizer.event",{url:"/event/:idEvent",views:{menuContent:{templateUrl:"app/events-organizer/event-detail.html",controller:"EventDetailOrganizerController as eventDetail"}},cache:!1}).state("organizer.sponsors",{url:"/sponsors",views:{menuContent:{templateUrl:"app/sponsors-organizer/sponzor-list.html",controller:"SponzorListController as sponzorList"}},cache:!1}).state("organizer.sponzor",{url:"/sponzor/:id",views:{menuContent:{templateUrl:"app/sponsors-organizer/sponzor-detail.html",controller:"SponsorshipDetailController as sponzorDetail"}},cache:!1}).state("organizer.tasks",{url:"/tasks",views:{menuContent:{templateUrl:"app/tasks-organizer/task-list.html",controller:"TaskListController as taskList"}},cache:!1}).state("organizer.addTask",{url:"/addTask",views:{menuContent:{templateUrl:"app/tasks-organizer/add-task.html",controller:"AddTaskController as addTask"}},cache:!1}).state("organizer.editTask",{url:"/editTask/:id",views:{menuContent:{templateUrl:"app/tasks-organizer/edit-task.html",controller:"EditTaskController as editTask"}},cache:!1}).state("organizer.invite",{url:"/invite",views:{menuContent:{templateUrl:"app/users/invite-users.html",controller:"InviteUsersController as invite"}}}).state("organizer.settings",{url:"/settings",views:{menuContent:{templateUrl:"app/users/settings.html",controller:"SettingsController as settings"}}}).state("sponzor",{url:"/sponzor","abstract":!0,templateUrl:"app/dashboard-sponzor/menu.html",controller:"MenuSponzorCtrl as menu"}).state("sponzor.intro",{url:"/intro",views:{menuContent:{templateUrl:"app/dashboard-sponzor/intro.html",controller:"IntroSponzorCtrl as intro"}}}).state("sponzor.home",{url:"/home",views:{menuContent:{templateUrl:"app/dashboard-sponzor/home.html",controller:"HomeSponzorController as home"}},cache:!1}).state("sponzor.following",{url:"/following",views:{menuContent:{templateUrl:"app/events-sponzor/follow-events.html",controller:"FollowEventsController as follow"}},cache:!1}).state("sponzor.sponzoring",{url:"/sponzoring",views:{menuContent:{templateUrl:"app/events-sponzor/sponzoring-events.html",controller:"SponzoringEventsController as sponzoring"}},cache:!1}).state("sponzor.profile",{url:"/profile",views:{menuContent:{templateUrl:"app/users/profile.html",controller:"ProfileController as profile"}},cache:!1}).state("sponzor.event",{url:"/event/:idEvent",views:{menuContent:{templateUrl:"app/events-sponzor/event-detail.html",controller:"EventDetailSponzorController as eventDetail"}}}).state("sponzor.invite",{url:"/invite",views:{menuContent:{templateUrl:"app/users/invite-users.html",controller:"InviteUsersController as invite"}}}).state("sponzor.settings",{url:"/settings",views:{menuContent:{templateUrl:"app/users/settings.html",controller:"SettingsController as settings"}}}),n.useStaticFilesLoader({prefix:"langs/lang-",suffix:".json"}),n.useSanitizeValueStrategy("escaped"),n.preferredLanguage("en"),n.fallbackLanguage("en")}angular.module("app").config(e)}(),function(){"use strict";angular.module("app").constant("moment",moment)}(),function(){"use strict";function e(e,t,n,o){e.ready(function(){function e(e){var n=e.value.split("-")[0],r={es:"¿Quieres cambiar el lenguaje a Español?",en:" Do you want changue the language to English?",pt:"¿Você quer mudar a língua para Português?"};o.confirm({title:"Language",template:'<p class="text-center">'+r[n]+"</p>"}).then(function(e){e?t.use(n):t.use("en")})}function r(e){t.use("en")}n.getPreferredLanguage().then(e)["catch"](r),window.cordova&&window.cordova.plugins.Keyboard&&cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault()})}angular.module("app").run(e)}(),function(){"use strict";angular.module("app").value("BackendVariables",{url:"http://apilocal.sponzor.me/",ready:"false"}).value("gAnalytics",{trackCode:"UA-54490148-5"}).value("AMAZON",{AMAZONSECRET:"RlzqEBFUlJW/8YGkeasfmTZRLTlWMWwaBpJNBxu6",AMAZONKEY:"AKIAJDGUKWK3H7SJZKSQ",AMAZONBUCKET:"sponzormewebappimages",AMAZONBUCKETREGION:"us-west-2",AMAZONBUCKETURL:"https://s3-us-west-2.amazonaws.com/sponzormewebappimages/"})}(),function(){"use strict";function e(e,t,n){function o(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function t(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}return t()+".jpg"}function r(e){function r(e){return console.log(e),t.when(s+u)}function c(e){return console.log(e),t.reject(e)}var u=o(),l=e,p={};return p.fileKey="file",p.fileName=l.substr(l.lastIndexOf("/")+1),p.mimeType="image/jpeg",p.chunkedMode=!1,p.params={AWSAccessKeyId:a,Key:l,ContentType:"image/jpeg"},n.upload(i,l,p).then(r)["catch"](c)}var a=e.AMAZONKEY,s=(e.AMAZONSECRET,e.AMAZONBUCKETREGION,e.AMAZONBUCKETURL),i="https://"+e.AMAZONBUCKET+".s3.amazonaws.com/",c={uploadImage:r};return c}angular.module("app").factory("awsImageService",e),e.$inject=["AMAZON","$q","$cordovaFileTransfer"]}(),function(){"use strict";function e(e,t,n,o,r){function a(){function t(e){return o.when(e.data.categories)}function n(e){return o.reject(e.data)}return e.get(i+"categories").then(t)["catch"](n)}function s(t){function n(e){return o.when(e.data.data.category)}function r(e){return o.reject(e.data)}return e.get(i+"categories/"+t).then(n)["catch"](r)}var i=n.url,c={allCategories:a,getCategory:s};return c}angular.module("app").factory("categoryService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,o,r){function a(){function t(e){var t=n(e.data.events);return o.when(t)}function n(e){function t(e){return e.image="event_dummy.png"==e.image?"img/banner.jpg":e.image,e.starts=moment(e.starts)._d,e.ends=moment(e.ends)._d,e}return e.map(t)}function r(e){return o.reject(e)}return e.get(d+"events").then(t)["catch"](r)}function s(t){function n(e){function t(e){var t=e.event;t.image="event_dummy.png"==t.image?"img/banner.jpg":t.image,t.category=0===e.category.length?t.category:e.category[0],t.type=0===e.type.length?t.type:e.type[0],t.organizer=0===e.organizer.length?t.organizer:e.organizer[0],t.organizer.image="organizer_sponzorme.png"==t.organizer.image?"img/photo.png":t.organizer.image,t.sponzorships=e.sponzorships,t.starts=moment(t.starts)._d,t.ends=moment(t.ends)._d;for(var n=0;n<t.perks.length;n++){t.perks[n].tasks=[];for(var o=0;o<t.perk_tasks.length;o++)t.perks[n].id==t.perk_tasks[o].perk_id&&t.perks[n].tasks.push(t.perk_tasks[o])}return t}return o.when(t(e.data.data))}function r(e){return o.reject(e)}return e.get(d+"events/"+t).then(n)["catch"](r)}function i(t){function n(e){return o.when(e.data.event)}function a(e){return o.reject(e)}return e({method:"POST",url:d+"events",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()},data:r(t)}).then(n)["catch"](a)}function c(t){function n(e){return o.when(e.data)}function r(e){return o.reject(e.data)}return e({method:"DELETE",url:d+"events/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()}}).then(n)["catch"](r)}function u(t,n){function a(e){return o.when(e.data.event)}function s(e){return o.reject(e.data)}return e({method:"PATCH",url:d+"events/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()},data:r(n)}).then(a)["catch"](s)}function l(t,n){function a(e){return o.when(e.data.data.event)}function s(e){return o.reject(e.data)}return e({method:"PUT",url:d+"events/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()},data:r(n)}).then(a)["catch"](s)}function p(){return t.token}var d=n.url,h=(t.token,{allEvents:a,getEvent:s,createEvent:i,deleteEvent:c,editEventPatch:u,editEventPut:l});return h}angular.module("app").factory("eventService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,o,r){function a(){function t(e){return o.when(e.data.eventTypes)}function n(e){return o.reject(e)}return e.get(d+"event_types").then(t)["catch"](n)}function s(t){return e.get(d+"event_types/"+t)}function i(t){return e({method:"POST",url:d+"event_types",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()},data:r(t)})}function c(t){return e({method:"DELETE",url:d+"event_types/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()}})}function u(t,n){return e({method:"PATCH",url:d+"event_types/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()},data:r(n)})}function l(t,n){return e({method:"PUT",url:d+"event_types/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()},data:r(n)})}function p(){return t.token}var d=n.url,h={allEventTypes:a,getEventTypes:s,createEventType:i,deleteEventType:c,editEventTypePatch:u,editEventTypePut:l};return h}angular.module("app").factory("eventTypeService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t){function n(n){function a(e){return t.when(e.data.data.link)}function s(e){return t.reject(e.data.data)}return e({method:"POST",url:o+"image",headers:{Authorization:"Client-ID "+r},data:{image:n,type:"base64"}}).then(a)["catch"](s)}var o="https://api.imgur.com/3/",r="bdff09d775f47b9",a={uploadImage:n};return a}angular.module("app").factory("imgurService",e),e.$inject=["$http","$q"]}(),function(){"use strict";function e(e,t,n,o,r){function a(){function t(e){return o.when(e.data.Perk)}function n(e){return o.reject(e)}return e.get(d+"perks").then(t)["catch"](n)}function s(t){function n(e){return o.when(e)}function r(e){return o.reject(e)}return e.get(d+"perks/"+t).then(n)["catch"](r)}function i(t){function n(e){return o.when(e.data.PerkTask)}function a(e){return o.reject(e)}return e({method:"POST",url:d+"perks",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()},data:r(t)}).then(n)["catch"](a)}function c(t){function n(e){return o.when(e)}function r(e){return o.reject(e.data)}return e({method:"DELETE",url:d+"perks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()}}).then(n)["catch"](r)}function u(t,n){function a(e){return o.when(e)}function s(e){return o.reject(e)}return e({method:"PATCH",url:d+"perks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()},data:r(n)}).then(a)["catch"](s)}function l(t,n){function a(e){return o.when(e)}function s(e){return o.reject(e)}return e({method:"PUT",url:d+"perks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+p()},data:r(n)}).then(a)["catch"](s)}function p(){return t.token}var d=n.url,h=(t.token,{allPerks:a,getPerk:s,createPerk:i,deletePerk:c,editPerkPatch:u,editPerkPut:l});return h}angular.module("app").factory("perkService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,o,r){function a(){function t(e){return r.when(n(e.data.PerkTasks))}function n(e){function t(e,t){return{title:t,tasks:e}}var n=_.groupBy(e,"eventTitle");return _.map(n,t)}function o(e){return r.reject(e)}return e.get(f+"perk_tasks").then(t)["catch"](o)}function s(t){function n(e){return r.when(o(e.data.data))}function o(e){var t=e.PerkTask;return t.event=e.Event,t.perk=e.Perk,t}function a(e){return r.reject(e)}return e.get(f+"perk_tasks/"+t).then(n)["catch"](a)}function i(t){function n(e){return r.when(o(e.data.PerkTasks))}function o(e){function t(e,t){return{title:t,tasks:e}}var n=_.groupBy(e,"eventTitle");return _.map(n,t)}function a(){return r.reject(error)}return e.get(f+"perk_tasks_organizer/"+t).then(n)["catch"](a)}function c(t){function n(e){return r.when(e.data.PerkTasks)}function o(e){return r.reject(e)}return e.get(f+"perk_tasks_organizer/"+t).then(n)["catch"](o)}function u(t){function n(e){return r.when(e.data)}function a(e){return r.reject(e)}return e({method:"POST",url:f+"perk_tasks",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()},data:o(t)}).then(n)["catch"](a)}function l(t){function n(e){return r.when(e.data)}function o(e){return r.reject(e)}return e({method:"DELETE",url:f+"perk_tasks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()}}).then(n)["catch"](o)}function p(t,n){function a(e){return r.when(e.data)}function s(e){return r.reject(e)}return e({method:"PATCH",url:f+"perk_tasks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()},data:o(n)}).then(a)["catch"](s)}function d(t,n){function a(e){return r.when(e.data)}function s(e){return r.reject(e)}return e({method:"PUT",url:f+"perk_tasks/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()},data:o(n)}).then(a)["catch"](s)}function h(){return t.token}var f=n.url,m={allPerkTasks:a,getPerkTask:s,createPerkTask:u,deletePerkTask:l,editPerkTaskPatch:p,editPerkTaskPut:d,getPerkTaskByOrganizer:c,getPerkTaskByOrganizerGroup:i};return m}angular.module("app").factory("perkTaskService",e),e.$inject=["$http","$localStorage","BackendVariables","$httpParamSerializerJQLike","$q"]}(),function(){"use strict";function e(e,t,n,o,r){function a(){function t(e){return o.when(e)}function n(e){return o.reject(e)}return e.get(f+"sponzorships").then(t)["catch"](n)}function s(t){function n(e){return o.when(r(e.data.data))}function r(e){var t=e.SponzorEvent;return t.sponzor=e.Sponzor||{},t.perk=e.Perk||{},t.organizer=e.Organizer||{},t.event=e.Event||{},t}function a(e){return o.reject(e)}return e.get(f+"sponzorships/"+t).then(n)["catch"](a)}function i(t){function n(e){return o.when(r(e.data.SponzorsEvents))}function r(e){function t(e){return e.starts=moment(e.starts)._d,e}function n(e){return moment(e.ends).isAfter(new Date)}return e.filter(n).map(t)}function a(e){return o.reject(e)}return e.get(f+"sponzorships_organizer/"+t).then(n)["catch"](a)}function c(t){function n(e){return o.when(r(e.data.SponzorsEvents))}function r(e){function t(e){return e.starts=moment(e.starts)._d,e}return e.map(t)}function a(e){return o.reject(e)}return e.get(f+"sponzorships_sponzor/"+t).then(n)["catch"](a)}function u(t){function n(e){return o.when(e.data.Sponzorship)}function a(e){return o.reject(e.data)}return e({method:"POST",url:f+"sponzorships",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()},data:r(t)}).then(n)["catch"](a)}function l(t){function n(e){return o.when(e)}function r(e){return o.reject(e)}return e({method:"DELETE",url:f+"sponzorships/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()}}).then(n)["catch"](r)}function p(t,n){function a(e){return o.when(e)}function s(e){return o.reject(e)}return e({method:"PATCH",url:f+"sponzorships/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()},data:r(n)}).then(a)["catch"](s)}function d(t,n){function a(e){return o.when(e.data.Sponzorship)}function s(e){return o.reject(responses)}return e({method:"PUT",url:f+"sponzorships/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+h()},data:r(n)}).then(a)["catch"](s)}function h(){return t.token}var f=n.url,m=(t.token,{allSponzorships:a,getSponzorship:s,sponzorshipByOrganizer:i,sponzorshipBySponzor:c,createSponzorship:u,deleteSponzorship:l,editSponzorshipPatch:p,editSponzorshipPut:d});return m}angular.module("app").factory("sponzorshipService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,o,r){function a(t,n){function a(e){return o.when(e.data.user)}function s(e){return o.reject(e.data)}return e({method:"POST",url:g+"auth",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:r({email:t,password:n})}).then(a)["catch"](s)}function s(){return e.get(g+"users")}function i(t){function n(e){var t=e.data.data.user;return t.events=r(t.events),o.when(t)}function r(e){function t(e){return e.image="event_dummy.png"==e.image?"img/banner.jpg":e.image,e.starts=moment(e.starts)._d,e.ends=moment(e.ends)._d,e}return e.map(t)}function a(e){return o.reject(e.data)}return e({method:"GET",url:g+"users/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+m()}}).then(n)["catch"](a)}function c(t){function n(e){return o.when(e.data)}function a(e){return o.reject(e.data)}return e({method:"POST",url:g+"users",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+m()},data:r(t)}).then(n)["catch"](a)}function u(t){return e({method:"DELETE",url:g+"users/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+m()}})}function l(t,n){function a(e){return o.when(e.data.User)}function s(e){return o.reject(e)}return e({method:"PATCH",url:g+"users/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+m()},data:r(n)}).then(a)["catch"](s)}function p(t,n){function a(e){return o.when(e.data.User)}function s(e){return o.reject(e)}return e({method:"PUT",url:g+"users/"+t,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+m()},data:r(n)}).then(a)["catch"](s)}function d(t){function n(e){return o.when(e)}function a(e){return o.reject(e.data)}return e({method:"POST",url:g+"send_reset_password/",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+m()},data:r(t)}).then(n)["catch"](a)}function h(t){return e({method:"POST",url:g+"invite_friend/",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+m()},data:r(t)})}function f(){return angular.isDefined(t.token)&&angular.isDefined(t.userAuth)?!0:!1}function m(){return t.token}var g=n.url,v={login:a,allUsers:s,getUser:i,createUser:c,deleteUser:u,editUserPatch:l,editUserPut:p,forgotPassword:d,invitedUser:h,checkSession:f};return v}angular.module("app").factory("userService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,o,r){function a(){return t.token}function s(t){function n(e){return o.when(e.data.UserInterest)}function s(e){return o.reject(e.data)}return e({method:"POST",url:i+"user_interests",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+a()},data:r(t)}).then(n)["catch"](s)}var i=n.url,c={createUserInterest:s};return c}angular.module("app").factory("userInterestService",e),e.$inject=["$http","$localStorage","BackendVariables","$q","$httpParamSerializerJQLike"]}(),function(){"use strict";function e(e,t,n,o){function r(){e.show({animation:"fade-in",showBackdrop:!1,maxWidth:200,showDelay:500})}function a(){e.hide()}function s(e){return e.title=e.title||"Ocurrió un error.",e.template=e.template||"Intento de nuevo.",t.alert(e)}function i(e){return e.title=e.title||"¿ Estas seguro ?",e.template=e.template||"Estas seguro de eliminar.",t.confirm(e)}function c(e){return e=e.toString(),e.replace(/^\s+|\s+$/g,"")}function u(e){e&&(e.$setPristine(),e.$setUntouched())}function l(e){return angular.extend(o.userAuth||{},e)}var p={showLoad:r,hideLoad:a,alert:s,confirm:i,trim:c,resetForm:u,updateUserAuth:l};return p}angular.module("app").factory("utilsService",e),e.$inject=["$ionicLoading","$ionicPopup","$translate","$localStorage"]}(),function(){"use strict";angular.module("app.dashboard-organizer",[])}(),function(){"use strict";angular.module("app.dashboard-sponzor",[])}(),function(){"use strict";angular.module("app.events-organizer",[])}(),function(){"use strict";angular.module("app.events-sponzor",[])}(),function(){"use strict";angular.module("app.sponsors-organizer",[])}(),function(){"use strict";angular.module("app.tasks-organizer",[])}(),function(){"use strict";angular.module("app.users",[])}(),function(){"use strict";angular.module("app.widgets",[])}(),function(){"use strict";function e(){var e={restrict:"E",transclude:!0,scope:{edit:"=edit"},template:'<div class="spm-crop"><i ng-show="edit" class="icon ion-edit edit"></i><ng-transclude></ng-transclude></div>'};return e}angular.module("app.widgets").directive("spmCropImage",e),e.$inject=[]}(),function(){"use strict";function e(e){function t(t,n){e.hideTabs="tabs-item-hide",t.$on("$destroy",function(){e.hideTabs=""})}var n={restrict:"A",link:t};return n}angular.module("app.widgets").directive("spmHideTabs",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(e,t){function n(n){function o(){a.message=e.isOffline(),t.$on("$cordovaNetwork:online",r),t.$on("$cordovaNetwork:offline",r)}function r(t,n){a.message=e.isOffline()}var a=this;a.message=!1,o()}var o={restrict:"E",controller:n,controllerAs:"vm",templateUrl:"app/widgets/network-message.html"};return o}angular.module("app.widgets").directive("spmNetworkMessage",e),e.$inject=["$cordovaNetwork","$rootScope"]}(),function(){"use strict";function e(e,t,n,o,r){function a(){s()}function s(){function e(e){n.hideLoad(),i(e[0]),c(e[1])}function a(e){n.hideLoad(),console.log(e)}n.showLoad();var s=[t.getUser(u.userAuth.id),o.sponzorshipByOrganizer(u.userAuth.id)];r.all(s).then(e)["catch"](a)}function i(e){function t(e){return moment(e.ends).isAfter(new Date)}u.count_events=e.events.filter(t).length,u.count_comunity=e.comunity_size||0}function c(e){u.count_sponsors=e.length}var u=this;u.count_events=0,u.count_sponsors=0,u.count_comunity=0,u.userAuth=e.userAuth,a()}angular.module("app.dashboard-organizer").controller("HomeOrganizerController",e),e.$inject=["$localStorage","userService","utilsService","sponzorshipService","$q"]}(),function(){"use strict";function e(e,t,n,o){function r(){o.canDragContent(!1)}function a(){n.nextViewOptions({disableAnimate:!0,disableBack:!0}),e.go("organizer.home")}function s(){t.next()}function i(){t.previous()}function c(e){u.slideIndex=e}var u=this;u.slideIndex=0,u.startApp=a,u.nextSlide=s,u.previousSlide=i,u.slideChanged=c,r()}angular.module("app.dashboard-organizer").controller("IntroOrganizerCtrl",e),e.$inject=["$state","$ionicSlideBoxDelegate","$ionicHistory","$ionicSideMenuDelegate"]}(),function(){"use strict";function e(e,t,n,o,r,a){function s(){t.$reset(),e.go("signin")}function i(){n.$on("Menu:count_events",c),n.$on("Menu:count_sponsors",u),n.$on("Menu:count_tasks",l),p(),h(),f()}function c(e,t){g.count_events=t}function u(e,t){g.count_sponsors=t}function l(e,t){g.count_tasks=t}function p(){function e(e){g.count_events=e.events.filter(d).length}function t(e){console.log(e)}o.getUser(g.userAuth.id).then(e)["catch"](t)}function d(e){return moment(e.ends).isAfter(new Date)}function h(){function e(e){g.count_sponsors=e.length}function t(e){console.log(e)}r.sponzorshipByOrganizer(g.userAuth.id).then(e)["catch"](t)}function f(){function e(e){g.count_tasks=e.filter(m).length}function t(e){console.log(e)}a.getPerkTaskByOrganizer(g.userAuth.id).then(e)["catch"](t)}function m(e){return"1"!=e.status}var g=this;g.userAuth=t.userAuth,g.count_events=0,g.count_sponsors=0,g.count_tasks=0,g.logout=s,i()}angular.module("app.dashboard-organizer").controller("MenuOrganizerCtrl",e),e.$inject=["$state","$localStorage","$rootScope","userService","sponzorshipService","perkTaskService"]}(),function(){"use strict";function e(e,t,n,o,r){function a(){s()}function s(){function e(e){o.hideLoad(),u.events=e.filter(c)}function t(e){o.hideLoad(),console.log(e)}o.showLoad(),n.allEvents().then(e)["catch"](t)}function i(){function e(e){u.events=e.filter(c),r.$broadcast("scroll.refreshComplete")}function t(e){console.log(e)}n.allEvents().then(e)["catch"](t)}function c(e){return moment(e.ends).isAfter(new Date)}var u=this;u.userAuth=t.userAuth,u.events=[],u.doRefresh=i,a()}angular.module("app.dashboard-sponzor").controller("HomeSponzorController",e),e.$inject=["$translate","$localStorage","eventService","utilsService","$scope"]}(),function(){"use strict";function e(e,t,n,o){function r(){o.canDragContent(!1)}function a(){n.nextViewOptions({disableAnimate:!0,disableBack:!0}),e.go("sponzor.home")}function s(){t.next()}function i(){t.previous()}function c(e){u.slideIndex=e}var u=this;u.slideIndex=0,u.startApp=a,u.nextSlide=s,u.previousSlide=i,u.slideChanged=c,r()}angular.module("app.dashboard-sponzor").controller("IntroSponzorCtrl",e),e.$inject=["$state","$ionicSlideBoxDelegate","$ionicHistory","$ionicSideMenuDelegate"]}(),function(){"use strict";function e(e,t,n,o){function r(){o.$on("Menu:count_following",a),o.$on("Menu:count_sponsoring",s),c()}function a(e,t){p.count_following=t}function s(e,t){p.count_sponsoring=t}function i(){t.$reset(),e.go("signin")}function c(){function e(e){p.count_following=e.filter(u).length,p.count_sponsoring=e.filter(l).length}function t(e){console.log(e)}n.sponzorshipBySponzor(p.userAuth.id).then(e)["catch"](t)}function u(e){return"1"!=e.status}function l(e){return"1"==e.status}var p=this;p.userAuth=t.userAuth,p.count_following=0,p.count_sponsoring=0,p.logout=i,r()}angular.module("app.dashboard-sponzor").controller("MenuSponzorCtrl",e),e.$inject=["$state","$localStorage","sponzorshipService","$rootScope"]}(),function(){"use strict";function e(e,t,n,o,r,a,s,i,c,u,l,p,d,h,f,m,g){function v(){I.sponsors=[],I.newEvent.access=!0,I.newEvent.starttime="00:00:00",I.newEvent.start="2015-12-28",I.newEvent.endtime="01:00:00",I.newEvent.end="2015-12-28",l.fromTemplateUrl("app/events-organizer/sponsor-modal.html",{scope:e,animation:"slide-in-up"}).then(function(e){I.modalSponsor=e}),T()}function w(e){return a.show(e)}function S(){function e(e){I.newEvent.start=moment(e).format("YYYY-MM-DD")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"date",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function z(){function e(e){I.newEvent.end=moment(e).format("YYYY-MM-DD")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"date",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function k(){function e(e){I.newEvent.starttime=moment(e).format("HH:mm:ss")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"time",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function E(){function e(e){I.newEvent.endtime=moment(e).format("HH:mm:ss")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();w({date:new Date,mode:"time",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function $(){function e(e){I.imageURI=e,I.newEvent.image="data:image/jpeg;base64,"+e}function t(e){console.log(e)}var n={quality:100,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!1,encodingType:Camera.EncodingType.JPEG,targetWidth:500,targetHeight:500,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1};s.getPicture(n).then(e)["catch"](t)}function y(e){function n(e){return I.newEvent.image=e,c.createEvent(A())}function o(n){r.hideLoad(),r.resetForm(e),C(n.id),I.newEvent={},h.nextViewOptions({disableAnimate:!1,disableBack:!0}),d.go("organizer.events.list"),p.showShortBottom(t.instant("MESSAGES.succ_event_mess"))}function a(e){r.hideLoad(),r.alert({title:t.instant("ERRORS.addeventsform_error_tit"),template:t.instant("ERRORS.addeventsform_error_mess")})}r.showLoad(),I.imageURI?m.uploadImage(I.imageURI).then(n).then(o)["catch"](a):c.createEvent(A()).then(o)["catch"](a)}function T(){function e(e){I.eventTypes=e,I.eventTypes.length>0&&(I.newEvent.type=I.eventTypes[0])}function t(e){console.log(e)}i.allEventTypes().then(e)["catch"](t)}function A(){function e(e,t){return e=moment(e,"YYYY-MM-DD").format("YYYY-MM-DD"),t=moment(e+" "+t).format("HH:mm:ss"),e+" "+t}return{title:I.newEvent.title,location:I.newEvent.location,location_reference:"referencia",description:I.newEvent.description,starts:e(I.newEvent.start,I.newEvent.starttime),ends:e(I.newEvent.end,I.newEvent.endtime),image:I.newEvent.image?I.newEvent.image:"http://i.imgur.com/t8YehGM.jpg",privacy:I.newEvent.access?0:1,lang:t.use(),organizer:I.userAuth.id,category:1,type:I.newEvent.type.id}}function C(e){for(var t=I.sponsors.length,n=0;t>n;n++){var o=I.sponsors[n];o.id_event=e,o.reserved_quantity=0,L(o)}}function L(e){function t(e){console.log(e)}function n(e){console.log(e)}return u.createPerk(e).then(t)["catch"](n)}function _(){I.modalSponsor.show()}function P(e){I.modalSponsor.hide(),r.resetForm(e),
I.newSponsor={}}function D(){I.isNewSponsor=!0,I.openModalSponsor()}function B(e){I.isNewSponsor=!1,I.newSponsor=e,I.openModalSponsor()}function b(){I.sponsors.push(I.newSponsor),I.closeModalSponsor()}function U(){var e=I.sponsors.indexOf(I.newSponsor);I.sponsors.splice(e,1),I.closeModalSponsor()}function O(){I.closeModalSponsor()}function j(e){I.isNewSponsor?(b(),r.resetForm(e)):(O(),r.resetForm(e))}var I=this;I.newEvent={},I.newSponsor={},I.isNewSponsor=!0,I.eventTypes=[],I.sponsors=[],I.userAuth=n.userAuth,I.modalSponsor=null,I.imageURI=null,I.clickedStartDate=S,I.clickedEndDate=z,I.clickedStartTime=k,I.clickedEndTime=E,I.getPhoto=$,I.createEvent=y,I.openModalSponsor=_,I.closeModalSponsor=P,I.createSponsor=D,I.editSponsor=B,I.deleteSponsor=U,I.submitSponsor=j,v()}angular.module("app.events-organizer").controller("AddEventController",e),e.$inject=["$scope","$translate","$localStorage","userService","utilsService","$cordovaDatePicker","$cordovaCamera","eventTypeService","eventService","perkService","$ionicModal","$cordovaToast","$state","$ionicHistory","awsImageService","imgurService","$q"]}(),function(){"use strict";function e(e,t,n,o,r,a,s,i,c,u,l,p,d,h,f,m,g){function v(){R.sponsors=[],l.fromTemplateUrl("app/events-organizer/sponsor-edit-modal.html",{scope:e,animation:"slide-in-up"}).then(function(e){R.modalSponsor=e}),w()}function w(){function e(e){r.hideLoad(),R.newEvent=e,R.newEvent.start=moment(e.starts).format("YYYY-MM-DD"),R.newEvent.starttime=moment(e.starts).format("HH:mm:ss"),R.newEvent.end=moment(e.ends).format("YYYY-MM-DD"),R.newEvent.endtime=moment(e.ends).format("HH:mm:ss"),R.newEvent.access="1"==R.newEvent.privacy?!0:!1,R.sponsors=R.newEvent.perks,A()}function t(e){r.hideLoad(),console.log(e.data)}r.showLoad(),c.getEvent(g.id).then(e)["catch"](t)}function S(e){return a.show(e)}function z(){function e(e){R.newEvent.start=moment(e).format("YYYY-MM-DD")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();S({date:new Date,mode:"date",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function k(){function e(e){R.newEvent.end=moment(e).format("YYYY-MM-DD")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();S({date:new Date,mode:"date",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function E(){function e(e){R.newEvent.starttime=moment(e).format("HH:mm:ss")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();S({date:new Date,mode:"time",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function $(){function e(e){R.newEvent.endtime=moment(e).format("HH:mm:ss")}var t=ionic.Platform.isIOS()?new Date:(new Date).getTime();S({date:new Date,mode:"time",minDate:t,allowOldDates:!0,allowFutureDates:!0,doneButtonLabel:"DONE",doneButtonColor:"#F2F3F4",cancelButtonLabel:"CANCEL",cancelButtonColor:"#000000"}).then(e)}function y(){function e(e){R.imageURI=e,R.newEvent.image="data:image/jpeg;base64,"+e}function t(e){console.log(e)}var n={quality:100,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!1,encodingType:Camera.EncodingType.JPEG,targetWidth:500,targetHeight:500,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1};s.getPicture(n).then(e)["catch"](t)}function T(e){function n(e){return R.newEvent.image=e,c.editEventPatch(R.newEvent.id,C())}function o(n){r.hideLoad(),r.resetForm(e),R.newEvent={},h.nextViewOptions({disableAnimate:!1,disableBack:!0}),h.goBack(),p.showShortBottom(t.instant("MESSAGES.succ_event_mess"))}function a(e){return L(e.id)}function s(e){r.hideLoad(),r.alert({title:t.instant("ERRORS.addeventsform_error_tit"),template:t.instant("ERRORS.addeventsform_error_mess")})}r.showLoad(),R.imageURI?f.uploadImage(R.imageURI).then(n).then(a).then(o)["catch"](s):c.editEventPatch(R.newEvent.id,C()).then(a).then(o)["catch"](s)}function A(){function e(e){R.eventTypes=e;for(var t=0;t<R.eventTypes.length;t++)if(R.eventTypes[t].id==R.newEvent.type.id){R.newEvent.type=R.eventTypes[t];break}}function t(e){console.log(e)}i.allEventTypes().then(e)["catch"](t)}function C(){function e(e,t){return e=moment(e,"YYYY-MM-DD").format("YYYY-MM-DD"),t=moment(e+" "+t).format("HH:mm:ss"),e+" "+t}return{title:R.newEvent.title,location:R.newEvent.location,location_reference:"referencia",description:R.newEvent.description,starts:e(R.newEvent.start,R.newEvent.starttime),ends:e(R.newEvent.end,R.newEvent.endtime),image:R.newEvent.image?R.newEvent.image:"http://i.imgur.com/t8YehGM.jpg",privacy:R.newEvent.access?0:1,lang:t.use(),organizer:R.userAuth.id,category:1,type:R.newEvent.type.id}}function L(e){for(var t=[],n=R.sponsors.length,o=0;n>o;o++){var r=R.sponsors[o];r.id?t.push(u.editPerkPatch(r.id,r)):(r.id_event=e,r.reserved_quantity=0,t.push(u.createPerk(r)))}return m.all(t)}function _(){R.modalSponsor.show()}function P(e){R.modalSponsor.hide(),r.resetForm(e),R.newSponsor={}}function D(){R.isNewSponsor=!0,R.openModalSponsor()}function B(e){R.isNewSponsor=!1,R.newSponsor=e,R.newSponsor.total_quantity=parseInt(R.newSponsor.total_quantity),R.newSponsor.usd=parseInt(R.newSponsor.usd),R.openModalSponsor()}function b(){R.sponsors.push(R.newSponsor),R.closeModalSponsor()}function U(){function e(e){if(e){var t=R.sponsors.indexOf(R.newSponsor);R.newSponsor.id?O(t,R.newSponsor.id):(R.sponsors.splice(t,1),R.closeModalSponsor())}else R.closeModalSponsor()}r.confirm({template:"Esta seguro de eliminar este tipo de patronicio."}).then(e)}function O(e,t){function n(t){console.log(t),R.sponsors.splice(e,1),R.closeModalSponsor()}function o(e){console.log(e),R.closeModalSponsor()}u.deletePerk(t).then(n)["catch"](o)}function j(){R.closeModalSponsor()}function I(e){R.isNewSponsor?(b(),r.resetForm(e)):(j(),r.resetForm(e))}var R=this;R.newEvent={},R.newSponsor={},R.isNewSponsor=!0,R.eventTypes=[],R.sponsors=[],R.userAuth=n.userAuth,R.modalSponsor=null,R.imageURI=null,R.clickedStartDate=z,R.clickedEndDate=k,R.clickedStartTime=E,R.clickedEndTime=$,R.getPhoto=y,R.updateEvent=T,R.openModalSponsor=_,R.closeModalSponsor=P,R.createSponsor=D,R.editSponsor=B,R.deleteSponsor=U,R.submitSponsor=I,v()}angular.module("app.events-organizer").controller("EditEventController",e),e.$inject=["$scope","$translate","$localStorage","userService","utilsService","$cordovaDatePicker","$cordovaCamera","eventTypeService","eventService","perkService","$ionicModal","$cordovaToast","$state","$ionicHistory","imgurService","$q","$stateParams"]}(),function(){"use strict";function e(e,t,n,o,r,a,s,i,c,u,l,p,d,h){function f(){m(),l.canDragContent(!1),P=[y,$,T]}function m(){function e(e){n.hideLoad(),A.event=e,A.perks=g(A.event)}function r(e){n.hideLoad(),console.log(e.data)}n.showLoad(),t.getEvent(o.idEvent).then(e)["catch"](r)}function g(e){for(var t=e.perks,n=0;n<t.length;n++)t[n].sponsorships=_.where(e.sponzorships,{perk_id:t[n].id}),t[n].tasks=_.where(e.perk_tasks,{perk_id:t[n].id});return t}function v(){function e(e){n.hideLoad(),E(),r.go("organizer.events")}function a(e){console.log(e),n.hideLoad(),E(),n.alert({title:"Error",template:e.message})}n.showLoad(),t.deleteEvent(o.idEvent).then(e)["catch"](a)}function w(t){A.sponsorshipSelected=t,C=s.show({title:"Options",templateUrl:"app/events-organizer/options-sponsorship.html",scope:e})}function S(){C.close()}function z(e){function t(e){n.hideLoad(),S(),A.sponsorshipSelected.status=e.status}function o(e){n.hideLoad(),S(),console.log(e)}n.showLoad();var r=angular.copy(A.sponsorshipSelected);r.status=e,a.editSponzorshipPut(r.id,r).then(t)["catch"](o)}function k(){L=i.show({buttons:[{text:'<i class="icon ion-edit"></i> Edit event'},{text:'<i class="icon ion-share"></i> <b>Share</b> This'},{text:'<i class="icon ion-calendar"></i> Add to calendar'}],destructiveText:'<i class="icon ion-trash-a"></i> Delete event',titleText:"Options",cancelText:'<i class="icon ion-close"></i> Cancel',buttonClicked:function(e){return P[e](),!0},destructiveButtonClicked:v})}function E(){L()}function $(){function e(){console.log("exit")}function t(e){console.log(e)}var n=A.event.description,o=A.event.title,r=null,a="https://sponzor.me/#/event/"+A.event.id;c.share(n,o,r,a).then(e)["catch"](t)}function y(){r.go("organizer.editevent",{id:A.event.id})}function T(){function e(){d.showShortBottom(h.instant("MESSAGES.succ_add_to_calendar"))}function t(e){console.log(e)}u.createEvent({title:A.event.title,location:A.event.location,notes:A.event.description,startDate:A.event.starts,endDate:A.event.ends}).then(e)["catch"](t)}var A=this,C=null,L=null,P=[];A.event={},A.deleteEvent=v,A.perks=[],A.sponsorshipSelected={},A.openOptionsSponsorship=w,A.closeOptionsSponsorship=S,A.updateSponsorship=z,A.showActionSheet=k,A.hideActionSheet=E,f()}angular.module("app.events-organizer").controller("EventDetailOrganizerController",e),e.$inject=["$scope","eventService","utilsService","$stateParams","$state","sponzorshipService","$ionicPopup","$ionicActionSheet","$cordovaSocialSharing","$cordovaCalendar","$ionicSideMenuDelegate","$ionicHistory","$cordovaToast","$translate"]}(),function(){"use strict";function e(e,t,n,o,r,a){function s(){i()}function i(){function e(e){o.hideLoad(),l.showEmptyState=!1,l.events=e.events.filter(u),l.showEmptyState=0==l.events.length?!0:!1,a.$broadcast("Menu:count_events",l.events.length)}function t(e){o.hideLoad(),l.showEmptyState=!0,console.log(e)}o.showLoad(),n.getUser(l.userAuth.id).then(e)["catch"](t)}function c(){function e(e){r.$broadcast("scroll.refreshComplete"),l.events=e.events.filter(u),a.$broadcast("Menu:count_events",l.events.length)}function t(e){console.log(e)}n.getUser(l.userAuth.id).then(e)["catch"](t)}function u(e){var t=moment(new Date).subtract(1,"days");return moment(e.ends).isAfter(t)}var l=this;l.userAuth=t.userAuth,l.events=[],l.showEmptyState=!1,l.doRefresh=c,s()}angular.module("app.events-organizer").controller("EventListController",e),e.$inject=["$translate","$localStorage","userService","utilsService","$scope","$rootScope"]}(),function(){"use strict";function e(e,t,n,o,r,a){function s(){i()}function i(){function e(e){o.hideLoad(),l.showEmptyState=!1,console.log(e.events.length),l.events=e.events.filter(u),l.showEmptyState=0==l.events.length?!0:!1,a.$broadcast("Menu:count_events",l.events.length)}function t(e){o.hideLoad(),l.showEmptyState=!0,console.log(e)}o.showLoad(),n.getUser(l.userAuth.id).then(e)["catch"](t)}function c(){function e(e){r.$broadcast("scroll.refreshComplete"),console.log(e.events.length),l.events=e.events.filter(u),a.$broadcast("Menu:count_events",l.events.length)}function t(e){console.log(e)}n.getUser(l.userAuth.id).then(e)["catch"](t)}function u(e){var t=moment(new Date).subtract(1,"days");return moment(e.ends).isBefore(t)}var l=this;l.userAuth=t.userAuth,l.events=[],l.showEmptyState=!1,l.doRefresh=c,s()}angular.module("app.events-organizer").controller("PastEventsController",e),e.$inject=["$translate","$localStorage","userService","utilsService","$scope","$rootScope"]}(),function(){"use strict";function e(e,t,n,o,r,a,s){function i(){c(),s.fromTemplateUrl("app/events-sponzor/sponzor-it-modal.html",{scope:e,animation:"slide-in-up"}).then(function(e){f.modalSponsorIt=e})}function c(){function e(e){n.hideLoad(),f.event=e}function r(e){n.hideLoad(),console.log(e)}n.showLoad(),t.getEvent(o.idEvent).then(e)["catch"](r)}function u(){f.modalSponsorIt.show()}function l(){f.modalSponsorIt.hide(),f.newSponsorIt={}}function p(e){f.newSponsorIt.perk=e,f.openModalSponsorIt()}function d(){function e(e){f.closeModalSponsorIt(),console.log(e)}function t(e){f.closeModalSponsorIt(),console.log(e)}r.createSponzorship(h()).then(e)["catch"](t)}function h(){return{sponzor_id:f.userAuth.id,perk_id:f.newSponsorIt.perk.id,event_id:f.event.id,organizer_id:f.event.organizer.id,status:0,cause:f.newSponsorIt.cause}}var f=this;f.event={},f.userAuth=a.userAuth,f.modalSponsorIt=null,f.newSponsorIt={},f.openModalSponsorIt=u,f.closeModalSponsorIt=l,f.createSponsorIt=p,f.submitSponsorIt=d,i()}angular.module("app.events-sponzor").controller("EventDetailSponzorController",e),e.$inject=["$scope","eventService","utilsService","$stateParams","sponzorshipService","$localStorage","$ionicModal"]}(),function(){"use strict";function e(e,t,n,o,r,a){function s(){i()}function i(){function e(e){n.hideLoad(),l.events=e.filter(u),l.showEmptyState=0==l.events.length?!0:!1}function t(e){n.hideLoad(),l.showEmptyState=!0,console.log(e)}n.showLoad(),o.sponzorshipBySponzor(l.userAuth.id).then(e)["catch"](t)}function c(){function e(e){r.$broadcast("scroll.refreshComplete"),l.events=e.filter(u),a.$broadcast("Menu:count_following",l.events.length)}function t(e){console.log(e)}o.sponzorshipBySponzor(l.userAuth.id).then(e)["catch"](t)}function u(e){return"1"!=e.status}var l=this;l.userAuth=t.userAuth,l.events=[],l.showEmptyState=!1,l.doRefresh=c,s()}angular.module("app.events-organizer").controller("FollowEventsController",e),e.$inject=["$translate","$localStorage","utilsService","sponzorshipService","$scope","$rootScope"]}(),function(){"use strict";function e(e,t,n,o,r,a){function s(){i()}function i(){function e(e){n.hideLoad(),l.events=e.filter(u),l.showEmptyState=0==l.events.length?!0:!1}function t(e){n.hideLoad(),l.showEmptyState=!0,console.log(e)}n.showLoad(),o.sponzorshipBySponzor(l.userAuth.id).then(e)["catch"](t)}function c(){function e(e){r.$broadcast("scroll.refreshComplete"),l.events=e.filter(u),a.$broadcast("Menu:count_sponsoring",l.events.length)}function t(e){console.log(e)}o.sponzorshipBySponzor(l.userAuth.id).then(e)["catch"](t)}function u(e){return"1"==e.status}var l=this;l.userAuth=t.userAuth,l.events=[],l.showEmptyState=!1,l.doRefresh=c,s()}angular.module("app.events-organizer").controller("SponzoringEventsController",e),e.$inject=["$translate","$localStorage","utilsService","sponzorshipService","$scope","$rootScope"]}(),function(){"use strict";function e(e,t,n,o,r,a){function s(){i()}function i(){function e(e){n.hideLoad(),console.log(e),d.sponsorship=e}function o(e){n.hideLoad(),console.log(e)}n.showLoad(),t.getSponzorship(r.id).then(e)["catch"](o)}function c(e){function t(e){e&&p(1)}l("Are you sure?","In accept the sponsor").then(t)}function u(e){function t(e){e&&p(2)}l("Are you sure?","In reject the sponsor").then(t)}function l(e,t){return o.confirm({title:e,template:t})}function p(e){function o(e){n.hideLoad(),d.sponsorship.status=e.status}function r(e){n.hideLoad(),console.log(e)}n.showLoad();var a=angular.copy(d.sponsorship);a.status=e,t.editSponzorshipPut(a.id,a).then(o)["catch"](r)}var d=this;d.sponsorship={},d.userAuth=e.userAuth,d.showEmptyState=!1,d.sponzorAccept=c,d.sponzorReject=u,s()}angular.module("app.sponsors-organizer").controller("SponsorshipDetailController",e),e.$inject=["$localStorage","sponzorshipService","utilsService","$ionicPopup","$stateParams","$scope"]}(),function(){"use strict";function e(e,t,n,o,r,a,s,i){function c(){o.fromTemplateUrl("app/sponsors-organizer/events-popover.html",{scope:s}).then(function(e){z=e}),u()}function u(){function e(e){n.hideLoad(),S.showEmptyState=!0,S.sponsors=e,S.events=l(S.sponsors)}function o(e){n.hideLoad(),S.showEmptyState=!0,console.log(e)}n.showLoad(),t.sponzorshipByOrganizer(S.userAuth.id).then(e)["catch"](o)}function l(e){function t(e,t,n){for(var o,r=0;r<n.length;r++)if(n[r].event_id==e.event_id){o=r;break}return o==t}function n(e){return{title:e.title,id:e.event_id}}return e.filter(t).map(n)}function p(e){z.show(e)}function d(){z.hide()}function h(e){S.search={},e&&(S.search.event_id=e),a.scrollTop(),d()}function f(e){function t(t){t&&v(e,1)}g("Are you sure?","In the accept the sponsor").then(t)}function m(e){function t(t){t&&v(e,2)}g("Are you sure?","In the reject the sponsor").then(t)}function g(e,t){return r.confirm({title:e,template:t})}function v(e,o){function r(t){n.hideLoad(),e.status=t.status}function a(e){n.hideLoad(),console.log(e)}n.showLoad();var s=angular.copy(e);s.status=o,t.editSponzorshipPut(s.id,s).then(r)["catch"](a)}function w(){function e(e){s.$broadcast("scroll.refreshComplete"),S.search={},S.sponsors=e,S.events=l(S.sponsors),i.$broadcast("Menu:count_sponsors",S.sponsors.length)}function n(e){S.showEmptyState=!0,console.log(e)}t.sponzorshipByOrganizer(S.userAuth.id).then(e)["catch"](n)}var S=this,z=null;S.search={},S.sponsors=[],S.events=[],S.results=[],S.userAuth=e.userAuth,S.showEmptyState=!1,S.filterByEvent=h,S.showFilter=p,S.sponsorAccept=f,S.sponsorReject=m,S.doRefresh=w,c()}angular.module("app.sponsors-organizer").controller("SponzorListController",e),e.$inject=["$localStorage","sponzorshipService","utilsService","$ionicPopover","$ionicPopup","$ionicScrollDelegate","$scope","$rootScope"]}(),function(){"use strict";function e(e,t,n,o,r,a,s){function i(){l(),p()}function c(e){function n(t){r.hideLoad(),r.resetForm(e),d.newTask={},s.nextViewOptions({disableAnimate:!1,disableBack:!0}),s.goBack()}function o(e){r.hideLoad(),console.log(e)}r.showLoad(),t.createPerkTask(u()).then(n)["catch"](o)}function u(){return{user_id:d.userAuth.id,event_id:d.newTask.event.id,perk_id:d.newTask.perk.id,title:d.newTask.title,description:d.newTask.description,type:0,status:0}}function l(){function e(e){r.hideLoad(),d.events=e.events}function t(e){r.hideLoad(),console.log(e)}r.showLoad(),o.getUser(d.userAuth.id).then(e)["catch"](t)}function p(){function e(e){r.hideLoad(),d.perks=e}function t(e){r.hideLoad(),console.log(e)}r.showLoad(),n.allPerks().then(e)["catch"](t)}var d=this;d.newTask={},d.userAuth=e.userAuth,d.events=[],d.perks=[],d.createTask=c,i()}angular.module("app.tasks-organizer").controller("AddTaskController",e),e.$inject=["$localStorage","perkTaskService","perkService","userService","utilsService","$state","$ionicHistory"]}(),function(){"use strict";function e(e,t,n,o,r,a,s,i,c){function u(){l()}function l(){function e(e){r.hideLoad(),f(e[0]),m(e[1]),g(e[2])}function a(e){r.hideLoad(),console.log(e)}r.showLoad();var i=[o.getUser(v.userAuth.id),n.allPerks(),t.getPerkTask(s.id)];c.all(i).then(e)["catch"](a)}function p(e){function n(t){r.hideLoad(),r.resetForm(e),v.newTask={},i.nextViewOptions({disableAnimate:!1,disableBack:!0}),i.goBack()}function o(e){r.hideLoad(),console.log(e)}r.showLoad(),t.editPerkTaskPatch(s.id,h()).then(n)["catch"](o)}function d(){function e(e){v.newTask={},i.nextViewOptions({disableAnimate:!1,disableBack:!0}),a.go("organizer.tasks")}function n(e){r.hideLoad(),r.alert({template:e.data.message})}r.showLoad(),t.deletePerkTask(s.id).then(e)["catch"](n)}function h(){return{user_id:v.userAuth.id,event_id:v.newTask.event.id,perk_id:v.newTask.perk.id,title:v.newTask.title,description:v.newTask.description,type:0,status:v.newTask.status?"1":"0"}}function f(e){v.events=e.events}function m(e){v.perks=e}function g(e){v.newTask=e,v.newTask.status="1"==e.status?!0:!1;for(var t=0;t<v.events.length;t++)if(v.events[t].id==v.newTask.event_id){v.newTask.event=v.events[t];break}for(var t=0;t<v.perks.length;t++)if(v.perks[t].id==v.newTask.perk.id){v.newTask.perk=v.perks[t];break}}var v=this;v.newTask={},v.userAuth=e.userAuth,v.events=[],v.perks=[],v.editTask=p,v.deleteTask=d,u()}angular.module("app.tasks-organizer").controller("EditTaskController",e),e.$inject=["$localStorage","perkTaskService","perkService","userService","utilsService","$state","$stateParams","$ionicHistory","$q"]}(),function(){"use strict";function e(e,t,n,o,r){function a(){s()}function s(){function e(e){n.hideLoad(),l.tasks=c(e);var t=e.filter(u).length;r.$broadcast("Menu:count_tasks",t)}function o(e){n.hideLoad(),console.log(e)}n.showLoad(),t.getPerkTaskByOrganizer(l.userAuth.id).then(e)["catch"](o)}function i(){function e(e){o.$broadcast("scroll.refreshComplete"),l.tasks=c(e);var t=e.filter(u).length;r.$broadcast("Menu:count_tasks",t)}function n(e){console.log(e)}t.getPerkTaskByOrganizer(l.userAuth.id).then(e)["catch"](n)}function c(e){function t(e,t){return{title:t,tasks:e}}var n=_.groupBy(e,"eventTitle");return _.map(n,t)}function u(e){return"1"!=e.status}var l=this;l.userAuth=e.userAuth,l.tasks=[],l.showEmptyState=!1,l.doRefresh=i,a()}angular.module("app.tasks-organizer").controller("TaskListController",e),e.$inject=["$localStorage","perkTaskService","utilsService","$scope","$rootScope"]}(),function(){"use strict";function e(e,t,n,o){function r(){function r(){o.hideLoad(),n.go("signin"),s.user={}}function i(t){o.hideLoad(),"Invalid credentials"===t.message&&Utils.alertshow({title:e.instant("ERRORS.signin_title_credentials"),template:e.instant("ERRORS.signin_incorrect_credentials")})}o.showLoad(),t.forgotPassword(a()).then(r)["catch"](i)}function a(){return{email:s.user.email}}var s=this;s.user={},s.resetPassword=r}angular.module("app.users").controller("ForgotController",e),e.$inject=["$translate","userService","$state","utilsService"]}(),function(){"use strict";function e(e,t,n,o,r,a,s){function i(){p()}function c(){function e(e){n.hideLoad(),v()}function t(e){n.hideLoad(),console.log(e)}n.showLoad();for(var o=l(),r=[],a=0;a<o.length;a++)r.push(u(o[a]));s.all(r).then(e)["catch"](t)}function u(e){return a.createUserInterest({interest_id:e.id_interest,user_id:z.userAuth.id})}function l(e){function t(e){return e.interests}function n(e){return e.interests}function o(e,t){return e.concat(t)}function r(e){return e.check}return z.categories.filter(t).map(n).reduce(o,[]).filter(r)}function p(){function e(e){n.hideLoad(),z.categories=e}function t(e){n.hideLoad(),console.log(e)}n.showLoad(),r.allCategories().then(e)["catch"](t)}function d(e){function t(t){n.hideLoad(),e.interests=t.interests,k.push(e.id)}function o(e){n.hideLoad(),console.log(e)}h(e),-1==k.indexOf(e.id)&&(n.showLoad(),r.getCategory(e.id).then(t)["catch"](o))}function h(e){f(e)?z.categorySelected=null:z.categorySelected=e}function f(e){return z.categorySelected==e}function m(){o.userAuth=n.updateUserAuth(z.userAuth)}function g(){function t(e){console.log(e)}z.userAuth.demo=1,m(),e.editUserPatch(z.userAuth.id,z.userAuth).then(w)["catch"](t)}function v(){0==z.userAuth.demo?g():S()}function w(){0==z.userAuth.type?t.go("organizer.intro"):t.go("sponzor.intro")}function S(){0==z.userAuth.type?t.go("organizer.home"):t.go("sponzor.home")}var z=this,k=[];z.userAuth=o.userAuth||{},z.categories=[],z.categorySelected=null,z.updateInterests=c,z.getCategory=d,z.isCategorySelected=f,z.validateTutorial=v,i()}angular.module("app.users").controller("FormInterestsController",e),e.$inject=["userService","$state","utilsService","$localStorage","categoryService","userInterestService","$q"]}(),function(){"use strict";function e(e,t,n,o,r){function a(){u.user.lang="en",u.user.gender=1,u.user.age="0"==u.user.age?null:parseInt(u.user.age)}function s(e){function a(t){o.hideLoad(),o.resetForm(e),u.user=t,u.user.age=parseInt(u.user.age),r.userAuth=o.updateUserAuth(u.user),u.user={},n.go("interests")}function s(e){o.hideLoad(),console.log(e)}o.showLoad(),t.editUserPatch(u.user.id,i()).then(a)["catch"](s)}function i(){return{name:u.user.name,age:parseInt(u.user.age),location:u.user.location,lang:u.user.lang,sex:parseInt(u.user.sex)}}function c(){e.use(u.newUser.lang)}var u=this;u.user=r.userAuth||{},u.updateProfile=s,u.changeLang=c,a()}angular.module("app.users").controller("FormProfileController",e),e.$inject=["$translate","userService","$state","utilsService","$localStorage"]}(),function(){"use strict";function e(e,t,n){function o(n){function o(){t.hideLoad(),t.resetForm(n),a.friend={},t.alert({title:"Nice!",template:"Your Invitation was Sent."})}function s(){t.hideLoad()}t.showLoad(),e.invitedUser(r()).then(o)["catch"](s)}function r(){return{user_id:a.userAuth.id,email:a.friend.email,message:"Try this ;)"}}var a=this;a.friend={},a.userAuth=n.userAuth,a.inviteFriend=o}angular.module("app.users").controller("InviteUsersController",e),e.$inject=["userService","utilsService","$localStorage"]}(),function(){"use strict";function e(e,t,n,o,r,a){function s(){t.checkSession()&&(h.userResponse=n.userAuth,u())}function i(o){function s(e){r.hideLoad(),r.resetForm(o),h.userResponse=e,n.token=a.encode(h.user.email+":"+h.user.password),d(),u(),h.user={}}function i(t){r.hideLoad(),"Invalid credentials"===r.trim(t.message)&&r.alert({title:e.instant("ERRORS.signin_title_credentials"),template:e.instant("ERRORS.signin_incorrect_credentials")}),h.user.password=""}r.showLoad(),t.login(h.user.email,h.user.password).then(s)["catch"](i)}function c(){function e(e){console.log(e)}h.userResponse.demo=1,d(),t.editUserPatch(h.userResponse.id,h.userResponse).then(l)["catch"](e)}function u(){0==h.userResponse.demo?c():p()}function l(){0==h.userResponse.type?o.go("organizer.intro"):o.go("sponzor.intro")}function p(){0==h.userResponse.type?o.go("organizer.home"):o.go("sponzor.home")}function d(){n.userAuth=r.updateUserAuth(h.userResponse)}var h=this;h.user={},h.userResponse={},h.signIn=i,s()}angular.module("app.users").controller("LoginController",e),e.$inject=["$translate","userService","$localStorage","$state","utilsService","$base64"]}(),function(){"use strict";function e(e,t,n,o,r,a,s){function i(){l.user.age=parseInt(l.user.age),l.user.comunity_size=l.user.comunity_size||0,l.user.comunity_size=parseInt(l.user.comunity_size),console.log(l.user)}function c(){function e(e){l.imageURI=e,l.user.image="data:image/jpeg;base64,"+e}function t(e){console.log(e)}var o={quality:100,destinationType:Camera.DestinationType.DATA_URL,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!0,encodingType:Camera.EncodingType.JPEG,targetWidth:500,targetHeight:500,popoverOptions:CameraPopoverOptions,saveToPhotoAlbum:!1};n.getPicture(o).then(e)["catch"](t)}function u(n){function r(t){return console.log(t),l.user.image=t,e.editUserPatch(l.user.id,l.user)}function i(e){t.hideLoad(),t.resetForm(n),l.user=e,l.user.age=parseInt(l.user.age),o.userAuth=t.updateUserAuth(e),s.showShortBottom("Su perfil se ha actulizado")}function c(e){t.hideLoad(),console.log(e)}t.showLoad(),l.imageURI?a.uploadImage(l.imageURI).then(r).then(i)["catch"](c):e.editUserPatch(l.user.id,l.user).then(i)["catch"](c)}var l=this;l.user=o.userAuth,l.getPhoto=c,l.updateProfile=u,l.imageURI=null,i()}angular.module("app.users").controller("ProfileController",e),e.$inject=["userService","utilsService","$cordovaCamera","$localStorage","$q","imgurService","$cordovaToast"]}(),function(){"use strict";function e(e,t,n,o,r,a){function s(){l.newUser.type=0}function i(s){function i(n){o.hideLoad(),o.resetForm(s),o.alert({title:e.instant("MESSAGES.succ_user_tit"),template:e.instant("MESSAGES.succ_user_mess")}),r.token=a.encode(l.newUser.email+":"+l.newUser.password),l.newUser={},l.newUser.type=0,r.userAuth=n,t.go("profile")}function p(t){o.hideLoad(),"Invalid credentials"===o.trim(t.message)?o.alert({title:e.instant("ERRORS.signin_title_credentials"),template:e.instant("ERRORS.signin_incorrect_credentials")}):"The email has already been taken."===o.trim(t.error.email)?o.alert({title:e.instant("ERRORS.signin_taken_credentials_title"),template:e.instant("ERRORS.signin_taken_credentials_message")}):"Not inserted"===o.trim(t.message)&&o.alert({title:e.instant("ERRORS.signin_notinserted_credentials_title"),template:e.instant("ERRORS.signin_notinserted_credentials_message")})}o.showLoad(),n.createUser(c()).then(u).then(i)["catch"](p)}function c(){return{email:l.newUser.email,password:l.newUser.password,password_confirmation:l.newUser.password,name:l.newUser.name,lang:"en",type:l.newUser.type}}function u(){return n.login(l.newUser.email,l.newUser.password)}var l=this;l.newUser={},l.registerNewUser=i,s()}angular.module("app.users").controller("RegisterController",e),e.$inject=["$translate","$state","userService","utilsService","$localStorage","$base64"]}(),function(){"use strict";function e(e){function t(){e.use(n.lang)}var n=this;n.lang=e.use(),n.save=t}angular.module("app.users").controller("SettingsController",e),e.$inject=["$translate"]}();